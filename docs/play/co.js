/* co 1.0.0-21e92bfb88 */
!function(e){"use strict";var t,n,r,s,i,o,a,l,c,u,p,h,f,g,d,S=!1,m=void 0!==e?e:"undefined"!=typeof window?window:this||{},y=null;try{"undefined"!=typeof require&&(y=require("util"),require("source-map-support").install())}catch(e){}function I(e){console.error.apply(console,["panic:",e].concat(Array.prototype.slice.call(arguments,1))),console.error(function(e){const t={stack:""};if(Error.captureStackTrace){Error.captureStackTrace(t,e);const n=t.stack.indexOf("\n");if(-1!=n)return t.stack.substr(n+1)}return t.stack}(I)),function(e){throw"undefined"!=typeof process&&process.exit(2),"EXIT#2"}()}function L(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n!=s;++n){if(e[n]<t[n])return-1;if(t[n]<e[n])return 1}return n<r?-1:r<n?1:0}console.log.bind(console),t=y&&y.inspect?function(e){let t="undefined"!=typeof process&&process.stdout&&process.stdout.isTTY;return y.inspect(e,!1,4,!!t)}:function(e){try{return JSON.stringify(e)}catch(t){return String(e)}},function(e){e[e.LOWEST=0]="LOWEST",e[e.OROR=1]="OROR",e[e.ANDAND=2]="ANDAND",e[e.CMP=3]="CMP",e[e.ADD=4]="ADD",e[e.MUL=5]="MUL"}(n||(n={})),function(e){e[e.ILLEGAL=0]="ILLEGAL",e[e.EOF=1]="EOF",e[e.COMMENT=2]="COMMENT",e[e.literal_beg=3]="literal_beg",e[e.NAME=4]="NAME",e[e.NAMEAT=5]="NAMEAT",e[e.literal_num_beg=6]="literal_num_beg",e[e.literal_int_beg=7]="literal_int_beg",e[e.CHAR=8]="CHAR",e[e.INT=9]="INT",e[e.INT_BIN=10]="INT_BIN",e[e.INT_OCT=11]="INT_OCT",e[e.INT_HEX=12]="INT_HEX",e[e.literal_int_end=13]="literal_int_end",e[e.FLOAT=14]="FLOAT",e[e.literal_num_end=15]="literal_num_end",e[e.STRING=16]="STRING",e[e.STRING_MULTI=17]="STRING_MULTI",e[e.STRING_PIECE=18]="STRING_PIECE",e[e.literal_end=19]="literal_end",e[e.delim_beg=20]="delim_beg",e[e.LPAREN=21]="LPAREN",e[e.LBRACKET=22]="LBRACKET",e[e.LBRACE=23]="LBRACE",e[e.COMMA=24]="COMMA",e[e.DOT=25]="DOT",e[e.PERIODS=26]="PERIODS",e[e.ELLIPSIS=27]="ELLIPSIS",e[e.RPAREN=28]="RPAREN",e[e.RBRACKET=29]="RBRACKET",e[e.RBRACE=30]="RBRACE",e[e.SEMICOLON=31]="SEMICOLON",e[e.COLON=32]="COLON",e[e.delim_end=33]="delim_end",e[e.operator_beg=34]="operator_beg",e[e.ASSIGN=35]="ASSIGN",e[e.assignop_beg=36]="assignop_beg",e[e.ADD_ASSIGN=37]="ADD_ASSIGN",e[e.SUB_ASSIGN=38]="SUB_ASSIGN",e[e.MUL_ASSIGN=39]="MUL_ASSIGN",e[e.QUO_ASSIGN=40]="QUO_ASSIGN",e[e.REM_ASSIGN=41]="REM_ASSIGN",e[e.AND_ASSIGN=42]="AND_ASSIGN",e[e.OR_ASSIGN=43]="OR_ASSIGN",e[e.XOR_ASSIGN=44]="XOR_ASSIGN",e[e.SHL_ASSIGN=45]="SHL_ASSIGN",e[e.SHR_ASSIGN=46]="SHR_ASSIGN",e[e.AND_NOT_ASSIGN=47]="AND_NOT_ASSIGN",e[e.assignop_end=48]="assignop_end",e[e.INC=49]="INC",e[e.DEC=50]="DEC",e[e.SET_ASSIGN=51]="SET_ASSIGN",e[e.NOT=52]="NOT",e[e.ARROWL=53]="ARROWL",e[e.ARROWR=54]="ARROWR",e[e.cmpop_beg=55]="cmpop_beg",e[e.OROR=56]="OROR",e[e.ANDAND=57]="ANDAND",e[e.EQL=58]="EQL",e[e.NEQ=59]="NEQ",e[e.LSS=60]="LSS",e[e.LEQ=61]="LEQ",e[e.GTR=62]="GTR",e[e.GEQ=63]="GEQ",e[e.cmpop_end=64]="cmpop_end",e[e.ADD=65]="ADD",e[e.SUB=66]="SUB",e[e.OR=67]="OR",e[e.XOR=68]="XOR",e[e.MUL=69]="MUL",e[e.QUO=70]="QUO",e[e.REM=71]="REM",e[e.AND=72]="AND",e[e.AND_NOT=73]="AND_NOT",e[e.SHL=74]="SHL",e[e.SHR=75]="SHR",e[e.operator_end=76]="operator_end",e[e.keyword_beg=77]="keyword_beg",e[e.BREAK=78]="BREAK",e[e.CONTINUE=79]="CONTINUE",e[e.DEFAULT=80]="DEFAULT",e[e.DEFER=81]="DEFER",e[e.ELSE=82]="ELSE",e[e.ENUM=83]="ENUM",e[e.FALLTHROUGH=84]="FALLTHROUGH",e[e.FOR=85]="FOR",e[e.FUN=86]="FUN",e[e.GO=87]="GO",e[e.IF=88]="IF",e[e.IMPORT=89]="IMPORT",e[e.INTERFACE=90]="INTERFACE",e[e.IN=91]="IN",e[e.RETURN=92]="RETURN",e[e.SELECT=93]="SELECT",e[e.SWITCH=94]="SWITCH",e[e.SYMBOL=95]="SYMBOL",e[e.TYPE=96]="TYPE",e[e.WHILE=97]="WHILE",e[e.keyword_end=98]="keyword_end"}(r||(r={}));const v=new Map([[r.NAMEAT,"@"],[r.ADD,"+"],[r.SUB,"-"],[r.MUL,"*"],[r.QUO,"/"],[r.REM,"%"],[r.AND,"&"],[r.OR,"|"],[r.XOR,"^"],[r.SHL,"<<"],[r.SHR,">>"],[r.AND_NOT,"&^"],[r.ADD_ASSIGN,"+="],[r.SUB_ASSIGN,"-="],[r.MUL_ASSIGN,"*="],[r.QUO_ASSIGN,"/="],[r.REM_ASSIGN,"%="],[r.AND_ASSIGN,"&="],[r.OR_ASSIGN,"|="],[r.XOR_ASSIGN,"^="],[r.SHL_ASSIGN,"<<="],[r.SHR_ASSIGN,">>="],[r.AND_NOT_ASSIGN,"&^="],[r.ANDAND,"&&"],[r.OROR,"||"],[r.ARROWL,"<-"],[r.ARROWR,"->"],[r.INC,"++"],[r.DEC,"--"],[r.EQL,"=="],[r.LSS,"<"],[r.GTR,">"],[r.ASSIGN,"="],[r.NOT,"!"],[r.NEQ,"!="],[r.LEQ,"<="],[r.GEQ,">="],[r.SET_ASSIGN,":="],[r.ELLIPSIS,"..."],[r.PERIODS,".."],[r.LPAREN,"("],[r.LBRACKET,"["],[r.LBRACE,"{"],[r.COMMA,","],[r.DOT,"."],[r.RPAREN,")"],[r.RBRACKET,"]"],[r.RBRACE,"}"],[r.SEMICOLON,";"],[r.COLON,":"]]);for(let e=r.keyword_beg+1;e<r.keyword_end;++e){const t=r[e];v.set(r[t],t.toLowerCase())}function x(e){return v.get(e)||r[e].toLowerCase()}const E=new Uint8Array([103,111,100,101,102,101,114,98,114,101,97,107,99,111,110,116,105,110,117,101,100,101,102,97,117,108,116,101,110,117,109,101,108,115,101,102,97,108,108,116,104,114,111,117,103,104,102,111,114,102,117,110,114,101,116,117,114,110,105,109,112,111,114,116,105,102,105,110,105,110,116,101,114,102,97,99,101,115,119,105,116,99,104,115,101,108,101,99,116,115,121,109,98,111,108,116,121,112,101,119,104,105,108,101]),b=new class BTree{constructor(e){this.root=e}get(e){return function(e,t){for(;t;){const n=L(e,t.k);if(-1==n)t=t.L;else{if(1!=n){if(e.length==t.k.length)return t.v;break}t=t.R}}return null}(e,this.root)}}({k:E.subarray(0,2),v:r.GO,L:{k:E.subarray(2,7),v:r.DEFER,L:{k:E.subarray(7,12),v:r.BREAK,R:{k:E.subarray(12,20),v:r.CONTINUE,R:{k:E.subarray(20,27),v:r.DEFAULT}}},R:{k:E.subarray(27,31),v:r.ENUM,L:{k:E.subarray(31,35),v:r.ELSE},R:{k:E.subarray(35,46),v:r.FALLTHROUGH,R:{k:E.subarray(46,49),v:r.FOR,R:{k:E.subarray(49,52),v:r.FUN}}}}},R:{k:E.subarray(52,58),v:r.RETURN,L:{k:E.subarray(58,64),v:r.IMPORT,L:{k:E.subarray(64,66),v:r.IF},R:{k:E.subarray(66,68),v:r.IN,R:{k:E.subarray(68,77),v:r.INTERFACE}}},R:{k:E.subarray(77,83),v:r.SWITCH,L:{k:E.subarray(83,89),v:r.SELECT},R:{k:E.subarray(89,95),v:r.SYMBOL,R:{k:E.subarray(95,99),v:r.TYPE,R:{k:E.subarray(99,104),v:r.WHILE}}}}}}),R=65533,w=128,O=4,k=1114111,A=55296,T=57343,N=1024;let U;if("undefined"!=typeof TextDecoder){const e=new TextDecoder("utf-8");U=(t=>e.decode(void 0!=t.buffer?t:new Uint8Array(t)))}else"undefined"!=typeof Buffer?U=(e=>{let t;if(e instanceof Buffer)t=e;else if(e.buffer&&void 0!==e.byteOffset&&void 0!==e.byteLength)t=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else{t=Buffer.allocUnsafe(e.length);for(let n=0;n<e.length;++n)t[n]=e[n]}return t.toString("utf8")}):I("missing TextDecoder");"undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):"undefined"!=typeof Buffer||I("missing TextEncoder");const _=1114111,C="0000";function F(e){let t=e.toString(16);e<=65535&&(t=C.substr(0,C.length-t.length)+t);let n=JSON.stringify(function(e){return(e<0||e>k)&&I(`invalid unicode code point ${e}`),e<65536?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+A,e%N+56320))}(e));return`U+${t} '${n=n.substr(1,n.length-2)}'`}function B(e){return 65<=e&&e<=125251&&(65<=e&&e<=90||97<=e&&e<=122||181==e||192<=e&&e<=214||216<=e&&e<=246||248<=e&&e<=442||444<=e&&e<=447||452==e||454<=e&&e<=455||457<=e&&e<=458||460<=e&&e<=497||499<=e&&e<=659||661<=e&&e<=687||880<=e&&e<=883||886<=e&&e<=887||891<=e&&e<=893||895==e||902==e||904<=e&&e<=906||908==e||910<=e&&e<=929||931<=e&&e<=1013||1015<=e&&e<=1153||1162<=e&&e<=1327||1329<=e&&e<=1366||1377<=e&&e<=1415||4256<=e&&e<=4293||4295==e||4301==e||5024<=e&&e<=5109||5112<=e&&e<=5117||7296<=e&&e<=7304||7424<=e&&e<=7467||7531<=e&&e<=7543||7545<=e&&e<=7578||7680<=e&&e<=7957||7960<=e&&e<=7965||7968<=e&&e<=8005||8008<=e&&e<=8013||8016<=e&&e<=8023||8025==e||8027==e||8029==e||8031<=e&&e<=8061||8064<=e&&e<=8071||8080<=e&&e<=8087||8096<=e&&e<=8103||8112<=e&&e<=8116||8118<=e&&e<=8123||8126==e||8130<=e&&e<=8132||8134<=e&&e<=8139||8144<=e&&e<=8147||8150<=e&&e<=8155||8160<=e&&e<=8172||8178<=e&&e<=8180||8182<=e&&e<=8187||8450==e||8455==e||8458<=e&&e<=8467||8469==e||8473<=e&&e<=8477||8484==e||8486==e||8488==e||8490<=e&&e<=8493||8495<=e&&e<=8500||8505==e||8508<=e&&e<=8511||8517<=e&&e<=8521||8526==e||8579<=e&&e<=8580||11264<=e&&e<=11310||11312<=e&&e<=11358||11360<=e&&e<=11387||11390<=e&&e<=11492||11499<=e&&e<=11502||11506<=e&&e<=11507||11520<=e&&e<=11557||11559==e||11565==e||42560<=e&&e<=42605||42624<=e&&e<=42651||42786<=e&&e<=42863||42865<=e&&e<=42887||42891<=e&&e<=42894||42896<=e&&e<=42926||42928<=e&&e<=42935||43002==e||43824<=e&&e<=43866||43872<=e&&e<=43877||43888<=e&&e<=43967||64256<=e&&e<=64262||64275<=e&&e<=64279||65313<=e&&e<=65338||65345<=e&&e<=65370||66560<=e&&e<=66639||66736<=e&&e<=66771||66776<=e&&e<=66811||68736<=e&&e<=68786||68800<=e&&e<=68850||71840<=e&&e<=71903||119808<=e&&e<=119892||119894<=e&&e<=119964||119966<=e&&e<=119967||119970==e||119973<=e&&e<=119974||119977<=e&&e<=119980||119982<=e&&e<=119993||119995==e||119997<=e&&e<=120003||120005<=e&&e<=120069||120071<=e&&e<=120074||120077<=e&&e<=120084||120086<=e&&e<=120092||120094<=e&&e<=120121||120123<=e&&e<=120126||120128<=e&&e<=120132||120134==e||120138<=e&&e<=120144||120146<=e&&e<=120485||120488<=e&&e<=120512||120514<=e&&e<=120538||120540<=e&&e<=120570||120572<=e&&e<=120596||120598<=e&&e<=120628||120630<=e&&e<=120654||120656<=e&&e<=120686||120688<=e&&e<=120712||120714<=e&&e<=120744||120746<=e&&e<=120770||120772<=e&&e<=120779||125184<=e&&e<=125251)}function M(e){return 48<=e&&e<=125273&&(48<=e&&e<=57||1632<=e&&e<=1641||1776<=e&&e<=1785||1984<=e&&e<=1993||2406<=e&&e<=2415||2534<=e&&e<=2543||2662<=e&&e<=2671||2790<=e&&e<=2799||2918<=e&&e<=2927||3046<=e&&e<=3055||3174<=e&&e<=3183||3302<=e&&e<=3311||3430<=e&&e<=3439||3558<=e&&e<=3567||3664<=e&&e<=3673||3792<=e&&e<=3801||3872<=e&&e<=3881||4160<=e&&e<=4169||4240<=e&&e<=4249||6112<=e&&e<=6121||6160<=e&&e<=6169||6470<=e&&e<=6479||6608<=e&&e<=6617||6784<=e&&e<=6793||6800<=e&&e<=6809||6992<=e&&e<=7001||7088<=e&&e<=7097||7232<=e&&e<=7241||7248<=e&&e<=7257||42528<=e&&e<=42537||43216<=e&&e<=43225||43264<=e&&e<=43273||43472<=e&&e<=43481||43504<=e&&e<=43513||43600<=e&&e<=43609||44016<=e&&e<=44025||65296<=e&&e<=65305||66720<=e&&e<=66729||69734<=e&&e<=69743||69872<=e&&e<=69881||69942<=e&&e<=69951||70096<=e&&e<=70105||70384<=e&&e<=70393||70736<=e&&e<=70745||70864<=e&&e<=70873||71248<=e&&e<=71257||71360<=e&&e<=71369||71472<=e&&e<=71481||71904<=e&&e<=71913||72784<=e&&e<=72793||73040<=e&&e<=73049||92768<=e&&e<=92777||93008<=e&&e<=93017||120782<=e&&e<=120831||125264<=e&&e<=125273)}function D(e){return 8986<=e&&e<=129510&&(8986<=e&&e<=8987||9193<=e&&e<=9196||9200==e||9203==e||9725<=e&&e<=9726||9748<=e&&e<=9749||9800<=e&&e<=9811||9855==e||9875==e||9889==e||9898<=e&&e<=9899||9917<=e&&e<=9918||9924<=e&&e<=9925||9934==e||9940==e||9962==e||9970<=e&&e<=9971||9973==e||9978==e||9981==e||9989==e||9994<=e&&e<=9995||10024==e||10060==e||10062==e||10067<=e&&e<=10069||10071==e||10133<=e&&e<=10135||10160==e||10175==e||11035<=e&&e<=11036||11088==e||11093==e||126980==e||127183==e||127374==e||127377<=e&&e<=127386||127462<=e&&e<=127487||127489==e||127514==e||127535==e||127538<=e&&e<=127542||127544<=e&&e<=127546||127568<=e&&e<=127569||127744<=e&&e<=127776||127789<=e&&e<=127797||127799<=e&&e<=127868||127870<=e&&e<=127891||127904<=e&&e<=127940||127941==e||127942<=e&&e<=127946||127951<=e&&e<=127955||127968<=e&&e<=127984||127988==e||127992<=e&&e<=128062||128064==e||128066<=e&&e<=128247||128248==e||128249<=e&&e<=128252||128255==e||128256<=e&&e<=128317||128331<=e&&e<=128334||128336<=e&&e<=128359||128378==e||128405<=e&&e<=128406||128420==e||128507<=e&&e<=128511||128512==e||128513<=e&&e<=128528||128529==e||128530<=e&&e<=128532||128533==e||128534==e||128535==e||128536==e||128537==e||128538==e||128539==e||128540<=e&&e<=128542||128543==e||128544<=e&&e<=128555||128556==e||128557==e||128558<=e&&e<=128563||128564==e||128565<=e&&e<=128591||128640<=e&&e<=128709||128716==e||128720==e||128721<=e&&e<=128722||128747<=e&&e<=128748||128756<=e&&e<=128760||129296<=e&&e<=129310||129311==e||129312<=e&&e<=129327||129328==e||129329<=e&&e<=129338||129340<=e&&e<=129342||129344<=e&&e<=129349||129351<=e&&e<=129355||129356==e||129360<=e&&e<=129387||129408<=e&&e<=129431||129472==e||129488<=e&&e<=129510)}function G(e){return 9757<=e&&e<=129501&&(9757==e||9977==e||9994<=e&&e<=9997||127877==e||127938<=e&&e<=127940||127943==e||127946==e||127947<=e&&e<=127948||128066<=e&&e<=128067||128070<=e&&e<=128080||128102<=e&&e<=128105||128110==e||128112<=e&&e<=128120||128124==e||128129<=e&&e<=128131||128133<=e&&e<=128135||128170==e||128372<=e&&e<=128373||128378==e||128400==e||128405<=e&&e<=128406||128581<=e&&e<=128583||128587<=e&&e<=128591||128675==e||128692<=e&&e<=128694||128704==e||128716==e||129304==e||129305<=e&&e<=129308||129310==e||129311==e||129318==e||129328==e||129329<=e&&e<=129337||129341<=e&&e<=129342||129489<=e&&e<=129501)}function P(e){return 127995<=e&&e<=127999}const $="undefined"!=typeof process&&process.env.TERM||"",q=$&&["xterm","screen","vt100"].some(e=>-1!=$.indexOf(e))?-1!=$.indexOf("256color")?256:16:0,z=e=>e,V={clear:"",bold:z,italic:z,underline:z,inverse:z,white:z,grey:z,black:z,blue:z,cyan:z,green:z,magenta:z,purple:z,pink:z,red:z,yellow:z,lightyellow:z,orange:z},Y=q<256?(e,t,n)=>(e="["+e+"m",n="["+n+"m",t=>e+t+n):(e,t,n)=>(t="["+t+"m",n="["+n+"m",e=>t+e+n),W=0==q?V:{clear:"e[0m",bold:Y("1","1","22"),italic:Y("3","3","23"),underline:Y("4","4","24"),inverse:Y("7","7","27"),white:Y("37","38;2;255;255;255","39"),grey:Y("90","38;5;244","39"),black:Y("30","38;5;16","39"),blue:Y("34","38;5;75","39"),cyan:Y("36","38;5;87","39"),green:Y("32","38;5;84","39"),magenta:Y("35","38;5;213","39"),purple:Y("35","38;5;141","39"),pink:Y("35","38;5;211","39"),red:Y("31","38;2;255;110;80","39"),yellow:Y("33","38;5;227","39"),lightyellow:Y("93","38;5;229","39"),orange:Y("33","38;5;215","39")};function H(e){return q&&e.isTTY?W:V}const Z="undefined"!=typeof process&&H(process.stdout)||V,j=("undefined"!=typeof process&&H(process.stderr),Z!==V);class ErrorReporter{constructor(e,t=null){this.defaultErrCode=e,this.errh=t,this.errorCount=0}errorAt(e,t,n){if(this.errh&&this.errh(t,e,n||this.defaultErrCode),this.errorCount++,S&&this.errh){let e=new Error,t=0,n="                              ";const r=q?W:V;let s=(e.stack||"").split("\n").slice(2).map(e=>{let n=/\s+at\s+([^\s]+)\s+\((.+)\)/.exec(e);if(!n)return[e,null];let r=n[2].lastIndexOf("/src/");return-1!=r&&(n[2]=n[2].substr(r+1)),t=Math.max(n[1].length,t),[n[1],n[2]]});console.error(s.map(e=>{if(!e[1])return r.italic(String(e[0]));let s=e[0];return r.grey("  "+s+n.substr(0,t-s.length)+"  "+e[1])}).join("\n"))}}}const X=47,Q=46;class lazybuf{constructor(e){this.s=e,this.buf=null,this.w=0}index(e){return null!==this.buf?this.buf.charCodeAt(e):this.s.charCodeAt(e)}append(e){if(null===this.buf){if(this.w<this.s.length&&this.s.charCodeAt(this.w)==e)return void this.w++;this.buf=this.s.substr(0,this.w)}this.w<this.buf.length-1&&(this.buf=this.buf.substr(0,this.w)),this.buf+=String.fromCharCode(e),this.w++}toString(){return null===this.buf?this.s.substr(0,this.w):this.buf.substr(0,this.w)}}function K(e){if(""==e)return".";const t=e.charCodeAt(0)==X,n=e.length;let r=new lazybuf(e),s=0,i=0;for(t&&(r.append(X),s=1,i=1);s<n;){const o=e.charCodeAt(s);if(o==X)s++;else if(o!=Q||s+1!=n&&e.charCodeAt(s+1)!=X)if(o!=Q||e.charCodeAt(s+1)!=Q||s+2!=n&&e.charCodeAt(s+2)!=X){let i;for((t&&1!=r.w||!t&&0!=r.w)&&r.append(X);s<n&&(i=e.charCodeAt(s))!=X;s++)r.append(i)}else if(s+=2,r.w>i)for(r.w--;r.w>i&&r.index(r.w)!=X;)r.w--;else t||(r.w>0&&r.append(X),r.append(Q),r.append(Q),i=r.w);else s++}return 0==r.w?".":r.toString()}function J(e,t,n,r){var s,i,o,a,l;for(s=Math.floor(Number.MAX_SAFE_INTEGER/t),i=Number.MAX_SAFE_INTEGER%t,o=0,a=n,l=0;a<r;){if((l=e[a])>=48&&l<=57)l-=48;else if(l>=65&&l<=90)l-=55;else{if(!(l>=97&&l<=122))return-1;l-=87}if(l>=t)return-1;if(o>s||o==s&&l>i)return-1;o=o*t+l,a++}return o}try{s=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,19,3,96,0,1,127,96,2,127,127,1,127,96,4,127,127,127,127,1,127,3,8,7,0,1,2,2,2,2,2,6,6,1,127,1,65,0,11,7,59,7,8,103,101,116,95,104,105,103,104,0,0,3,109,117,108,0,2,5,100,105,118,95,115,0,3,5,100,105,118,95,117,0,4,5,114,101,109,95,115,0,5,5,114,101,109,95,117,0,6,6,112,111,112,99,110,116,0,1,10,218,1,7,4,0,35,0,11,16,1,1,126,32,0,173,32,1,173,66,32,134,132,123,167,11,38,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,33,4,32,4,66,32,135,167,36,0,32,4,167,11,38,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,33,4,32,4,66,32,135,167,36,0,32,4,167,11,38,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,33,4,32,4,66,32,135,167,36,0,32,4,167,11,38,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,33,4,32,4,66,32,135,167,36,0,32,4,167,11,38,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,33,4,32,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){s=null}const ee=4294967296,te=ee*ee,ne=te/2;class Int64Base{constructor(e,t){this._low=0|e,this._high=0|t}eq(e){return(this.constructor===e.constructor||this._high>>>31!=1||e._high>>>31!=1)&&this._high==e._high&&this._low==e._low}neq(e){return this._high!=e._high||this._low!=e._low}eqz(){return 0==this._high&&0==this._low}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}not(){return new this.constructor(~this._low,~this._high)}mod(e){return this.sub(this.div(e).mul(e))}and(e){return new this.constructor(this._low&e._low,this._high&e._high)}or(e){return new this.constructor(this._low|e._low,this._high|e._high)}xor(e){return new this.constructor(this._low^e._low,this._high^e._high)}shl(e){if(0==(e&=63))return this;let t=this._low;return e<32?new this.constructor(t<<e,this._high<<e|t>>>32-e):new this.constructor(0,t<<e-32)}shr_s(e){if(0==(e&=63))return this;let t=this._high;return e<32?new this.constructor(this._low>>>e|t<<32-e,t>>e):new this.constructor(t>>e-32,t>=0?0:-1)}shr_u(e){if(0==(e&=63))return this;let t=this._high;return e<32?new this.constructor(this._low>>>e|t<<32-e,t>>>e):32===e?new this.constructor(t,0):new this.constructor(t>>>e-32,0)}add(e){let t=this._high>>>16,n=65535&this._high,r=this._low>>>16,s=65535&this._low,i=e._high>>>16,o=65535&e._high,a=e._low>>>16,l=0,c=0,u=0,p=0;return u+=(p+=s+(65535&e._low))>>>16,p&=65535,c+=(u+=r+a)>>>16,u&=65535,l+=(c+=n+o)>>>16,c&=65535,l+=t+i,l&=65535,new this.constructor(u<<16|p,l<<16|c)}sub(e){return this.add(e.neg())}mul(e){let t=this,n=t.constructor;if(t.eqz()||e.eqz())return n.ZERO;if(t.eq(n.MIN))return e.isOdd()?n.MIN:n.ZERO;if(e.eq(n.MIN))return t.isOdd()?n.MIN:n.ZERO;if(t.isNeg())return e.isNeg()?t.neg().mul(e.neg()):t.neg().mul(e).neg();if(e.isNeg())return t.mul(e.neg()).neg();if(t.lt(le)&&e.lt(le))return SInt64.fromFloat64(t.toFloat64()*e.toFloat64());let r=t._high>>>16,s=65535&t._high,i=t._low>>>16,o=65535&t._low,a=e._high>>>16,l=65535&e._high,c=e._low>>>16,u=65535&e._low,p=0,h=0,f=0,g=0;return f+=(g+=o*u)>>>16,h+=(f+=i*u)>>>16,f&=65535,h+=(f+=o*c)>>>16,p+=(h+=s*u)>>>16,h&=65535,p+=(h+=i*c)>>>16,h&=65535,p+=(h+=o*l)>>>16,p+=r*u+s*c+i*l+o*a,new n((f&=65535)<<16|(g&=65535),(p&=65535)<<16|(h&=65535))}popcnt(){return re(this._low)+re(this._high)}isOdd(){return 1==(1&this._low)}isZero(){return 0==this._low&&0==this._high}toUInt32(){return this._low>=0?this._low:ee+this._low}toBytesLE(){let e=new Uint8Array(8),t=0;return e[t]=255&this._low,e[++t]=this._low>>>8&255,e[++t]=this._low>>>16&255,e[++t]=this._low>>>24,e[++t]=255&this._high,e[++t]=this._high>>>8&255,e[++t]=this._high>>>16&255,e[++t]=this._high>>>24,e}toBytesBE(){let e=new Uint8Array(8),t=0;return e[t]=this._high>>>24,e[++t]=this._high>>>16&255,e[++t]=this._high>>>8&255,e[++t]=255&this._high,e[++t]=this._low>>>24,e[++t]=this._low>>>16&255,e[++t]=this._low>>>8&255,e[++t]=255&this._low,e}}function re(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>24}function se(e,t,n,r){if(0==n.length)throw new Error("empty string");if(r){if(r<2||36<r)throw new Error("radix out of range")}else r=10;if(45==n.charCodeAt(0))return se(e,t,n.substr(1),r).neg();let s=UInt64.fromFloat64(Math.pow(r,8)),i=t;for(let t=0;t<n.length;t+=8){let o=Math.min(8,n.length-t),a=parseInt(n.substring(t,t+o),r);if(o<8){let t=e.fromFloat64(Math.pow(r,o));i=i.mul(t).add(e.fromFloat64(a))}else i=(i=i.mul(s)).add(e.fromFloat64(a))}return i}function ie(e,t,n,r,s,i){let o=e.fromFloat64(Math.pow(r,8)),a=t;for(let t=s;t<i;t+=8){let s=Math.min(8,i-t),l=J(n,r,t,t+s);if(s<8){let t=e.fromFloat64(Math.pow(r,s));a=a.mul(t).add(e.fromFloat64(l))}else a=(a=a.mul(o)).add(e.fromFloat64(l))}return a}function oe(e,t,n,r){if(0==n.length)throw new Error("empty byte array");if(r){if(r<2||36<r)throw new Error("radix out of range")}else r=10;return 45==n[0]?ie(e,t,n,r,1,n.length).neg():ie(e,t,n,r,0,n.length)}function ae(e,t){if(t){if(t<2||36<t)throw new Error("radix out of range")}else t=10;if(e.eqz())return"0";let n=UInt64.fromFloat64(Math.pow(t,6)),r=e,s="";for(;;){let e=r.div(n),i=(r.sub(e.mul(n)).toInt32()>>>0).toString(t);if((r=e).eqz())return i+s;for(;i.length<6;)i="0"+i;s=""+i+s}}class SInt64 extends Int64Base{constructor(){super(...arguments),this.isSigned=!0}static fromInt32(e){let t=0|e;if(-128<=t&&t<128){let e=me.get(t);return e||(e=new SInt64(t,t<0?-1:0),me.set(t,e)),e}return new SInt64(t,t<0?-1:0)}static fromFloat64(e){return isNaN(e)?pe:e<=-ne?ue:e+1>=ne?ce:e<0?this.fromFloat64(-e).neg():new SInt64(e%ee|0,e/ee|0)}static maybeFromFloat64(e){return isNaN(e)||e<-ne||e+1>ne?null:e==-ne?ue:e+1==ne?ce:e<0?1+(e=-e)>=ne?null:new SInt64(e%ee|0,e/ee|0).neg():new SInt64(e%ee|0,e/ee|0)}static fromStr(e,t){return se(this,pe,e,t)}static fromByteStr0(e,t,n,r){return ie(this,pe,e,t,n,r)}static fromByteStr(e,t){return oe(this,pe,e,t)}static fromBytesLE(e){return new this(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}static fromBytesBE(e){return new this(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3])}isNeg(){return this._high<0}isPos(){return this._high>=0}cmp(e){if(this.eq(e))return 0;let t=this.isNeg(),n=e.isNeg();return t&&!n?-1:!t&&n?1:this.sub(e).isNeg()?-1:1}neg(){return this.eq(ue)?ue:this.not().add(he)}div(e){if(e.eqz())throw new Error("division by zero");if(this.eqz())return pe;if(this.eq(ue)){if(e.eq(he)||e.eq(fe))return ue;if(e.eq(ue))return he;let t=this.shr_s(1).div(e).shl(1);if(t.eq(pe))return e.isNeg()?he:fe;let n=this.sub(e.mul(t));return t.add(n.div(e))}if(e.eq(ue))return pe;if(this.isNeg())return e.isNeg()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNeg())return this.div(e.neg()).neg();let t=pe,n=this;for(;n.gte(e);){let r=Math.max(1,Math.floor(n.toFloat64()/e.toFloat64())),s=Math.ceil(Math.log(r)/Math.LN2),i=s<=48?1:Math.pow(2,s-48),o=SInt64.fromFloat64(r),a=o.mul(e);for(;a.isNeg()||a.gt(n);)r-=i,a=(o=SInt64.fromFloat64(r)).mul(e);o.eqz()&&(o=he),t=t.add(o),n=n.sub(a)}return t}shr(e){return this.shr_s(e)}toSigned(){return this}toUnsigned(){return new UInt64(this._low,this._high)}toInt32(){return this._low}toFloat64(){return this._high*ee+(this._low>>>0)}toString(e){if(this.isNeg()){if(e||(e=10),this.eq(ue)){let t=SInt64.fromFloat64(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt32().toString(e)}return"-"+ae(this.neg(),e)}return ae(this,e)}}class UInt64 extends Int64Base{constructor(){super(...arguments),this.isSigned=!1}static fromInt32(e){let t=e>>>0;if(0<=e&&e<256){let e=ye.get(t);return e||ye.set(t,e=new UInt64(t,0)),e}return new UInt64(0|t,e<0?-1:0)}static fromFloat64(e){return e<=0||isNaN(e)?de:e>=te?ge:new UInt64(e%ee,e/ee)}static maybeFromFloat64(e){return e<0||e>te||isNaN(e)?null:0==e?de:e==te?ge:new UInt64(e%ee,e/ee)}static fromStr(e,t){return se(this,de,e,t)}static fromByteStr0(e,t,n,r){return ie(this,de,e,t,n,r)}static fromByteStr(e,t){return oe(this,de,e,t)}static fromBytesLE(e){return de}static fromBytesBE(e){return de}isNeg(){return!1}isPos(){return!0}cmp(e){return this.eq(e)?0:e.isNeg()?1:e._high>>>0>this._high>>>0||e._high===this._high&&e._low>>>0>this._low>>>0?-1:1}neg(){return this.not().add(he)}div(e){if(e.eqz())throw new Error("division by zero");if(this.eqz())return de;if(e.constructor!==UInt64&&(e=e.toUnsigned()),e.gt(this))return de;if(e.gt(this.shr_u(1)))return Se;let t=de,n=this;for(;n.gte(e);){let r=Math.max(1,Math.floor(n.toFloat64()/e.toFloat64())),s=Math.ceil(Math.log(r)/Math.LN2),i=s<=48?1:Math.pow(2,s-48),o=SInt64.fromFloat64(r),a=o.mul(e);for(;a.isNeg()||a.gt(n);)r-=i,a=(o=UInt64.fromFloat64(r)).mul(e);o.eqz()&&(o=he),t=t.add(o),n=n.sub(a)}return t}shr(e){return this.shr_u(e)}toSigned(){return new SInt64(this._low,this._high)}toUnsigned(){return this}toInt32(){return this._low>>>0}toFloat64(){return(this._high>>>0)*ee+(this._low>>>0)}toString(e){return ae(this,e)}}if(UInt64.fromBytesLE=SInt64.fromBytesLE,UInt64.fromBytesBE=SInt64.fromBytesBE,null!=s){if(S){let e=SInt64.prototype,t=UInt64.prototype;e._js_mul=SInt64.prototype.mul,e._js_div=SInt64.prototype.div,t._js_div=UInt64.prototype.div,e._js_mod=SInt64.prototype.mod,t._js_mod=UInt64.prototype.mod,e._js_popcnt=Int64Base.prototype.popcnt}SInt64.prototype.mul=function(e){let t=s.mul(this._low,this._high,e._low,e._high);return new SInt64(t,s.get_high())},UInt64.prototype.mul=function(e){let t=s.mul(this._low,this._high,e._low,e._high);return new UInt64(t,s.get_high())},SInt64.prototype.div=function(e){if(-2147483648===this._high&&-1===e._low&&-1===e._high)return this;let t=s.div_s(this._low,this._high,e._low,e._high);return new SInt64(t,s.get_high())},UInt64.prototype.div=function(e){let t=s.div_u(this._low,this._high,e._low,e._high);return new UInt64(t,s.get_high())},SInt64.prototype.mod=function(e){let t=s.rem_s(this._low,this._high,e._low,e._high);return new SInt64(t,s.get_high())},UInt64.prototype.mod=function(e){let t=s.rem_u(this._low,this._high,e._low,e._high);return new UInt64(t,s.get_high())},Int64Base.prototype.popcnt=function(){return s.popcnt(this._low,this._high)}}SInt64.prototype.shr=Int64Base.prototype.shr_s,UInt64.prototype.shr=Int64Base.prototype.shr_u;const le=new SInt64(1<<24|0,0),ce=new SInt64(-1,2147483647),ue=new SInt64(0,-2147483648),pe=new SInt64(0,0),he=new SInt64(1,0),fe=new SInt64(-1,-1),ge=new UInt64(-1,-1),de=new UInt64(0,0),Se=new UInt64(1,0);SInt64.MIN=ue,SInt64.MAX=ce,SInt64.ZERO=pe,SInt64.ONE=he,SInt64.ONENEG=fe,UInt64.MIN=de,UInt64.MAX=ge,UInt64.ZERO=de,UInt64.ONE=Se;let me=new Map([[-1,fe],[0,pe],[1,he]]),ye=new Map([[0,de],[1,Se]]);const Ie=["","","1111111111111111111111111111111111111111111111111111111111111111","11112220022122120101211020120210210211220","33333333333333333333333333333333","2214220303114400424121122430","3520522010102100444244423","45012021522523134134601","1777777777777777777777","145808576354216723756","18446744073709551615","335500516a429071284","839365134a2a240713","219505a9511a867b72","8681049adb03db171","2c1d56b648c6cd110","ffffffffffffffff","67979g60f5428010","2d3fgb0b9cg4bd2f","141c8786h1ccaagg","b53bjh07be4dj0f","5e8g4ggg7g56dif","2l4lf104353j8kf","1ddh88h2782i515","l12ee5fn0ji1if","c9c336o0mlb7ef","7b7n2pcniokcgf","4eo8hfam6fllmo","2nc6j26l66rhof","1n3rsh11f098rn","14l9lkmo30o40f","nd075ib45k86f","fvvvvvvvvvvvv","b1w8p7j5q9r6f","7orp63sh4dphh","5g24a25twkwff","3w5e11264sgsf"],Le=4294967295;class IntParser{constructor(){this.int32val=0,this.int64val=null,this._ndigits=0,this._ndigitsChunk=0,this._radix=10,this._signed=!1,this._neg=!1,this._s32cutoff=0}init(e,t,n){this.int32val=0,this.int64val=null,this._ndigits=0,this._ndigitsChunk=0,this._radix=e,this._signed=t,this._neg=n,t?(this._s32cutoff=n?2147483648:2147483647,this.parseval=this.parseval_s32):this.parseval=this.parseval_u32}parsedigit(e){let t=37;if(e>=48&&e<=57?t=e-48:e>=65&&e<=90?t=e-55:e>=97&&e<=122&&(t=e-87),t<=this._radix)return this.parseval(t)}parseval_s32(e){let t=this,n=t.int32val*t._radix+e;n>this._s32cutoff?(t.int64val=SInt64.fromInt32(t.int32val),t.int32val=e,t._ndigits=t._ndigitsChunk,t._ndigitsChunk=1,t.parseval=t.parseval_s64):(t.int32val=n,t._ndigitsChunk++)}parseval_s64(e){let t=this,n=t.int32val*t._radix+e;if(n>this._s32cutoff){let n=UInt64.fromFloat64(Math.pow(t._radix,t._ndigitsChunk));t.int64val=t.int64val.mul(n).add(SInt64.fromFloat64(t.int32val)),t.int32val=e,t._ndigits+=t._ndigitsChunk,t._ndigitsChunk=1,t.parseval=t.parseval_sbig}else t.int32val=n,t._ndigitsChunk++}parseval_u32(e){let t=this,n=t.int32val*t._radix+e;n>Le?(t.int64val=UInt64.fromInt32(t.int32val),t.int32val=e,t._ndigits=t._ndigitsChunk,t._ndigitsChunk=1,t.parseval=t.parseval_u64):(t.int32val=n,t._ndigitsChunk++)}parseval_u64(e){let t=this,n=t.int32val*t._radix+e;if(n>Le){let n=UInt64.fromFloat64(Math.pow(t._radix,t._ndigitsChunk));t.int64val=t.int64val.mul(n).add(UInt64.fromFloat64(t.int32val)),t.int32val=e,t._ndigits+=t._ndigitsChunk,t._ndigitsChunk=1,t.parseval=t.parseval_ubig}else t.int32val=n,t._ndigitsChunk++}parseval_ubig(e){this._ndigitsChunk++}parseval_sbig(e){this._ndigitsChunk++}overflow(){return this.int32val=NaN,this.int64val=null,!1}finalize(){let e=this;if(!e.int64val)return e._neg&&(e.int32val=-e.int32val),!0;e._ndigitsChunk;let t=UInt64.fromFloat64(Math.pow(e._radix,e._ndigitsChunk));if(t._high>=e._radix)return e.overflow();if(e._signed){if(e.parseval===e.parseval_sbig){if(e._ndigitsChunk>1)return e.overflow()}else if(0!=e.int64val._high&&0!=e.int32val)return e.overflow();let n=e.int64val.mul(t).add(SInt64.fromInt32(e.int32val));if(n._high<0&&(!e._neg||0!=n._low||-2147483648!=n._high))return n.lt(SInt64.ZERO),e.overflow();e.int64val=n}else{let n=e._ndigits+e._ndigitsChunk,r=Ie[e._radix];if(e.parseval===e.parseval_ubig&&e._ndigitsChunk>1||n>r.length)return e.overflow();if(n==r.length&&0==e.int64val._high&&r.substr(0,e._ndigits)<(e.int64val._low>>>0).toString(e._radix))return e.overflow();if(e.int64val=e.int64val.mul(t).add(UInt64.fromInt32(e.int32val)),0==e.int64val._high)return e.overflow()}return e.int32val=NaN,e._neg&&(e._signed,e.int64val=e.int64val.neg()),!0}}function ve(e,t){let n=0,r=e;for(;n<r;){const e=n+((r-n)/2>>0);t(e)?r=e:n=e+1}return n}function xe(e){return Uint8Array.from(e,(t,n)=>e.charCodeAt(n))}function Ee(e,t,n=0,r=e.length,s=0,i=t.length){var o,a,l,c;if(e===t)return 0;for(o=n,a=s;o!=r&&a!=i;++o,++a){if(e[o]<t[a])return-1;if(t[a]<e[o])return 1}return(l=r-n)<(c=i-s)?-1:c<l?1:0}i="function"==typeof Buffer?function(e,t,n){return Buffer.from(e.buffer,e.byteOffset+t,n-t).toString("ascii")}:function(e,t,n){return e=t>0&&n<e.length?e.subarray(t,n):e,String.fromCharCode.apply(null,e)};class AppendBuffer{constructor(e){this.length=0,this.buffer=new Uint8Array(e)}reset(){this.length=0}reserve(e){this.length+e>=this.buffer.length&&this._grow(e)}subarray(){return this.buffer.subarray(0,this.length)}append(e){this.length>=this.buffer.length&&this._grow(),this.buffer[this.length++]=e}appendRange(e,t,n){const r=(void 0===n?e.length:n)-t;this.length+r>=this.buffer.length&&this._grow(r),this.buffer.set(e.subarray(t,n),this.length),this.length+=r}_grow(e=8){this.buffer=function(e,t){const n=e.length+t,r=new Uint8Array(n);return r.set(e,0),r}(this.buffer,Math.min(e,this.buffer.length))}}const be=S?function(...e){let t=new Error,n="";if(t.stack){let r=/\s*at\s+(?:[^\s]+\.|)[^\s\.]+\s+\[as ([^\]]+)\]\s+\(.+\/src\/(.+)\)/.exec(t.stack.split(/\n/,3)[2]);if(r||(r=/\s*at\s+(?:[^\s]+\.|)([^\s\.]+)\s+\(.+\/src\/(.+)\)/.exec(t.stack.split(/\n/,3)[2]))&&"dlog"==r[1]&&(r=/\s*at\s+(?:[^\s]+\.|)([^\s\.]+)\s+\(.+\/src\/(.+)\)/.exec(t.stack.split(/\n/,4)[3])),r){const t=r[1],s=r[2];if(s){s.split(".ts:",1)[0];const r=String(e[0]);0==r.indexOf("TODO:")||0==r.indexOf("TODO ")?(n="TODO src/"+s+" "+t+">",e[0]=r.substr(5).replace(/^\s*/,"")):n=t+">"}else n=t+">"}else n="DEBUG>"}e.splice(0,0,n),console.log.apply(console,e)}:function(...e){};!function(e){e[e.None=0]="None",e[e.ScanComments=1]="ScanComments",e[e.CopySource=2]="CopySource"}(o||(o={}));const Re=xe("//!line ");!function(e){e[e.OFF=0]="OFF",e[e.WAIT=1]="WAIT",e[e.CONT=2]="CONT"}(a||(a={}));class Scanner extends ErrorReporter{constructor(){super("E_SYNTAX"),this.sfile=void 0,this.sdata=void 0,this.dir="",this.mode=0,this.ch=-1,this.offset=0,this.rdOffset=0,this.lineOffset=0,this.insertSemi=!1,this.parenL=0,this.interpStrL=0,this.istrOne=a.OFF,this.byteval=null,this.intParser=new IntParser,this.pos=0,this.startoffs=0,this.endoffs=0,this.tok=r.EOF,this.prec=n.LOWEST,this.hash=0,this.int32val=0,this.int64val=null,this.floatval=0,this.appendbuf=null,this.errorCount=0,this._r={c:0,w:0}}init(e,t,n,s=o.None){const i=this;e.size!=t.length&&I(`file size (${e.size}) `+`does not match source size (${t.length})`),i.sfile=e,i.dir=function(e){if(-1==e.indexOf("/"))return".";let t=(e=K(e)).lastIndexOf("/");return-1==t?".":t==e.length-1?e:e.substr(0,t)}(e.name),i.sdata=t,i.errh=n||null,i.mode=s,i.ch=32,i.tok=r.EOF,i.offset=0,i.rdOffset=0,i.lineOffset=0,i.insertSemi=!1,i.errorCount=0,i.parenL=0,i.interpStrL=0,i.byteval=null,i.readchar()}setOffset(e){this.offset=this.rdOffset=e}readchar(){const e=this;e.rdOffset<e.sdata.length?(e.offset=e.rdOffset,10==e.ch&&(e.lineOffset=e.offset,e.sfile.addLine(e.offset)),e._r.w=1,e._r.c=e.sdata[e.rdOffset],e._r.c>=128&&(function(e,t,n){const r=e[t];if(r<w)n.c=isNaN(r)?R:r,n.w=1;else{const s=e.length;if(r>>5==6)n.c=t+2>s?R:(r<<6&2047)+(63&e[++t]),n.w=2;else if(r>>4==14)n.c=t+3>s?R:(r<<12&65535)+(e[++t]<<6&4095)+(63&e[++t]),n.w=3;else{if(r>>3!=30)return!1;n.c=t+4>s?R:(r<<18&2097151)+(e[++t]<<12&262143)+(e[++t]<<6&4095)+(63&e[++t]),n.w=4}}return!0}(e.sdata,e.rdOffset,e._r)?0==e._r.c&&e.errorAtOffs("illegal NUL byte in input",e.offset):e.errorAtOffs("invalid UTF-8 encoding",e.offset)),e.rdOffset+=e._r.w,e.ch=e._r.c):(e.offset=e.sdata.length,10==e.ch&&(e.lineOffset=e.offset,e.sfile.addLine(e.offset)),e.ch=-1)}undobyte(){const e=this;e.ch,e.rdOffset-=1,e.offset-=1,e.endoffs=e.offset}gotchar(e){return this.ch==e&&(this.readchar(),!0)}currentPosition(){const e=this;return e.sfile.position(e.sfile.pos(e.offset))}byteValue(){const e=this,t=-1==e.endoffs?e.offset:e.endoffs;return e.byteval||e.sdata.subarray(e.startoffs,t)}takeByteValue(){const e=this.byteValue();return this.byteval=null,this.mode&o.CopySource?e.slice():e}error(e,t=this.pos,n){this.errorAt(e,this.sfile.position(t),n)}errorAtOffs(e,t,n){const r=this;r.errorAt(e,r.sfile.position(r.sfile.pos(t)),n)}next(){for(;;){const t=this;if(t.istrOne==a.OFF)for(;32==t.ch||9==t.ch||10==t.ch&&!t.insertSemi||13==t.ch;)t.readchar();if(t.pos=t.sfile.pos(t.offset),t.startoffs=t.offset,t.endoffs=-1,t.byteval=null,t.istrOne==a.CONT)return t.istrOne=a.OFF,t.startoffs--,t.tok=t.scanString(),void(t.insertSemi=t.tok!=r.STRING_PIECE);t.istrOne==a.WAIT&&(t.istrOne=a.CONT);let s=t.ch;t.readchar();let i=!1;switch(s){case-1:t.tok=t.insertSemi?r.SEMICOLON:r.EOF;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:t.scanNumber(s,0),i=!0;break;case 10:t.tok=r.SEMICOLON;break;case 34:t.tok=t.scanString(),i=t.tok!=r.STRING_PIECE;break;case 39:t.scanChar(),i=!0;break;case 58:t.gotchar(61)?(t.tok=r.SET_ASSIGN,t.prec=n.LOWEST):t.tok=r.COLON;break;case 46:ke(t.ch)&&t.tok!=r.NAME&&t.tok!=r.RPAREN&&t.tok!=r.RBRACKET?(t.scanFloatNumber(!0,0),i=!0):t.gotchar(46)?t.gotchar(46)?t.tok=r.ELLIPSIS:t.tok=r.PERIODS:t.tok=r.DOT;break;case 64:{t.startoffs++;let e=t.ch;e<w&&Ue[e]&Ne?(t.readchar(),t.scanIdentifier(e)):e>=w&&Ae(e)&&(t.readchar(),t.scanIdentifierU(e,this.startoffs)),t.tok=r.NAMEAT,i=!0;break}case 44:t.tok=r.COMMA;break;case 59:t.tok=r.SEMICOLON;break;case 40:t.interpStrL&&t.parenL++,t.tok=r.LPAREN;break;case 41:t.tok=r.RPAREN,i=!0,t.interpStrL&&(0==t.parenL?(t.interpStrL--,t.tok=t.scanString(),i=t.tok!=r.STRING_PIECE):t.parenL--);break;case 91:t.tok=r.LBRACKET;break;case 93:t.tok=r.RBRACKET,i=!0;break;case 123:t.tok=r.LBRACE;break;case 125:t.tok=r.RBRACE,i=!0;break;case 43:t.prec=n.LOWEST,t.gotchar(61)?t.tok=r.ADD_ASSIGN:t.gotchar(s)?(t.tok=r.INC,i=!0):t.ch>=48&&t.ch<=57?(s=t.ch,t.readchar(),t.scanNumber(s,43),i=!0):t.gotchar(46)?(t.scanFloatNumber(!0,43),i=!0):(t.tok=r.ADD,t.prec=n.ADD);break;case 45:t.prec=n.LOWEST,t.gotchar(62)?t.tok=r.ARROWR:t.gotchar(61)?t.tok=r.SUB_ASSIGN:t.gotchar(s)?(t.tok=r.DEC,i=!0):t.ch>=48&&t.ch<=57?(s=t.ch,t.readchar(),t.scanNumber(s,45),i=!0):t.gotchar(46)?(t.scanFloatNumber(!0,45),i=!0):(t.tok=r.SUB,t.prec=n.ADD);break;case 42:t.gotchar(61)?(t.tok=r.MUL_ASSIGN,t.prec=n.LOWEST):(t.tok=r.MUL,t.prec=n.MUL);break;case 47:if(47==t.ch){if(t.scanLineComment(),!(t.mode&o.ScanComments))continue;i=t.insertSemi}else if(42==t.ch){const e=t.scanGeneralComment();if(!(t.mode&o.ScanComments))continue;if(t.tok=r.COMMENT,e){const n=t.sdata.subarray(t.startoffs,-1==t.endoffs?t.offset:t.endoffs);t.byteval=we(n,13,e)}i=t.insertSemi}else t.gotchar(61)?(t.tok=r.QUO_ASSIGN,t.prec=n.LOWEST):(t.tok=r.QUO,t.prec=n.MUL);break;case 37:t.gotchar(61)?(t.tok=r.REM_ASSIGN,t.prec=n.LOWEST):(t.tok=r.REM,t.prec=n.MUL);break;case 94:t.gotchar(61)?(t.tok=r.XOR_ASSIGN,t.prec=n.LOWEST):(t.tok=r.XOR,t.prec=n.ADD);break;case 60:t.gotchar(45)?(t.tok=r.ARROWL,t.prec=n.LOWEST):t.gotchar(61)?(t.tok=r.LEQ,t.prec=n.CMP):t.gotchar(s)?t.gotchar(61)?(t.tok=r.SHL_ASSIGN,t.prec=n.LOWEST):(t.tok=r.SHL,t.prec=n.MUL):(t.tok=r.LSS,t.prec=n.CMP);break;case 62:t.gotchar(61)?(t.tok=r.GEQ,t.prec=n.CMP):t.gotchar(s)?t.gotchar(61)?(t.tok=r.SHR_ASSIGN,t.prec=n.LOWEST):(t.tok=r.SHR,t.prec=n.MUL):(t.tok=r.GTR,t.prec=n.CMP);break;case 61:t.gotchar(61)?(t.tok=r.EQL,t.prec=n.CMP):(t.tok=r.ASSIGN,t.prec=n.LOWEST);break;case 33:t.gotchar(61)?(t.tok=r.NEQ,t.prec=n.CMP):(t.tok=r.NOT,t.prec=n.LOWEST);break;case 38:t.gotchar(94)?t.gotchar(61)?(t.tok=r.AND_NOT_ASSIGN,t.prec=n.LOWEST):(t.tok=r.AND_NOT,t.prec=n.MUL):t.gotchar(61)?(t.tok=r.AND_ASSIGN,t.prec=n.LOWEST):t.gotchar(s)?(t.tok=r.ANDAND,t.prec=n.ANDAND):(t.tok=r.AND,t.prec=n.MUL);break;case 124:t.gotchar(61)?(t.tok=r.OR_ASSIGN,t.prec=n.LOWEST):t.gotchar(s)?(t.tok=r.OROR,t.prec=n.OROR):(t.tok=r.OR,t.prec=n.ADD);break;default:if(s<w&&Ue[s]&Ne||s>=w&&Ae(s))if(s<w?t.scanIdentifier(s):t.scanIdentifierU(s,this.startoffs),t.offset-t.startoffs>1)switch(t.tok=(e=t.byteValue(),b.get(e)||r.NAME)){case r.NAME:case r.BREAK:case r.CONTINUE:case r.FALLTHROUGH:case r.RETURN:i=!0}else t.tok=r.NAME,i=!0;else t.error(`unexpected character ${F(s)} in input`),t.tok=r.ILLEGAL}return-1==t.endoffs&&(t.endoffs=t.offset),void(t.insertSemi=i)}var e}scanIdentifierU(e,t,n=2166136261){const s=this;let i=e;for(e=s.ch;Te(e)||P(e)||G(e)||8205==e;){if(45==i&&45==e){s.undobyte();break}i=e,s.readchar(),e=s.ch}if(8205==i)return s.error("illegal zero width-joiner character at end of identifer"),void(s.tok=r.ILLEGAL);for(let e=t;e<s.offset;++e)n=16777619*(n^s.sdata[e]);s.hash=n>>>0}scanIdentifier(e){const t=this;let n=16777619*(2166136261^e);for(e=t.ch;Oe(e)||ke(e)||45==e||95==e||36==e;){if(t.readchar(),45==e&&45==t.ch){t.undobyte();break}n=16777619*(n^e),e=t.ch}if(e>=w&&Te(e))return t.scanIdentifierU(e,t.offset,n);t.hash=n>>>0}scanChar(){const e=this;let t=-1;switch(e.tok=r.CHAR,e.int32val=NaN,e.ch){case-1:return e.error("unterminated character literal"),void(e.tok=r.ILLEGAL);case 39:return e.error("empty character literal or unescaped ' in character literal"),e.readchar(),void(e.tok=r.ILLEGAL);case 92:e.readchar(),t=e.scanEscape(39);break;default:(t=e.ch)<32&&(e.error("invalid character literal"),e.tok=r.ILLEGAL,t=-1),e.readchar()}if(39==e.ch)e.readchar(),-1==t?e.tok=r.ILLEGAL:e.int32val=t;else{for(e.tok=r.ILLEGAL;-1!=e.ch;){if(39==e.ch){e.readchar();break}e.readchar()}e.error("invalid character literal")}}resetAppendBuf(){const e=this;return e.appendbuf?e.appendbuf.reset():e.appendbuf=new AppendBuffer(64),e.appendbuf}scanString(){const e=this;let t=null;e.startoffs++;let n=e.startoffs,s=r.STRING;e:for(;;)switch(e.ch){case-1:e.error("string literal not terminated"),t&&(t=null);break e;case 34:t&&t.appendRange(e.sdata,n,e.offset),e.readchar();break e;case 92:{t||(t=e.resetAppendBuf()),n!=e.offset&&t.appendRange(e.sdata,n,e.offset),e.readchar();const r=e.ch,s=e.scanEscape(34);s>=0&&(s>=w&&(117==r||85==r)?(55296<=s&&s<=57344?e.error("illegal: surrogate half in string literal"):s>_&&e.error("escape sequence is invalid Unicode code point"),t.reserve(O),t.length+=(i=t.buffer,o=t.length,(l=s)<w?(i[o]=l,1):l<2048?(i[o]=l>>6|192,i[++o]=63&l|128,2):((l>k||A<=l&&l<=T)&&(l=R),l<65536?(i[o]=l>>12|224,i[++o]=l>>6&63|128,i[++o]=63&l|128,3):(i[o]=l>>18|240,i[++o]=l>>12&63|128,i[++o]=l>>6&63|128,i[++o]=63&l|128,4)))):t.append(s)),n=e.offset;break}case 36:if(e.readchar(),t&&(e.byteval=t.subarray()),e.gotchar(40))e.interpStrL++,e.endoffs=e.offset-2;else{if(34==e.ch){e.error('invalid " in string template — string literals inside string templates need to be enclosed in parenthesis');break}e.endoffs=e.offset-1,e.istrOne=a.WAIT}return r.STRING_PIECE;case 10:s=r.STRING_MULTI,e.readchar();break;default:e.readchar()}var i,o,l;return t?e.byteval=t.subarray():e.endoffs=e.offset-1,s}scanEscape(e){const t=this;let n=0,r=0,s=!1;switch(t.ch){case e:return t.readchar(),e;case 48:return t.readchar(),0;case 97:return t.readchar(),7;case 98:return t.readchar(),8;case 102:return t.readchar(),12;case 110:return t.readchar(),10;case 114:return t.readchar(),13;case 116:return t.readchar(),9;case 118:return t.readchar(),11;case 92:return t.readchar(),92;case 36:return t.readchar(),36;case 120:t.readchar(),n=2,r=16;break;case 117:t.readchar(),n=4,r=16,s=!0;break;case 85:t.readchar(),n=8,r=16,s=!0;break;default:{let e="unknown escape sequence";return t.ch<0&&(e="escape sequence not terminated"),t.error(e),-1}}let i=0;for(;n>0;){let s=48<=(o=t.ch)&&o<=57?o-48:97<=o&&o<=102?o-97+10:65<=o&&o<=70?o-65+10:16;if(s>=r){let n=t.ch==e?"escape sequence incomplete":t.ch<0?"escape sequence not terminated":`illegal character ${F(t.ch)} in escape sequence`;return t.errorAtOffs(n,t.offset),-1}i=i*r+s,t.readchar(),n--}var o,a;return!s||(a=i)>=0&&a<=_?i:(t.errorAtOffs("escape sequence is invalid Unicode code point",t.offset),-1)}scanNumber(e,t){let n=this;if(48==e)switch(n.ch){case 120:case 88:return n.scanHexInt(t);case 111:case 79:return n.tok=r.INT_OCT,n.scanRadixInt8(8,t);case 98:case 66:return n.tok=r.INT_BIN,n.scanRadixInt8(2,t);case 46:case 101:case 69:return n.scanFloatNumber(!1,t)}for(n.intParser.init(10,t>0,45==t),n.intParser.parseval(e-48);n.ch>=48&&n.ch<=57;)n.intParser.parseval(n.ch-48),n.readchar();switch(n.tok=r.INT,n.ch){case 46:case 101:case 69:return n.scanFloatNumber(!1,t)}let s=n.intParser.finalize();n.int32val=n.intParser.int32val,n.int64val=n.intParser.int64val,s||n.error("integer constant too large")}scanHexInt(e){const t=this;t.tok=r.INT_HEX,t.readchar(),t.intParser.init(16,e>0,45==e);let n=0;for(;-1!=(n=(s=t.ch)>=48&&s<=57?s-48:s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:-1);)t.intParser.parseval(n),t.readchar();var s;if(t.offset-t.startoffs<=2||B(t.ch)){for(;B(t.ch)||M(t.ch);)t.readchar();t.error("invalid hex number")}let i=t.intParser.finalize();t.int32val=t.intParser.int32val,t.int64val=t.intParser.int64val,i||t.error("integer constant too large")}scanRadixInt8(e,t){const n=this;n.readchar();let r=!1;for(n.intParser.init(e,t>0,45==t);M(n.ch);)n.ch-48>=e?r=!0:n.intParser.parseval(n.ch-48),n.readchar();r||n.offset-n.startoffs<=2||!n.intParser.finalize()?(n.error(`invalid ${8==e?"octal":"binary"} number`),n.int32val=NaN,n.int64val=null):(n.int32val=n.intParser.int32val,n.int64val=n.intParser.int64val)}scanFloatNumber(e,t){const n=this;if(n.tok=r.FLOAT,e||46==n.ch)for(n.readchar();M(n.ch);)n.readchar();if(101==n.ch||69==n.ch){n.readchar(),45!=n.ch&&43!=n.ch||n.readchar();let e=!1;if(M(n.ch))for(e=!0,n.readchar();M(n.ch);)n.readchar();if(!e)return n.error("invalid floating-point exponent"),void(n.floatval=NaN)}let s;var o;n.byteval?(o=n.byteval,s=String.fromCharCode.apply(null,o)):s=i(n.sdata,n.startoffs,n.offset),n.floatval=parseFloat(s),isNaN(n.floatval)}scanLineComment(){const e=this;do{e.readchar()}while(10!=e.ch&&e.ch>=0);13==e.sdata[e.offset-1]&&(e.endoffs=e.offset-1),e.startoffs==e.lineOffset&&33==e.sdata[e.startoffs+2]&&e.interpretCommentPragma(),e.startoffs+=2,e.tok=r.COMMENT}scanGeneralComment(){const e=this;let t=0;for(;;)switch(e.readchar(),e.ch){case-1:return e.error("comment not terminated"),t;case 47:if(42==e.sdata[e.offset-1])return e.readchar(),e.startoffs+=2,e.endoffs=e.offset-2,t;break;case 13:++t}}findCommentLineEnd(){const e=this,t=e.offset;for(;;){const n=e.ch;switch(e.readchar(),n){case-1:case 10:return!0;case 42:if(47==e.ch)return e.ch=42,e.offset=t,e.rdOffset=e.offset+1,!1}}}interpretCommentPragma(){const e=this,t=e.startoffs;if(e.offset-t>Re.length&&0==Ee(e.sdata,Re,t,t+Re.length)){let n=U(e.sdata.subarray(t+Re.length,e.offset)),r=n.lastIndexOf(":");if(r>0){let t=parseInt(n.substr(r+1));if(!isNaN(t)&&t>0){let s=n.substr(0,r).trim();s&&((s=K(s)).charCodeAt(0)==X||(s=function(...e){for(let t=0;t<e.length;t++)if(""!=e[t])return K((0==t?e:e.slice(t)).join("/"));return""}(e.dir,s))),e.sfile.addLineInfo(e.offset+1,s,t)}}}}findLineEnd(){const e=this;for(;47==e.ch||42==e.ch;){if(47==e.ch)return!0;for(e.readchar();e.ch>=0;){const t=e.ch;if(10==t)return!0;if(e.readchar(),42==t&&47==e.ch){e.readchar();break}}for(;32==e.ch||9==e.ch||10==e.ch&&!e.insertSemi||13==e.ch;)e.readchar();if(e.ch<0||10==e.ch)return!0;if(47!=e.ch)return!1;e.readchar()}return!1}}function we(e,t,n=0){const r=new Uint8Array(e.length-n);let s=0;for(let n=0,i=e.length;n<i;++n){const i=e[n];i!=t&&(r[s++]=i)}return s<r.length?r.subarray(0,s):r}function Oe(e){return 65<=e&&e<=90||97<=e&&e<=122}function ke(e){return 48<=e&&e<=57}function Ae(e){return B(e)||95==e||36==e||D(e)||G(e)}function Te(e){return B(e)||M(e)||45==e||95==e||36==e||D(e)||G(e)}const Ne=2,Ue=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1|Ne,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,0,0,0,0,1|Ne,0,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,1|Ne,0,0,0,0,0]);!function(e){e[e.None=-1]="None",e[e.Ptr=0]="Ptr",e[e.i8=1]="i8",e[e.i16=2]="i16",e[e.i32=4]="i32",e[e.i64=8]="i64",e[e.f32=5]="f32",e[e.f64=9]="f64"}(l||(l={}));class Type{constructor(e=l.None){this.isFloat=!1,this.isInt=!1,this.isSignedInt=!1,this.isUnsignedInt=!1,this.mem=e,this.size=this.mem}accepts(e){return this.equals(e)}equals(e){return this===e}isTuple(){return this instanceof TupleType}}class UnresolvedType extends Type{constructor(e){super(),this.isUnresolved=!0,this.refs=null,this.def=e}addRef(e){this.def,this.refs?this.refs.add(e):this.refs=new Set([e])}toString(){return"~"+String(this.def||"T")}}class NativeType extends Type{}class BasicType extends NativeType{constructor(e,t){super(e),this.name=t}toString(){return this.name}}class NumType extends BasicType{}class FloatType extends NumType{constructor(){super(...arguments),this.isFloat=!0,this.size=this.mem-1}}class IntType extends NumType{constructor(){super(...arguments),this.isInt=!0}}class SIntType extends IntType{constructor(){super(...arguments),this.isSignedInt=!0}}class UIntType extends IntType{constructor(){super(...arguments),this.isUnsignedInt=!0}}const _e=new BasicType(l.Ptr,"nil"),Ce=new UIntType(l.i8,"bool"),Fe=new UIntType(l.i8,"u8"),Be=new SIntType(l.i8,"i8"),Me=new UIntType(l.i16,"u16"),De=new SIntType(l.i16,"i16"),Ge=new UIntType(l.i32,"u32"),Pe=new SIntType(l.i32,"i32"),$e=new UIntType(l.i64,"u64"),qe=new SIntType(l.i64,"i64"),ze=new UIntType(l.Ptr,"uint"),Ve=new SIntType(l.Ptr,"int"),Ye=new UIntType(l.Ptr,"usize"),We=new SIntType(l.Ptr,"isize"),He=new FloatType(l.f32,"f32"),Ze=new FloatType(l.f64,"f64"),je=Fe,Xe=Ge;function Qe(e){switch(e){case 1:return[Be,Fe];case 2:return[De,Me];case 4:return[Pe,Ge];case 8:return[qe,$e]}return I(`invalid integer size ${e}`),[Pe,Ge]}class StrType extends NativeType{constructor(e){super(),this.length=e}toString(){return this.length>-1?`str<${this.length}>`:"str"}equals(e){return this===e||e instanceof StrType&&this.length==e.length}}class RestType extends Type{constructor(e){super(),this.type=e}toString(){return`...${this.type}`}equals(e){return this===e||e instanceof RestType&&this.type.equals(e.type)}}class TupleType extends Type{constructor(e){super(),this.types=e}toString(){return"("+this.types.map(e=>e.toString()).join(", ")+")"}equals(e){return this===e||e instanceof TupleType&&this.types.length==e.types.length&&this.types.every((t,n)=>t.equals(e.types[n]))}isTuple(){return!0}}class FunType extends Type{constructor(e,t){super(),this.args=e,this.result=t}toString(){return`(${this.args.join(", ")}) -> ${this.result}`}equals(e){return this===e||e instanceof FunType&&this.args.length==e.args.length&&this.result.equals(e.result)&&this.args.every((t,n)=>t.equals(e.args[n]))}}class UnionType extends Type{constructor(e){super(),this.types=e}add(e){this.types.add(e)}toString(){let e="(",t=!0;for(let n of this.types)t?t=!1:e+="|",e+=n.toString();return e+")"}equals(e){if(this===e)return!0;if(!(e instanceof UnionType)||e.types.size!=this.types.size)return!1;for(let t of this.types)if(!e.types.has(t))return!1;return!0}accepts(e){if(this===e)return!0;if(!(e instanceof UnionType))return!1;for(let t of e.types)if(!this.types.has(t))return!1;return!0}}class OptionalType extends Type{constructor(e){super()}toString(){return`${this.type}?`}equals(e){return this===e||e instanceof OptionalType&&this.type.equals(e.type)}accepts(e){return this.equals(e)||this.type.equals(e)||e===_e}}const Ke=new StrType(0),Je=new StrType(-1),et=new OptionalType(Je),tt=UInt64.fromInt32(4294967295),nt=SInt64.fromInt32(2147483647),rt=SInt64.fromInt32(-2147483648),st=65535,it=32767,ot=-32768,at=UInt64.fromInt32(st),lt=SInt64.fromInt32(it),ct=SInt64.fromInt32(ot),ut=255,pt=127,ht=-128,ft=UInt64.fromInt32(ut),gt=SInt64.fromInt32(pt),dt=SInt64.fromInt32(ht);function St(e,t){let n=!1;if(t===Ve?t=Pe:t===ze&&(t=Ge),t===qe)if("number"==typeof e)if(e===(0|e)||e===e>>>0)n=!0,e=SInt64.fromFloat64(e);else{let t;Math.ceil(e)==e&&(t=SInt64.maybeFromFloat64(e))?(n=!0,e=t):e=SInt64.fromFloat64(e)}else n=e.lte(SInt64.MAX),e=e.toSigned();else if(t===$e)if("number"==typeof e)if(e===e>>>0)n=!0,e=SInt64.fromInt32(e);else{let t;Math.ceil(e)==e&&(t=UInt64.maybeFromFloat64(e))?(n=!0,e=t):e=UInt64.fromFloat64(e)}else n=e.isPos(),e=e.toUnsigned();else if(t===Pe)if("number"==typeof e){let t=0|e;n=e===t,e=t}else n=e.gte(rt)&&e.lte(nt),e=e.toInt32();else if(t===Ge)if("number"==typeof e){let t=e>>>0;n=e===t,e=t}else n=e.gte(UInt64.ZERO)&&e.lte(tt),e=e.toUInt32();else if(t===De)if("number"==typeof e){let t=0|e;n=e===t&&e>=ot&&e<=it,e=t}else n=e.gte(ct)&&e.lte(lt),e=e.toInt32();else if(t===Me)if("number"==typeof e){let t=e>>>0;n=e===t&&e>=0&&e<=st,e=t}else n=e.gte(UInt64.ZERO)&&e.lte(at),e=e.toInt32();else if(t===Be)if("number"==typeof e){let t=0|e;n=e===t&&e>=ht&&e<=pt,e=t}else n=e.gte(dt)&&e.lte(gt),e=e.toInt32();else if(t===Fe)if("number"==typeof e){let t=e>>>0;n=e===t&&e>=0&&e<=ut,e=t}else n=e.gte(UInt64.ZERO)&&e.lte(ft),e=e.toInt32();else t===Ze?(n=!0,"number"!=typeof e&&(e=e.toFloat64())):t===He&&(n=!0,"number"!=typeof e&&(e=e.toFloat64()));return[e,n]}let mt=0;class Group{constructor(){this.id=mt++}}class Comment{constructor(e,t){this.pos=e,this.value=t}}class Node{constructor(e,t){this.pos=e,this.scope=t}toString(){return this.constructor.name}}class Field extends Node{constructor(e,t,n,r){super(e,t),this.type=n,this.name=r}}class Ent{constructor(e,t,n,r=null,s=null){this.writes=0,this.nreads=0,r||(r=t&&(t instanceof Field||t instanceof VarDecl)&&t.type&&t.type.type||n&&n.type&&n.type||null),this.name=e,this.decl=t,this.value=n,this.data=s,this.type=r}getTypeExpr(){return this.decl&&(this.decl instanceof Field||this.decl instanceof VarDecl)&&this.decl.type||this.value}isConstant(){return 0==this.writes}get scope(){return this.decl.scope}}class Scope{constructor(e,t=null,n=!1){this.outer=e,this.decls=t,this.isFunScope=n,this.fun=null}lookup(e){return this.decls&&this.decls.get(e)||(this.outer?this.outer.lookup(e):null)}lookupImm(e){return this.decls&&this.decls.get(e)||null}declare(e,t,n){const r=new Ent(e,t,n);return this.declareEnt(r)?r:null}declareEnt(e){return this.decls?!this.decls.has(e.name)&&(this.decls.set(e.name,e),!0):(this.decls=new Map([[e.name,e]]),!0)}redeclareEnt(e){if(!this.decls)return this.decls=new Map([[e.name,e]]),null;const t=this.decls.get(e.name);return t===e?null:(this.decls.set(e.name,e),t||null)}funScope(){let e=this;for(;e;){if(e.fun)return e;e=e.outer}return null}level(){let e=0,t=this;for(;t=t.outer;)e++;return e}toString(){const e=this.decls?Array.from(this.decls.keys()):[];return`Scope(level: ${this.level()}, names: (${e.join(", ")}))`}}const yt=new Scope(null);class File{constructor(e,t,n,r,s){this.sfile=e,this.scope=t,this.imports=n,this.decls=r,this.unresolved=s}toString(){return`File("${this.sfile.name}"; ${this.decls.length} decls`+(this.imports?`; ${this.imports.length} imports)`:"")}}class Package{constructor(e,t){this.name=e,this.scope=t,this.files=[]}toString(){return`Package(${this.name})`}}class Stmt extends Node{}class NoOpStmt extends Stmt{}class ReturnStmt extends Stmt{constructor(e,t,n,r){super(e,t),this.result=n,this.type=r}}class WhileStmt extends Stmt{constructor(e,t,n,r){super(e,t),this.cond=n,this.body=r}}class Decl extends Stmt{}class MultiDecl extends Decl{constructor(e,t,n){super(e,t),this.decls=n}}class ImportDecl extends Decl{constructor(e,t,n,r){super(e,t),this.path=n,this.localIdent=r}}class VarDecl extends Decl{constructor(e,t,n,r,s=null,i=null){super(e,t),this.idents=n,this.group=r,this.type=s,this.values=i}}class TypeDecl extends Decl{constructor(e,t,n,r,s,i){super(e,t),this.ident=n,this.alias=r,this.type=s,this.group=i}}class Expr extends Stmt{constructor(){super(...arguments),this.type=null}isIdent(){return this instanceof Ident}}class BadExpr extends Expr{}class TypeExpr extends Expr{constructor(e,t,n){super(e,t),this.type=n}}class BadTypeExpr extends TypeExpr{constructor(e,t){super(e,t,_e)}}class RestTypeExpr extends TypeExpr{constructor(e,t,n,r){super(e,t,r),this.expr=n}}class Ident extends Expr{constructor(e,t,n,r=0){super(e,t),this.value=n,this.ver=r,this.ent=null}toString(){return String(this.value)}incrWrite(){this.ent;let e=this.ent;e.writes++,this.ver=e.writes}refEnt(e){e.decl,e.nreads++,this.ent=e,this.ver=e.writes}unrefEnt(){this.ent,this.ent.nreads--,this.ent=null,this.ver=0}}class Block extends Expr{constructor(e,t,n){super(e,t),this.list=n}}class IfExpr extends Expr{constructor(e,t,n,r,s){super(e,t),this.cond=n,this.then=r,this.els_=s}}class TupleExpr extends Expr{constructor(e,t,n){super(e,t),this.exprs=n}toString(){return`(${this.exprs.map(e=>e.toString()).join(", ")})`}}class SelectorExpr extends Expr{constructor(e,t,n,r){super(e,t),this.lhs=n,this.rhs=r}toString(){return`${this.lhs}.${this.rhs}`}}class IndexExpr extends Expr{constructor(e,t,n,r){super(e,t),this.operand=n,this.indexv=-1,this.indexnum=-1,this._index=r}get index(){return this._index}set index(e){let t=new Error;console.log(">>>> set index\n"+t.stack.split("\n").slice(2).join("\n")),this._index=e}toString(){return`${this.operand}[${this.index}]`}}class SliceExpr extends Expr{constructor(e,t,n,r,s){super(e,t),this.operand=n,this.start=r,this.end=s,this.startnum=-1,this.endnum=-1}toString(){return`${this.operand}[${this.start||""}:${this.end||""}]`}}class LiteralExpr extends Expr{}class NumLit extends LiteralExpr{constructor(e,t,n,r){super(e,t),this.value=n,this.type=r}convertToType(e){let[t,n]=St(this.value,e);return this.type=e,this.value=t,n}}class IntLit extends NumLit{constructor(e,t,n,r,s){super(e,t,n,r),this.kind=s}toString(){switch(this.kind){case r.INT_HEX:return"0x"+this.value.toString(16);case r.INT_OCT:return"0o"+this.value.toString(8);case r.INT_BIN:return"0b"+this.value.toString(2);default:return this.value.toString(10)}}}class CharLit extends NumLit{constructor(e,t,n){super(e,t,n,Xe)}toString(){return"0x"+this.value.toString(16)}}class FloatLit extends NumLit{constructor(e,t,n,r){super(e,t,n,r)}toString(){return this.value.toString()}}class StringLit extends LiteralExpr{constructor(e,t,n,r){super(e,t),this.value=n,this.type=r}toString(){return JSON.stringify(U(this.value))}}class Assignment extends Expr{constructor(e,t,n,r,s){super(e,t),this.op=n,this.lhs=r,this.rhs=s}toString(){return`${this.lhs.join(", ")} ${x(this.op)} ${this.rhs.join(", ")}`}}class Operation extends Expr{constructor(e,t,n,r,s=null){super(e,t),this.op=n,this.x=r,this.y=s}toString(){return`(${r[this.op]} ${this.x}${this.y?" "+this.y:""})`}}class CallExpr extends Expr{constructor(e,t,n,r,s){super(e,t),this.fun=n,this.args=r,this.hasDots=s}}class FunExpr extends Expr{constructor(e,t,n,r,s=!1){super(e,t),this.name=n,this.sig=r,this.isInit=s,this.body=null,t.fun=this}}class FunSig extends Node{constructor(e,t,n,r){super(e,t),this.params=n,this.result=r}}class TypeConvExpr extends Expr{constructor(e,t,n,r){super(e,t),this.expr=n,this.type=r}}class NativeTypeExpr extends TypeExpr{constructor(e){super(0,yt,e)}}class Atom extends Expr{constructor(e,t){super(0,yt),this.name=e,this.type=t}toString(){return this.name}}const It={nil:new NativeTypeExpr(_e),bool:new NativeTypeExpr(Ce),u8:new NativeTypeExpr(Fe),i8:new NativeTypeExpr(Be),u16:new NativeTypeExpr(Me),i16:new NativeTypeExpr(De),u32:new NativeTypeExpr(Ge),i32:new NativeTypeExpr(Pe),u64:new NativeTypeExpr($e),i64:new NativeTypeExpr(qe),uint:new NativeTypeExpr(ze),int:new NativeTypeExpr(Ve),usize:new NativeTypeExpr(Ye),isize:new NativeTypeExpr(We),f32:new NativeTypeExpr(He),f64:new NativeTypeExpr(Ze),byte:new NativeTypeExpr(je),char:new NativeTypeExpr(Xe),str:new NativeTypeExpr(Je)},Lt=new Map;for(let e in It){let t=It[e];Lt.set(t.type,t)}function vt(e){return Lt.get(e)||new TypeExpr(0,yt,e)}const xt={true:new Atom("true",Ce),false:new Atom("false",Ce),nil:new Atom("nil",_e)},Et=new Uint8Array(0),bt=new Uint8Array([95]),Rt=new Uint8Array([46]),wt=new Uint8Array([105,110,105,116]),Ot=[];class funInfo{constructor(e){this.f=e,this.inferredReturnType=null}addInferredReturnType(e){null==this.inferredReturnType?this.inferredReturnType=new UnionType(new Set([e])):this.inferredReturnType.add(e)}}class Parser extends Scanner{constructor(){super(...arguments),this.fnest=0,this.diagh=null,this.initfnest=0,this.importDecl=(e=>{const t=this;let n,s=null,i=!1;switch(t.tok){case r.NAME:s=t.ident(),i=!0;break;case r.DOT:const e=t._id_dot;s=new Ident(t.pos,t.scope,e),t.next()}t.tok==r.STRING?n=t.strlit():(t.syntaxError("missing import path; expecting quoted string"),n=new StringLit(t.pos,t.scope,Et,Ke),t.advanceUntil(r.SEMICOLON,r.RPAREN));const o=new ImportDecl(t.pos,t.scope,n,s);return i&&s&&t.declare(t.filescope,s,o,null),o}),this.typeDecl=((e,t)=>{const n=this,s=n.pos,i=n.ident(),o=n.got(r.ASSIGN);let a=n.maybeType();return a||(a=n.badTypeExpr(),n.syntaxError("in type declaration"),n.advanceUntil(r.SEMICOLON,r.RPAREN)),new TypeDecl(s,n.scope,i,o,a,e)}),this.numLitErrH=((e,t)=>{this.syntaxError(e,t)})}initParser(e,t,n,r,s,i=null,a=null,l=o.None){const c=this;super.init(e,t,i,l),c.scope=new Scope(r),c.filescope=c.scope,c.pkgscope=r||c.filescope,c.fnest=0,c.universe=n,c.strSet=n.strSet,c.comments=null,c.diagh=a,c.initfnest=0,c.unresolved=null,c.funstack=[],c.types=s,c._id__=c.strSet.emplace(bt),c._id_dot=c.strSet.emplace(Rt),c._id_init=c.strSet.emplace(wt),l&o.ScanComments&&(c.next=c.next_comments),c.next()}next_comments(){const e=this;for(super.next();e.tok==r.COMMENT;)e.comments||(e.comments=[]),e.comments.push(new Comment(e.pos,e.takeByteValue())),super.next()}got(e){return this.tok==e&&(this.next(),!0)}want(e){const t=this;t.got(e)||(t.syntaxError(`expecting ${x(e)}`),t.next())}currFun(){return this.funstack.length,this.funstack[0]}pushFun(e){this.funstack.push(new funInfo(e))}popFun(){this.funstack.length,this.funstack.pop()}pushScope(e=null){e&&e.outer,this.scope=e||new Scope(this.scope)}popScope(){const e=this,t=e.scope;if(e.filescope,e.pkgscope,e.scope.outer,e.scope=e.scope.outer,t.decls)for(let[n,r]of t.decls)0==r.nreads&&(r.decl instanceof Field?e.diag("warn",`${n} not used`,r.decl.pos,r.decl.scope.isFunScope?"E_UNUSED_PARAM":"E_UNUSED_FIELD"):e.diag("warn",`${n} declared and not used`,r.decl.pos,"E_UNUSED_VAR"));return t}declare(e,t,n,r){if(t.value===this._id__)return;t.ent;const s=new Ent(t.value,n,r);e.declareEnt(s)||this.syntaxError(`${t} redeclared`,t.pos),t.ent=s}declarev(e,t,n,r){const s=this;for(let i=0;i<t.length;++i)s.declare(e,t[i],n,r&&r[i]||null)}resolve(e,t=!0){const n=this;if(!(e instanceof Ident)||e.value===n._id__)return e;e.ent;let r=e.scope;for(;r;){const t=r.lookupImm(e.value);if(t)return e.refEnt(t),e.type||(e.type=t.type||n.types.markUnresolved(e),e.type instanceof UnresolvedType&&e.type.addRef(e)),e;r=r.outer}return t&&(n.unresolved?n.unresolved.add(e):n.unresolved=new Set([e])),e}ctxType(e){const t=this;if(e){if(e instanceof VarDecl)return e.type&&t.types.maybeResolve(e.type)||null;if(e instanceof Assignment)return e.lhs&&1==e.lhs.length?t.types.maybeResolve(e.lhs[0]):null}return null}parseFile(){const e=this,t=e.parseImports(),n=e.parseFileBody();return new File(e.sfile,e.scope,t,n,e.unresolved)}parseImports(){const e=this;let t=[];for(;e.got(r.IMPORT);)e.appendGroup(t,e.importDecl),e.want(r.SEMICOLON);return t}parseFileBody(){const e=this,t=[];for(;e.tok!=r.EOF;){switch(e.tok){case r.TYPE:e.next(),e.appendGroup(t,e.typeDecl);break;case r.NAME:const s=e.pos,i=e.identList(e.ident());t.push(e.varDecl(s,i));break;case r.FUN:t.push(e.funExpr(null));break;default:e.tok==r.LBRACE&&t.length>0&&(n=t[t.length-1])instanceof FunExpr&&!n.body?e.syntaxError("unexpected semicolon or newline before {"):e.syntaxError("non-declaration statement outside function body"),e.error(`TODO file-level token \`${x(e.tok)}\``),e.next(),e.advanceUntil(r.TYPE,r.FUN);continue}e.tok==r.EOF||e.got(r.SEMICOLON)||(e.syntaxError("after top level declaration"),e.advanceUntil(r.TYPE,r.FUN))}var n;return t}checkDeclLen(e,t,n){return t==e.length||(this.syntaxError(`cannot assign ${t} values to ${e.length} ${n}`,e[0].pos),!1)}varDecl(e,t){const n=this,s=n.maybeType();let i=!1;const o=n.scope===n.filescope?n.pkgscope:n.scope,a=new VarDecl(e,o,t,null,s,null);if(n.got(r.ASSIGN)?(a.values=n.exprList(a),i=!n.checkDeclLen(t,a.values.length,"constants")):s||(n.syntaxError("unexpected identifier",e),i=!0,a.values=[n.bad()],n.advanceUntil(r.SEMICOLON)),i)return a;const l=a.type?n.types.resolve(a.type):null;return n.processAssign(a.idents,a.values,a,l,!0),a}funExpr(e){const t=this,n=t.pos;t.want(r.FUN);const s=t.scope===t.filescope;let i,o=!1;s&&!e?(i=t.ident(),o=t.scope===t.filescope&&i.value.equals(t._id_init)):i=t.maybeIdent();const a=s?t.pkgscope:t.scope;t.pushScope(new Scope(t.scope,null,!0));const l=t.funSig(o?It.nil:null),c=new FunExpr(n,t.scope,i,l,o);if(o?(l.params.length>0&&t.syntaxError("init function with parameters",l.pos),l.result!==It.nil&&t.syntaxError(`init function with result ${l.result}`,l.pos)):(l.result&&t.types.resolve(l.result),i&&!e&&t.declare(a,i,c,c)),!s||o||e||t.tok!=r.SEMICOLON){o&&t.initfnest++,t.pushFun(c),c.body=t.funBody(i);const e=t.currFun();if(t.popFun(),o&&t.initfnest--,t.popScope(),c.body instanceof Block)if(l.result){if(!o&&l.result!==It.nil){let e=c.body.list.length-1,n=c.body.list[e];if(n instanceof Expr){let r=t.types.resolve(n),s=new ReturnStmt(n.pos,n.scope,n,r);c.body.list[e]=s}}}else l.result=It.nil;else l.result||(e.inferredReturnType?1==e.inferredReturnType.types.size?l.result=vt(e.inferredReturnType.types.values().next().value):l.result=vt(e.inferredReturnType):l.result=vt(t.types.resolve(c.body)))}else null===l.result&&(l.result=It.nil),t.popScope();l.result instanceof UnresolvedType&&l.result.addRef(l);const u=t.types.resolve(c);return u.constructor,i&&i.value!==t._id__&&!o&&(i.type=u),c}funSig(e){const t=this,n=t.pos,s=t.tok==r.LPAREN?t.parameters():[],i=t.maybeType()||e;return new FunSig(n,t.scope,s,i)}parameters(){const e=this;e.want(r.LPAREN);let t=0,n=!1;const s=e.pos,i=[],o=e.scope;for(;e.tok!=r.RPAREN;){let s=e.pos,a=null,l=null;if(e.tok==r.NAME)a=e.dotident(null,e.ident());else{const t=e.maybeType();t?a=t:(a=e.badTypeExpr(),e.syntaxError("expecting name or type"))}if(e.tok!=r.COMMA&&e.tok!=r.SEMICOLON&&e.tok!=r.RPAREN)if(a&&(a instanceof Ident?(l=a,t++):e.syntaxError("illegal parameter name",s)),e.got(r.ELLIPSIS)){const t=e.maybeType();if(t){let n=new RestType(e.types.resolve(t));a=new RestTypeExpr(s,o,t,n)}else a=e.badTypeExpr(),e.syntaxError("expecting type after ...");if(n){e.syntaxError("can only use ... with final parameter");continue}n=!0}else a=e.type();if(!e.ocomma(r.RPAREN))break;i.push(new Field(s,o,a,l))}if(e.want(r.RPAREN),0==t)for(let t of i)e.resolve(t.type);else if(t<i.length){let t=!0,n=null,r=_e;for(let a=i.length-1;a>=0;--a){const l=i[a];if(l.name){if(l.type){if(e.resolve(l.type),r=e.types.resolve(l.type),(n=l.type)instanceof RestTypeExpr){const e=n.expr;e.type,n=new TypeExpr(e.pos,e.scope,e.type)}l.name?l.name.type=r:(t=!1,l.name=e.fallbackIdent(n.pos))}}else l.type instanceof Ident?(l.name=l.type,n?(l.type=n,l.name.type=r):(t=!1,l.type=e.badTypeExpr(l.type.pos))):e.syntaxError("illegal parameter name",l.type.pos);if(!t){e.syntaxError("mixed named and unnamed function parameters",s);break}l.name,e.declare(o,l.name,l,null)}}else for(let t of i)t.name,e.resolve(t.type),t.name.type=e.types.resolve(t.type),e.declare(o,t.name,t,null);return i}funBody(e){const t=this;if(t.tok==r.LBRACE)return t.block();if(t.got(r.ARROWR))return t.expr(null);const n=t.pos;return e?t.syntaxError(`${e} is missing function body`,n):t.syntaxError("missing function body",n),t.bad(n)}block(){const e=this,t=e.pos;e.want(r.LBRACE);const n=e.stmtList();return e.want(r.RBRACE),new Block(t,e.scope,n)}multiDecl(e){const t=this,n=t.pos;t.next();const r=[];return t.appendGroup(r,e),new MultiDecl(n,t.scope,r)}stmtList(){const e=this,t=[];for(;e.tok!=r.EOF&&e.tok!=r.RBRACE&&e.tok!=r.DEFAULT;){const n=e.maybeStmt();if(!n)break;t.push(n),e.tok!=r.RPAREN&&e.tok!=r.RBRACE&&(e.got(r.SEMICOLON)||(e.syntaxError("at end of statement"),e.advanceUntil(r.SEMICOLON,r.RBRACE)))}return t}shouldStoreToEnt(e,t){return e.scope===t||e.scope!==this.filescope&&(e.scope===this.pkgscope&&t.fun&&t.fun.isInit||e.scope.funScope()===t.funScope())}processAssign(e,t,n,r,s){const i=this;function o(e,n,r){if(!(n.type instanceof UnresolvedType||e instanceof UnresolvedType)){const s=i.types.convert(e,n);if(s)s!==n&&(t[r]=s);else{if(n.type instanceof UnresolvedType)return;i.error(n.type instanceof UnresolvedType?`cannot convert "${n}" to type ${e}`:`cannot convert "${n}" (type ${n.type}) to type ${e}`,n.pos)}}}for(let a=0;a<e.length;++a){const l=e[a];if(!(l instanceof Ident)){be(`TODO LHS is not an id (type is ${l.constructor.name})`);continue}if(!s&&t&&l.ent&&i.shouldStoreToEnt(l.ent,l.scope)){const e=t[a];l.incrWrite();let n=l.ent.type;if(!n){const e=l.ent.getTypeExpr();n=i.types.resolve(e)}l.type=n,o(n,e,a);continue}l.ent=null;const c=t?t[a]:null;r?(l.type=r,c&&o(r,c,a)):l.type=i.types.resolve(c),i.unresolved&&i.unresolved.delete(l),i.declare(l.scope,l,n,c),l.type instanceof UnresolvedType&&l.type.addRef(l)}}assignment(e,t=null){const n=this;n.want(r.ASSIGN);const s=new Assignment(e[0].pos,n.scope,r.ASSIGN,e,[]);return s.rhs=n.exprList(s),n.processAssign(s.lhs,s.rhs,s,t,!1),n.types.resolve(s),s}simpleStmt(e){const t=this;if(t.tok==r.ASSIGN)return t.assignment(e);if(t.tok==r.NAME&&e.every(e=>e instanceof Ident)){for(let n=0;n<e.length;n++){let r=e[n];r.ent?r.unrefEnt():(t.unresolved,t.unresolved.delete(r))}return t.varDecl(e[0].pos,e)}const n=e[0].pos;if(1!=e.length)return t.syntaxError('expecting "=" or ","'),t.advanceUntil(r.SEMICOLON,r.RBRACE),e[0];let s=t.types.resolve(e[0]);if(r.assignop_beg<t.tok&&t.tok<r.assignop_end){let s=t.tok;switch(t.next(),s){case r.ADD_ASSIGN:s=r.ADD;break;case r.SUB_ASSIGN:s=r.SUB;break;case r.MUL_ASSIGN:s=r.MUL;break;case r.QUO_ASSIGN:s=r.QUO;break;case r.REM_ASSIGN:s=r.REM;break;case r.AND_ASSIGN:s=r.AND;break;case r.OR_ASSIGN:s=r.OR;break;case r.XOR_ASSIGN:s=r.XOR;break;case r.SHL_ASSIGN:s=r.SHL;break;case r.SHR_ASSIGN:s=r.SHR;break;case r.AND_NOT_ASSIGN:s=r.AND_NOT;break;default:r[s]}const i=new Assignment(n,t.scope,s,e,[]);return i.rhs=t.exprList(i),t.types.resolve(i),i}if(t.tok==r.INC||t.tok==r.DEC){const r=t.tok;t.next(),s instanceof IntType||s instanceof UnresolvedType||this.syntaxError(`cannot mutate ${e[0]}`,e[0].pos);let i=new Assignment(n,t.scope,r,e,Ot);return t.types.resolve(i),i}return t.tok==r.ARROWL&&t.syntaxError("TODO simpleStmt ARROWL"),t.tok==r.ARROWR&&t.syntaxError("TODO simpleStmt ARROWR"),e[0]}maybeStmt(){const e=this;switch(e.tok){case r.NAME:case r.NAMEAT:return e.simpleStmt(e.exprList(null));case r.LBRACE:e.pushScope();const t=e.block();return e.popScope(),t;case r.TYPE:return e.multiDecl(e.typeDecl);case r.ADD:case r.SUB:case r.MUL:case r.AND:case r.NOT:case r.XOR:case r.FUN:case r.LPAREN:case r.LBRACKET:case r.INTERFACE:return e.simpleStmt(e.exprList(null));case r.WHILE:return e.whileStmt();case r.IF:return e.ifExpr(null);case r.RETURN:return e.returnStmt();default:if(r.literal_beg<e.tok&&e.tok<r.literal_end)return e.simpleStmt(e.exprList(null))}return null}whileStmt(){const e=this,t=e.pos,n=e.scope;e.want(r.WHILE);const s=e.expr(null);e.types.resolve(s);const i=e.expr(null);return new WhileStmt(t,n,s,i)}ifExpr(e){const t=this;t.pushScope();const n=t.ifExpr2(e);return t.popScope(),n}ifExpr2(e){const t=this,n=t.pos,s=t.scope;t.want(r.IF);const i=t.expr(e);t.types.resolve(i);const o=t.expr(e),a=new IfExpr(n,s,i,o,null);return t.got(r.ELSE)&&(t.tok==r.IF?a.els_=t.ifExpr2(e):(t.pushScope(),a.els_=t.expr(e),t.popScope())),a}returnStmt(){const e=this,t=e.pos;e.want(r.RETURN);const n=e.currFun(),s=n.f.sig.result;!s||s.type;const i=new ReturnStmt(t,e.scope,It.nil,_e);if(e.tok==r.SEMICOLON||e.tok==r.RBRACE)return s!==It.nil&&(null===s&&null==n.inferredReturnType?n.f.sig.result=It.nil:e.syntaxError(`missing return value; expecting ${n.inferredReturnType||s}`)),i;const o=e.exprList(null);let a=1==o.length?o[0]:new TupleExpr(o[0].pos,o[0].scope,o);if(s===It.nil)return e.syntaxError("function does not return a value",a.pos),i;const l=e.types.resolve(a);if(i.result=a,i.type=l,null===s)n.addInferredReturnType(l);else{s.type;const t=s.type;if(!(l instanceof UnresolvedType||l.equals(t))){const n=e.types.convert(t,a);n?(i.result=n,i.type=t):e.syntaxError(a.type instanceof UnresolvedType?`cannot use "${a}" as return type ${s}`:`cannot use "${a}" (type ${a.type}) as return type ${s}`,a.pos)}}return i}exprList(e){const t=this,n=[t.expr(e)];for(;t.got(r.COMMA);)n.push(t.expr(e));return n}expr(e){return this.binaryExpr(n.LOWEST,e)}binaryExpr(e,t){const n=this;let s=n.unaryExpr(t);for(;r.operator_beg<n.tok&&n.tok<r.operator_end&&n.prec>e;){const e=n.pos,r=n.prec,i=n.tok;n.next();let o=n.binaryExpr(r,t);s=new Operation(e,n.scope,i,s,o),n.types.resolve(s)}return s}unaryExpr(e){const t=this,n=t.tok,s=t.pos;switch(n){case r.ADD:case r.SUB:case r.NOT:case r.XOR:{t.next();let i=new Operation(s,t.scope,n,t.unaryExpr(e));return t.types.resolve(i),i.type instanceof IntType||n==r.ADD||n==r.SUB||t.syntaxError(`invalid operation ${x(n)} ${t.types.resolve(i.x)}`),i}}return t.primExpr(e)}primExpr(e){const t=this;let n=t.operand(e);e:for(;;)switch(t.tok){case r.LPAREN:n=t.call(n,e);break;case r.LBRACKET:n=t.bracketExpr(n,e);break;case r.DOT:n=t.selectorExpr(n,e);break;default:break e}return n}call(e,t){const n=this,s=n.pos,i=[];let o=!1;for(n.want(r.LPAREN);n.tok!=r.EOF&&n.tok!=r.RPAREN&&(i.push(n.expr(t)),o=n.got(r.ELLIPSIS),n.ocomma(r.RPAREN)&&!o););return n.want(r.RPAREN),new CallExpr(s,n.scope,e,i,o)}operand(e){const t=this;switch(t.tok){case r.NAME:case r.NAMEAT:return t.dotident(e,t.resolve(t.ident()));case r.LPAREN:return t.parenExpr(e);case r.FUN:return t.funExpr(e);case r.LBRACE:t.pushScope();const n=t.block();return t.popScope(),n;case r.IF:return t.ifExpr(e);case r.STRING:return t.strlit();case r.INT:case r.INT_BIN:case r.INT_OCT:case r.INT_HEX:return t.intLit(e,t.tok);case r.CHAR:return t.charLit(e);case r.FLOAT:return t.floatLit(e);default:{const e=t.bad();return t.syntaxError("expecting expression"),e}}}charLit(e){const t=this;t.int32val;const n=new CharLit(t.pos,t.scope,t.int32val);return t.next(),t.numLitConv(n,t.ctxType(e))}floatLit(e){const t=this;isNaN(t.floatval);const n=new FloatLit(t.pos,t.scope,t.floatval,Ze);return t.next(),t.numLitConv(n,t.ctxType(e))}intLit(e,t){const n=this;let r;if(n.int64val)n.int64val.isSigned||n.int64val.lte(SInt64.MAX)?r=new IntLit(n.pos,n.scope,n.int64val.toSigned(),qe,t):(n.int64val,r=new IntLit(n.pos,n.scope,n.int64val,$e,t));else{const e=n.int32val<=2147483647?Pe:Ge;r=new IntLit(n.pos,n.scope,n.int32val,e,t)}return n.next(),n.numLitConv(r,n.ctxType(e))}numLitConv(e,t){if(t){const n=this;if(t instanceof NumType){if(!e.convertToType(t)){let r=e.type,s=e.value;r instanceof IntType==t instanceof IntType?n.syntaxError(`constant ${s} overflows ${t.name}`,e.pos):n.syntaxError(`constant ${s} truncated to ${t.name}`,e.pos)}}else n.syntaxError(`invalid value ${e.value} for type ${t}`,e.pos)}return e}strlit(){const e=this;e.tok,r.STRING;const t=e.takeByteValue(),n=e.types.getStrType(t.length),s=new StringLit(e.pos,e.scope,t,n);return e.next(),s}selectorExpr(e,t){const n=this;n.want(r.DOT);const s=n.pos;let i;switch(n.tok){case r.NAME:i=n.dotident(t,n.ident());break;case r.INT:case r.INT_BIN:case r.INT_OCT:case r.INT_HEX:let o=new IndexExpr(s,n.scope,e,n.intLit(t,n.tok));return e.type instanceof TupleType?n.types.maybeResolveTupleAccess(o)||(o.type=n.types.markUnresolved(o)):(o.type=n.types.markUnresolved(o),n.syntaxError(`numeric field access on non-tuple type ${e.type}`,s)),o;default:n.syntaxError('expecting name or integer after "."'),i=n.bad(s)}return new SelectorExpr(s,n.scope,e,i)}dotident(e,t){return this.tok==r.DOT?this.selectorExpr(t,e):t}bracketExpr(e,t){const n=this,s=n.pos;n.want(r.LBRACKET);let i=null;if(n.tok!=r.COLON&&(i=n.expr(t)),n.got(r.COLON)){let o=null;n.got(r.RBRACKET)||(o=n.expr(t),n.want(r.RBRACKET));let a=new SliceExpr(s,n.scope,e,i,o);return e.type instanceof TupleType?n.types.tupleSlice(a)||(a.type=n.types.markUnresolved(a)):be(`TODO handle uniform slice operand ${e.type}`),a}n.want(r.RBRACKET);let o=new IndexExpr(s,n.scope,e,i);return e.type instanceof TupleType?(n.types.maybeResolveTupleAccess(o)||(o.type=n.types.markUnresolved(o)),o):(be(`TODO resolve item type for uniform operand of type ${e.type}`),o.type=n.types.markUnresolved(o),o)}parenExpr(e){const t=this,n=t.pos;t.want(r.LPAREN);const s=[];for(;;){if(s.push(t.expr(e)),t.tok==r.ASSIGN){const e=t.assignment(s);return t.want(r.RPAREN),e}if(!t.ocomma(r.RPAREN))break;if(t.tok==r.RPAREN)break}return t.want(r.RPAREN),1==s.length?s[0]:new TupleExpr(n,t.scope,s)}bad(e){return new BadExpr(void 0===e?this.pos:e,this.scope)}badTypeExpr(e){return new BadTypeExpr(void 0===e?this.pos:e,this.scope)}maybeType(){const e=this;switch(e.tok){case r.NAME:const t=e.dotident(null,e.resolve(e.ident()));return new TypeExpr(t.pos,t.scope,e.types.resolve(t));case r.LPAREN:return e.tupleType();case r.LBRACE:return be("TODO: parse struct type def"),null;default:return null}}type(){const e=this;let t=e.maybeType();return t||(t=e.badTypeExpr(),e.syntaxError("expecting type"),e.next(),t)}tupleType(){const e=this;e.want(r.LPAREN);const t=e.pos;let n=null;const s=[];for(;e.tok!=r.RPAREN&&((n=e.type()).type,s.push(n.type),e.ocomma(r.RPAREN)););if(e.want(r.RPAREN),!n)return null;if(1==s.length)return n;const i=e.types.getTupleType(s);return new TypeExpr(t,e.scope,i)}identList(e){const t=this,n=[e];for(;t.got(r.COMMA);)n.push(t.ident());return n}ident(){const e=this,t=e.pos;if(e.tok==r.NAME){const n=e.strSet.emplace(e.takeByteValue(),e.hash);return e.next(),new Ident(t,e.scope,n)}return e.syntaxError("expecting identifier",t),e.advanceUntil(),new Ident(t,e.scope,e._id__)}maybeIdent(){return this.tok==r.NAME?this.ident():null}fallbackIdent(e){const t=this;return new Ident(void 0===e?t.pos:e,t.scope,t._id__)}osemi(e){const t=this;switch(t.tok){case r.SEMICOLON:return t.next(),!0;case r.RPAREN:case r.RBRACE:return!0}return t.syntaxError("expecting semicolon, newline, or "+x(e)),t.advanceUntil(e),!1}ocomma(e){const t=this;switch(t.tok){case r.COMMA:return t.next(),!0;case r.RPAREN:case r.RBRACE:return!0}return t.syntaxError("expecting comma, or "+x(e)),t.advanceUntil(e),!1}appendGroup(e,t){const n=this;let s=0;if(n.got(r.LPAREN)){const i=new Group;for(;n.tok!=r.EOF&&n.tok!=r.RPAREN&&(e.push(t(i,s++)),n.osemi(r.RPAREN)););n.want(r.RPAREN)}else e.push(t(null,s))}advanceUntil(...e){const t=this;if(0!=e.length)if(t.fnest>0)e:for(;!e.includes(t.tok);){switch(t.tok){case r.EOF:case r.BREAK:case r.CONTINUE:case r.DEFER:case r.FALLTHROUGH:case r.FOR:case r.FUN:case r.GO:case r.IF:case r.RETURN:case r.SELECT:case r.SWITCH:case r.TYPE:break e}t.next()}else for(;t.tok!=r.EOF&&!e.includes(t.tok);)t.next();else t.next()}syntaxError(e,t=this.pos){const n=this,s=n.sfile.position(t);if(""==e);else if(e.startsWith("in ")||e.startsWith("at ")||e.startsWith("after "))e=" "+e;else{if(!e.startsWith("expecting "))return void n.errorAt(e,s);e=", "+e}let i=n.tok==r.EOF?"unexpected end of input":`unexpected ${x(n.tok)}`;n.errorAt(i+e,s),S&&console.error(`  p.tok = ${r[n.tok]} ${x(n.tok)}`)}diag(e,t,n=this.pos,r){const s=this;"error"==e?s.error(t,n,r):s.diagh&&s.diagh(s.sfile.position(n),t,e)}}class pkgBinder extends ErrorReporter{constructor(e,t,n,r,s){super("E_RESOLVE",s),this.pkg=e,this.fset=t,this.importer=n,this.types=r,this.errorCount=0,this.imports=new Map,this.undef=null}bind(){const e=this;return Promise.all(e.pkg.files.map(e=>this._resolveImports(e))).then(()=>{if(!(e.errorCount>0)){for(let t of e.pkg.files)e._resolveIdents(t);e._resolveTypes()}})}_resolveImports(e){const t=this;if(!e.imports||0==e.imports.length)return Promise.resolve();const n=[];for(let r of e.imports){if(!t.importer){t.error(`unresolvable import ${r.path}`,r.path.pos);break}const s=U(r.path.value);n.push(t.importer(t.imports,s).then(n=>{t.integrateImport(e,r,n)}).catch(e=>{t.error(`could not import ${s} (${e.message||e})`,r.path.pos)}))}return Promise.all(n).then(()=>{})}integrateImport(e,t,n){let r=t.localIdent?t.localIdent.value:n.name;"."==r.toString()||"_"!=r.toString()&&e.scope.declareEnt(new Ent(r,t,null,null,n.data))}_resolveIdents(e){const t=this;if(e.unresolved)for(let n of e.unresolved){let r=e.scope.lookup(n.value);if(!r){t.error(`${n} undefined`,n.pos),t.undef||(t.undef=new Set),t.undef.add(n);continue}be(`${n} (${r.value&&r.value.constructor.name})`+` at ${t.fset.position(n.pos)}`),n.refEnt(r);let s=n.type;if(s instanceof UnresolvedType&&(r.value,n.type=t.types.resolve(r.value),n.type,be("len(t.refs):",s.refs?s.refs.size:0),s.refs))for(let e of s.refs)e instanceof FunSig||e instanceof FunType?e.result=n.type:e.type=n.type}}_resolveTypes(){const e=this;for(let t of e.types.unresolved){const n=t.def,r=n.type;if(!(r instanceof UnresolvedType))continue;if(e.undef&&n instanceof Ident&&e.undef.has(n))continue;n.type=null;const s=e.types.maybeResolve(n);if(s){if(r.refs)for(let e of r.refs)e instanceof FunSig||e instanceof FunType?e.result=s:e.type=s}else n.type=r,be(`cannot resolve type of ${n} ${e.fset.position(n.pos)}`)}}error(e,t,n){this.errorAt(e,this.fset.position(t),n)}}const kt=0;class Position{constructor(e="",t=0,n=0,r=0){this.filename=e,this.offset=t,this.line=n,this.column=r}isValid(){return this.line>0}toString(){let e=this,t=e.filename;return e.isValid()&&(t&&(t+=":"),t+=`${e.line}:${e.column}`),t||"-"}}const At=new Position;class SrcFile{constructor(e,t,n,r){this.name=e,this.base=t,this.size=n,this.lines=r,this.infos=[]}get lineCount(){return this.lines.length}addLine(e){const t=this,n=t.lines.length;(0===n||t.lines[n-1]<e)&&e<t.size&&t.lines.push(e)}addLineInfo(e,t,n){const r=this,s=r.infos.length;(0==s||r.infos[s-1].offset<e&&e<r.size)&&r.infos.push({offset:e,filename:t,line:n})}pos(e){return e>this.size&&I("illegal file offset"),this.base+e}offset(e){const t=this;return(e<t.base||e>t.base+t.size)&&I("illegal Pos value"),e-t.base}position(e,t=!0){const n=this;return e==kt?At:((e<n.base||e>n.base+n.size)&&I("illegal Pos value"),n._position(e,t))}_position(e,t){const n=this,r=e-n.base;let s=n.name,i=0,o=0,a=Tt(n.lines,r);if(a>=0&&(i=a+1,o=r-n.lines[a]+1),t&&n.infos.length>0){let e=(l=n.infos,c=r,ve(l.length,e=>l[e].offset>c)-1);if(e>=0){const t=n.infos[e];s=t.filename,(e=Tt(n.lines,t.offset))>=0&&(i+=t.line-e-1)}}var l,c;return new Position(s,r,i,o)}}class SrcFileSet{constructor(e=1,t=[],n=null){this.base=e,this.files=t,this.last=n}addFile(e,t,n=-1){const r=this;n<0&&(n=r.base),(n<r.base||t<0)&&I("illegal base or size");const s=new SrcFile(e,n,t,[0]);return(n+=t+1)<0&&I("Pos offset overflow (too much source code in file set)"),r.base=n,r.files.push(s),r.last=s,s}findFile(e){if(e==kt)return null;const t=this;let n=t.last;if(n&&n.base<=e&&e<=n.base+n.size)return n;let r=(s=t.files,i=e,ve(s.length,e=>s[e].base>i)-1);var s,i;return r>=0&&e<=(n=t.files[r]).base+n.size?(t.last=n,n):null}position(e,t=!0){const n=this.findFile(e);return n?n.position(e,t):At}}function Tt(e,t){let n=0,r=e.length;for(;n<r;){const s=n+((r-n)/2>>0);e[s]<=t?n=s+1:r=s}return n-1}let Nt=0;class ByteStr{constructor(e,t){this.hash=e,this.bytes=t,this._id=Nt++}isUnderscore(){return 3658226032==this.hash&&95==this.bytes[0]}toString(){return U(this.bytes)}equals(e){return this.hash==e.hash&&this.bytes.length==e.bytes.length&&0==Ee(this.bytes,e.bytes)}}class ByteStrSet{constructor(){this._m=new Map}emplace(e,t=0){t||(t=Ut(e,0,e.length));let n=this._m.get(t);if(n){for(let t of n)if(t.bytes.length==e.length&&0==Ee(t.bytes,e))return t;const r=new ByteStr(t,e);return n.push(r),r}{const n=new ByteStr(t,e);return this._m.set(t,[n]),n}}}function Ut(e,t,n){for(var r=2166136261,s=t,i=t+n;s<i;)r=16777619*(r^e[s++]);return r>>>0}function _t(e){let t=xe(e);return new ByteStr(Ut(t,0,t.length),t)}class TypeSet{constructor(){this.types=new Map}intern(e){let t=this.types.get(e.constructor);if(t){for(let n of t)if(n.equals(e))return e.constructor,n;t.add(e)}else this.types.set(e.constructor,new Set([e]));return e}}class ReprCtx{constructor(){this.groupIds=new Map,this.nextGroupId=0,this.ind="  ",this.typedepth=0,this.style=q?W:V}groupId(e){let t=e.id||this.groupIds.get(e);return void 0===t&&(t=this.nextGroupId++,this.groupIds.set(e,t)),t.toString(36)}}const Ct=new ReprCtx;function Ft(e,t){let n=Ct;return t&&(n=new ReprCtx,void 0!==t.colors&&(n.style=t.colors?W:V)),e instanceof Package?function(e,t){let n=`(pkg "${e.name.replace(/"/g,'\\"')}"`;if(e.files.length){let r="\n  ";for(let s of e.files)n+=r+Bt(s,r,t);n=n.trimRight()+"\n"}return n+")"}(e,n):e instanceof File?Bt(e,"\n",n):$t(e,"\n",n).trim()}function Bt(e,t,n){let r=`(file "${e.sfile.name.replace(/"/g,'\\"')}"`;if(e.decls.length){let s=t+"  ";for(let t of e.decls)r+=s+$t(t,s,n);r=r.trimRight()+t}return r+")"}function Mt(e,t,n){return n.style.blue(`<${e||"nil"}>`)}function Dt(e,t,n,r="()"){return(r[0]||"")+e.map(e=>$t(e,t,n)).join(" ")+(r[1]||"")}function Gt(e,t){return U(e.value.bytes)}function Pt(e,t){return t.style.grey(e.constructor.name)}function $t(e,n,s,i=0){if(e instanceof Atom)return s.style.purple(s.style.bold(e.name));if(e instanceof NumLit)return Mt(e.type,0,s)+s.style.green(e.value.toString());if(e instanceof StringLit){let t=JSON.stringify(U(e.value));return Mt(e.type,0,s)+s.style.green(t)}if(e instanceof Ident)return(s.typedepth?"":Mt(e.type,0,s))+Gt(e);if(e instanceof RestTypeExpr)return"..."+$t(e.expr,n,s);if(e instanceof TypeExpr)return Mt(e.type,0,s);if(e instanceof BadExpr)return"BAD";if(e instanceof BadTypeExpr)return"BAD_TYPE";if(e instanceof Type)return s.style.blue(e.toString());const o=n+s.ind;if(e instanceof Field){let t=$t(e.type,o,s);return e.name&&(t="("+$t(e.name,o,s)+" "+t+")"),t}if(e instanceof Block)return e.list.length?n+"("+Mt(e.type,0,s)+"block "+e.list.map(e=>o+$t(e,o,s).trim()).join("")+n+")":"(block)";if(e instanceof WhileStmt)return"(while "+$t(e.cond,o,s)+" "+$t(e.body,o,s)+n+")";if(e instanceof ReturnStmt)return e.result?n+`(return ${$t(e.result,o,s)})`:n+Pt(e,s);if(e instanceof IfExpr){let t=(i?"":n+"("+Mt(e.type,0,s))+"if "+$t(e.cond,o,s)+$t(e.then,n,s);return e.els_&&(t+=n+"else "+$t(e.els_,n,s,1)),i?t:t+")"}if(e instanceof FunSig){const t=e.result?e.result.type:_e;return Dt(e.params,o,s)+" -> "+Mt(t,0,s)}if(e instanceof Assignment){let t=n+`(${s.style.grey("assign")} `;return t+=Dt(e.lhs,o,s),e.op==r.ILLEGAL?t+=" = ":t+=" "+x(e.op)+" ",(t+=Dt(e.rhs,o,s))+")"}if(e instanceof MultiDecl)return n+`(${Pt(e,s)}`+" "+Dt(e.decls,o,s,"")+")";if(e instanceof SelectorExpr)return"(SEL "+$t(e.lhs,n,s)+"."+$t(e.rhs,n,s)+")";if(e instanceof IndexExpr)return`(${Mt(e.type,0,s)}index `+$t(e.operand,n,s)+" "+$t(e.index,n,s)+")";if(e instanceof SliceExpr)return`(${Mt(e.type,0,s)}slice `+$t(e.operand,n,s)+" "+(e.start?$t(e.start,n,s):"nil")+" "+(e.end?$t(e.end,n,s):"nil")+")";if(e instanceof Operation){let t="("+(s.typedepth?"":Mt(e.type,0,s))+s.style.orange(r[e.op])+" "+$t(e.x,o,s);return e.y&&(t+=" "+$t(e.y,o,s)),t+")"}let a="(";return e instanceof Expr&&!s.typedepth&&(a+=Mt(e.type,0,s)),e instanceof FunExpr?(a+="fun ",e.isInit?a+="init ":e.name&&(a+=Gt(e.name)+" "),a+=$t(e.sig,n,s),e.body&&(a+=" "+$t(e.body,o,s)),a+")"):(a+=Pt(e,s),e instanceof ImportDecl?(a+=" path: "+$t(e.path,o,s),e.localIdent&&(a+=n+s.ind+"localIdent: "+$t(e.localIdent,o,s)),a+" )"):e instanceof VarDecl?(e.group&&(a+=" [#"+s.groupId(e.group)+"]"),e.type?a+=Mt(e.type.type,0,s)+" "+Dt(e.idents,o,s):a+=" ("+e.idents.map(e=>Mt(e.type,0,s)+Gt(e)).join(" ")+")",e.values&&(a+=" "+Dt(e.values,o,s)),a+")"):e instanceof TypeDecl?(e.group&&(a+=" [#"+s.groupId(e.group)+"]"),a+=" "+$t(e.ident,o,s),e.alias&&(a+=" ="),a+" "+$t(e.type,o,s)+")"):e instanceof CallExpr?(a+=" "+$t(e.fun,n,s)+" (",a+=Dt(e.args,o,s,""),e.hasDots&&(a+="..."),a+"))"):e instanceof TypeConvExpr?a+" "+$t(e.expr,n,s)+")":e instanceof TupleExpr?a+" "+Dt(e.exprs,o,s,"")+")":e.constructor===NoOpStmt?"noop":"(???"+Pt(e,s)+" "+t(e)+")")}class Universe{constructor(e,t){this.strSet=e,this.typeSet=t;const n=new Map;for(let t of Object.keys(It)){const r=It[t],s=e.emplace(xe(t));n.set(s,new Ent(s,r,null,r.type))}for(let t of Object.keys(xt)){const r=xt[t],s=e.emplace(xe(t));n.set(s,new Ent(s,r,r,r.type))}this.scope=new Scope(null,n)}internType(e){return this.typeSet.intern(e)}}!function(e){e[e.NO=0]="NO",e[e.LOSSY=1]="LOSSY",e[e.LOSSLESS=2]="LOSSLESS"}(c||(c={}));const qt=new Map([[$e,new Map([[ze,c.LOSSLESS],[Ve,c.LOSSLESS],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSLESS],[qe,c.LOSSLESS],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[Ge,c.LOSSLESS],[He,c.LOSSY],[Ze,c.LOSSY]])],[qe,new Map([[ze,c.LOSSLESS],[Ve,c.LOSSLESS],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSLESS],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[Ge,c.LOSSLESS],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[Ge,new Map([[ze,c.LOSSLESS],[Ve,c.LOSSLESS],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSLESS],[qe,c.LOSSY],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[Pe,new Map([[ze,c.LOSSY],[Ve,c.LOSSLESS],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[qe,c.LOSSY],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[Ge,c.LOSSY],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[ze,new Map([[Ve,c.LOSSLESS],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSLESS],[qe,c.LOSSY],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[Ge,c.LOSSLESS],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[Ve,new Map([[ze,c.LOSSY],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSLESS],[qe,c.LOSSY],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[Ge,c.LOSSLESS],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[Me,new Map([[ze,c.LOSSY],[Ve,c.LOSSY],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSY],[qe,c.LOSSY],[Fe,c.LOSSLESS],[Ge,c.LOSSY],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[De,new Map([[ze,c.LOSSY],[Ve,c.LOSSY],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[Pe,c.LOSSY],[qe,c.LOSSY],[Fe,c.LOSSLESS],[Me,c.LOSSY],[Ge,c.LOSSY],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[Fe,new Map([[ze,c.LOSSY],[Ve,c.LOSSY],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSY],[Pe,c.LOSSY],[qe,c.LOSSY],[Me,c.LOSSY],[Ge,c.LOSSY],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[Be,new Map([[ze,c.LOSSY],[Ve,c.LOSSY],[Ce,c.LOSSLESS],[De,c.LOSSY],[Pe,c.LOSSY],[qe,c.LOSSY],[Fe,c.LOSSY],[Me,c.LOSSY],[Ge,c.LOSSY],[$e,c.LOSSY],[He,c.LOSSY],[Ze,c.LOSSY]])],[Ce,new Map([[ze,c.LOSSLESS],[Ve,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSLESS],[qe,c.LOSSLESS],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[Ge,c.LOSSLESS],[$e,c.LOSSLESS],[He,c.LOSSLESS],[Ze,c.LOSSLESS]])],[He,new Map([[ze,c.LOSSY],[Ve,c.LOSSY],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSY],[qe,c.LOSSY],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[Ge,c.LOSSY],[$e,c.LOSSY],[Ze,c.LOSSY]])],[Ze,new Map([[ze,c.LOSSLESS],[Ve,c.LOSSLESS],[Ce,c.LOSSLESS],[Be,c.LOSSLESS],[De,c.LOSSLESS],[Pe,c.LOSSLESS],[qe,c.LOSSY],[Fe,c.LOSSLESS],[Me,c.LOSSLESS],[Ge,c.LOSSLESS],[$e,c.LOSSY],[He,c.LOSSLESS]])]]);function zt(e){let t=function e(t){if(t instanceof NumLit)return t.value;if(t instanceof Ident){let n=t.ent;if(n.value,n.value&&(n.isConstant()||1==n.nreads))return e(n.value)}else{if(t instanceof Operation)return function(t){let n=t.type;if(!(n instanceof NumType))return null;let s=e(t.x);if(null===s)return null;if(!t.y)return t.x.type,function(e,t,n){return e.mem==l.i32?e.isSignedInt?function(e,t){switch(t){case r.ADD:return e;case r.SUB:return 0-e|0;case r.XOR:return~e;case r.NOT:return null;default:return r[t],null}}(t,n):function(e,t){switch(t){case r.ADD:return e;case r.SUB:return 0-e>>>0;case r.XOR:return~e;case r.NOT:return null;default:return r[t],null}}(t,n):e.mem==l.i64?function(e,t){switch(t){case r.ADD:return e;case r.SUB:return e.neg();case r.XOR:return e.not();case r.NOT:return null;default:return r[t],null}}(t,n):function(e,t){switch(t){case r.ADD:return e;case r.SUB:return 0-e;default:return r[t],null}}(t,n)}(n,s,t.op);let i=e(t.y);if(null===i)return null;let o=!1;if(t.x.type!==n&&([s,o]=St(s,n),!o))return null;if(t.op==r.SHL||t.op==r.SHR){let e=t.y.type;return e instanceof IntType&&n instanceof IntType?function(e,t,n,s){let i=0;if("number"==typeof n&&n>=0)i=n>>>0;else{let e=!1;if([i,e]=St(n,Ge),!e)return null}return"number"==typeof t?(e.mem==l.i32||e.mem==l.i16||(e.mem,l.i8),s==r.SHL?t<<i:(r.SHR,e.isSignedInt?t>>i:t>>>i)):(e.mem,l.i64,s==r.SHL?t.shl(i):(r.SHR,t.shr(i)))}(n,s,i,t.op):null}return t.y.type===n||([i,o]=St(i,n),o)?function(e,t,n,s){return e.mem==l.i32?e.isSignedInt?function(e,t,n){switch(n){case r.ADD:return e+t|0;case r.SUB:return e-t|0;case r.MUL:return Math.imul(e,t);case r.QUO:return e/t|0;case r.REM:return e%t|0;case r.OR:return e|t;case r.XOR:return e^t;case r.AND:return e&t;case r.AND_NOT:return e&~t;case r.SHL:return e<<t;case r.SHR:return e>>t;default:return r[n],null}}(t,n,s):function(e,t,n){switch(n){case r.ADD:return e+t>>>0;case r.SUB:return e-t>>>0;case r.MUL:return Math.imul(e,t)>>>0;case r.QUO:return e/t>>>0;case r.REM:return e%t>>>0;case r.OR:return e|t;case r.XOR:return e^t;case r.AND:return e&t;case r.AND_NOT:return e&~t;case r.SHL:return e<<t;case r.SHR:return e>>>t;default:return r[n],null}}(t,n,s):e.mem==l.i64?(e.isSignedInt,function(e,t,n){switch(n){case r.ADD:return e.add(t);case r.SUB:return e.sub(t);case r.MUL:return e.mul(t);case r.QUO:return e.div(t);case r.REM:return e.mod(t);case r.OR:return e.or(t);case r.XOR:return e.xor(t);case r.AND:return e.and(t);case r.AND_NOT:return e.and(t.not());case r.SHL:return e.shl(t.toUInt32());case r.SHR:return e.shr(t.toUInt32());default:return r[n],null}}(t,n,s)):function(e,t,n){switch(n){case r.ADD:return e+t;case r.SUB:return e-t;case r.MUL:return e*t;case r.QUO:return e/t;default:return r[n],null}}(t,n,s)}(n,s,i,t.op):null}(t);be(`TODO handle ${t.constructor.name} ${t}`)}return null}(e);if(null===t)return-2;let[n,s]=St(t,Ge);return s?n:-1}function Vt(e){return!!e&&e.constructor!==UnresolvedType}class TypeResolver extends ErrorReporter{constructor(){super("E_RESOLVE"),this.resolvers=new Map,this.maybeResolveNodeWithTypeExpr=(e=>e.type?e.type.type:null),this.maybeResolveIdent=(e=>{const t=this;if(e.ent){if(Vt(e.ent.type))return e.ent.type;const n=e.ent.getTypeExpr();if(n)return t.maybeResolve(n)}return null}),this.maybeResolveBlock=(e=>{if(0==e.list.length)return _e;let t=e.list[e.list.length-1];return t instanceof Expr?this.resolve(t):_e}),this.maybeResolveFunExpr=(e=>{const t=this,n=e.sig;let r=_e;n.result?r=t.resolve(n.result):e.body&&(r=t.resolve(e.body));let s=n.params.map(e=>t.resolve(e.type)),i=t.getFunType(s,r);return i.result instanceof UnresolvedType&&i.result.addRef(i),i}),this.maybeResolveTupleExpr=(e=>this.maybeResolveTupleType(e.exprs)),this.maybeResolveRestTypeExpr=(e=>{let t=this.maybeResolve(e.expr);return Vt(t)?this.getRestType(t):t}),this.maybeResolveCallExpr=(e=>{const t=this,n=t.resolve(e.fun);for(let n of e.args)t.maybeResolve(n);return n instanceof FunType?n.result:null}),this.maybeResolveAssignment=(e=>{return 1==e.lhs.length?this.resolve(e.lhs[0]):this.maybeResolveTupleType(e.lhs)}),this.maybeResolveOperation=(e=>{const t=this,n=t.resolve(e.x);if(!e.y)return n;{const s=t.resolve(e.y);if(e.op>r.cmpop_beg&&e.op<r.cmpop_end)return e.op!=r.ANDAND&&e.op!=r.OROR||(n!==Ce&&(e.x=new TypeConvExpr(e.x.pos,e.x.scope,e.x,Ce)),s!==Ce&&(e.y=new TypeConvExpr(e.y.pos,e.y.scope,e.y,Ce))),Ce;if(n instanceof UnresolvedType||s instanceof UnresolvedType)return null;if(n===s||n.equals(s))return n;let i=t.convert(n,e.y);if(i)return i===e.y?s:t.resolve(i);t.error(`invalid operation (mismatched types ${n} and ${s})`,e.pos)}return null}),this.maybeResolveIndexExpr=(e=>{let t=this.resolve(e.operand);return t instanceof UnresolvedType?be("[index type] deferred to bind stage"):t instanceof TupleType?this.maybeResolveTupleAccess(e):be(`[index type] operand is not a tuple; opt = ${t}`),e.type}),this.maybeResolveIfExpr=(e=>{const t=this;let n=t.resolve(e.then);if(!e.els_)return n instanceof StrType&&0!=n.length?Je:n;let r=t.resolve(e.els_);return r.equals(n)?n:r===_e?n===_e?_e:(n instanceof BasicType&&t.error(`mixing ${n} and optional type`,e.pos,"E_CONV"),t.getOptionalType(n)):n===_e?(r instanceof BasicType&&t.error(`mixing optional and ${r} type`,e.pos,"E_CONV"),t.getOptionalType(r)):r instanceof OptionalType?n instanceof OptionalType?r.type instanceof StrType&&n.type instanceof StrType?(r.type.length,n.type.length,et):t.getOptionalUnionType2(n,r):t.joinOptional(e.pos,r,n):n instanceof OptionalType?t.joinOptional(e.pos,n,r):r instanceof StrType&&n instanceof StrType?Je:r instanceof UnionType?n instanceof OptionalType?t.joinOptional(e.pos,n,r):n instanceof UnionType?t.mergeUnions(n,r):(r.add(n),r):n instanceof UnionType?(n.add(r),n):t.getUnionType2(n,r)}),this.setupResolvers()}init(e,t,n){const r=this;r.errh=n,r.fset=e,r.universe=t,r.unresolved=new Set}error(e,t=kt,n){this.errorAt(e,this.fset.position(t),n)}syntaxError(e,t=kt){this.error(e,t,"E_SYNTAX")}getTupleType(e){return this.universe.internType(new TupleType(e))}getRestType(e){return this.universe.internType(new RestType(e))}getOptionalUnionType2(e,t){return this.universe.internType(new UnionType(new Set([e.type instanceof StrType&&-1!=e.type.length?et:e,t.type instanceof StrType&&-1!=t.type.length?et:t])))}getUnionType2(e,t){return this.universe.internType(new UnionType(new Set([e instanceof StrType&&-1!=e.length?Je:e,t instanceof StrType&&-1!=t.length?Je:t])))}getFunType(e,t){return this.universe.internType(new FunType(e,t))}getOptionalType(e){return e instanceof OptionalType?e:e instanceof StrType?et:this.universe.internType(new OptionalType(e))}getStrType(e){return e<0?Je:0==e?Ke:this.universe.internType(new StrType(e))}resolve(e){if(e.type instanceof Type)return e.type instanceof UnresolvedType&&e.type.addRef(e),e.type;const t=this;let n=t.maybeResolve(e);return n||(n=t.markUnresolved(e),e instanceof SelectorExpr&&e.lhs instanceof Ident&&e.lhs.ent&&t.error(`${e} undefined`,e.pos)),e.type=n,n}setupResolvers(){const e=this;e.resolvers.set(Field,e.maybeResolveNodeWithTypeExpr),e.resolvers.set(VarDecl,e.maybeResolveNodeWithTypeExpr),e.resolvers.set(TypeDecl,e.maybeResolveNodeWithTypeExpr),e.resolvers.set(Ident,e.maybeResolveIdent),e.resolvers.set(Block,e.maybeResolveBlock),e.resolvers.set(FunExpr,e.maybeResolveFunExpr),e.resolvers.set(TupleExpr,e.maybeResolveTupleExpr),e.resolvers.set(RestTypeExpr,e.maybeResolveRestTypeExpr),e.resolvers.set(CallExpr,e.maybeResolveCallExpr),e.resolvers.set(Assignment,e.maybeResolveAssignment),e.resolvers.set(Operation,e.maybeResolveOperation),e.resolvers.set(IndexExpr,e.maybeResolveIndexExpr),e.resolvers.set(IfExpr,e.maybeResolveIfExpr)}maybeResolve(e){if(Vt(e.type))return e.type;const t=this.resolvers.get(e.constructor);return t?e.type=t(e):(be(`TODO handle ${e.constructor.name}`),null)}maybeResolveTupleType(e){const t=this;let n=[];for(const r of e)n.push(t.resolve(r));return t.getTupleType(n)}joinOptional(e,t,n){const r=this;if(t.type.equals(n))return t;if(t.type instanceof StrType&&n instanceof StrType)return t.type.length,n.length,et;if(n instanceof UnionType){let s=new UnionType(new Set([t]));for(let t of n.types)t instanceof OptionalType||(t instanceof BasicType?this.error(`mixing optional and ${t} type`,e,"E_CONV"):t=r.getOptionalType(t)),s.add(t);return s}return n instanceof BasicType?(this.error(`mixing optional and ${n} type`,e,"E_CONV"),n):r.getOptionalType(n)}mergeOptionalUnions(e,t){const n=this;let r=new UnionType(new Set);for(let t of e.types)t instanceof OptionalType||(t=n.getOptionalType(t)),r.add(t);for(let e of t.types)e instanceof OptionalType||(e=n.getOptionalType(e)),r.add(e);return n.universe.internType(r)}mergeUnions(e,t){const n=this;let r=new UnionType(new Set);for(let s of e.types){if(s instanceof OptionalType)return n.mergeOptionalUnions(e,t);r.add(s)}for(let s of t.types){if(s instanceof OptionalType)return n.mergeOptionalUnions(e,t);r.add(s)}return n.universe.internType(r)}resolveIndex(e){let t=this.resolve(e.operand);return t instanceof UnresolvedType?be("[index type] deferred to bind stage"):t instanceof TupleType?this.maybeResolveTupleAccess(e):be(`TODO [index type] operand is not a tuple; opt = ${t}`),e}tupleSlice(e){const t=this;let n=e.operand.type;n.types.length;let r=n.types.length,s=0,i=r;if(e.start){if((s=zt(e.start))<0)return t.syntaxError(`invalid index into type ${n}`,e.start.pos),!1;if(s>=r)return t.outOfBoundsAccess(s,n,e.start.pos),!1}if(e.end){if((i=zt(e.end))<0)return t.syntaxError(`invalid index into type ${n}`,e.end.pos),!1;if(i>=r)return t.outOfBoundsAccess(i,n,e.end.pos),!1}if(s>=i)return s==i?t.syntaxError(`invalid empty slice: ${s} == ${i}`,e.pos):t.syntaxError(`invalid slice index: ${s} > ${i}`,e.pos),!1;let o=i-s;return 1==o?(t.syntaxError(`invalid single-element slice into type ${n}`,e.pos),!1):(e.startnum=s,e.endnum=i,e.type=o==r?n:t.getTupleType(n.types.slice(s,i)),!0)}maybeResolveTupleAccess(e){const t=this;let n=e.operand.type;n.types.length;let r=zt(e.index);if(r<0)return-1==r?t.outOfBoundsAccess(r,n,e.index.pos):t.syntaxError(`invalid index into type ${n}`,e.index.pos),!1;let s=n.types;return r>=s.length?(t.outOfBoundsAccess(r,n,e.index.pos),!1):(e.indexnum=r,e.type=s[r],!0)}outOfBoundsAccess(e,t,n){this.syntaxError(`out-of-bounds index ${e} on type ${t}`,n)}markUnresolved(e){const t=new UnresolvedType(e);return be(`expr ${e} at ${this.fset.position(e.pos)}`),this.unresolved.add(t),t}isConstant(e){return e instanceof LiteralExpr||e instanceof Ident&&null!=e.ent&&e.ent.isConstant()}convert(e,t){const n=this,r=n.resolve(t);if(r===e||r.equals(e))return t;if(n.isConstant(t)&&e instanceof BasicType&&r instanceof BasicType)switch(function(e,t){let n=qt.get(e);return n&&n.get(t)||c.NO}(e,r)){case c.NO:return null;case c.LOSSY:return n.error(`constant ${t} truncated to ${e}`,t.pos,"E_CONV"),new TypeConvExpr(t.pos,t.scope,t,e);case c.LOSSLESS:return new TypeConvExpr(t.pos,t.scope,t,e)}return be(`TODO conversion of ${t} into type ${e}`),null}}!function(e){e[e.None=0]="None",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.Addr=4]="Addr",e[e.ReadWrite=3]="ReadWrite"}(u||(u={})),function(e){e[e.None=0]="None",e[e.Bool=1]="Bool",e[e.Int8=2]="Int8",e[e.Int16=3]="Int16",e[e.Int32=4]="Int32",e[e.Int64=5]="Int64",e[e.Float32=6]="Float32",e[e.Float64=7]="Float64",e[e.String=8]="String",e[e.Sym=9]="Sym",e[e.SymOff=10]="SymOff",e[e.SymValAndOff=11]="SymValAndOff",e[e.SymInt32=12]="SymInt32",e[e.Typ=13]="Typ",e[e.TypSize=14]="TypSize",e[e.CCop=15]="CCop"}(p||(p={}));const Yt=new UInt64(65535,0),Wt=new UInt64(65535,1),Ht={Invalid:0,Unknown:1,Phi:2,Copy:3,Arg:4,CallArg:5,NilCheck:6,Call:7,TailCall:8,ConstBool:9,ConstI8:10,ConstI16:11,ConstI32:12,ConstI64:13,ConstF32:14,ConstF64:15,ConstString:16,SP:17,SB:18,Load:19,Store:20,Move:21,Zero:22,StoreReg:23,LoadReg:24,AddI8:25,AddI16:26,AddI32:27,AddI64:28,AddF32:29,AddF64:30,SubI8:31,SubI16:32,SubI32:33,SubI64:34,SubF32:35,SubF64:36,MulI8:37,MulI16:38,MulI32:39,MulI64:40,MulF32:41,MulF64:42,DivS8:43,DivU8:44,DivS16:45,DivU16:46,DivS32:47,DivU32:48,DivS64:49,DivU64:50,DivF32:51,DivF64:52,RemS8:53,RemU8:54,RemS16:55,RemU16:56,RemS32:57,RemU32:58,RemI64:59,RemU64:60,AndI8:61,AndI16:62,AndI32:63,AndI64:64,OrI8:65,OrI16:66,OrI32:67,OrI64:68,XorI8:69,XorI16:70,XorI32:71,XorI64:72,ShLI8x8:73,ShLI8x16:74,ShLI8x32:75,ShLI8x64:76,ShLI16x8:77,ShLI16x16:78,ShLI16x32:79,ShLI16x64:80,ShLI32x8:81,ShLI32x16:82,ShLI32x32:83,ShLI32x64:84,ShLI64x8:85,ShLI64x16:86,ShLI64x32:87,ShLI64x64:88,ShRS8x8:89,ShRS8x16:90,ShRS8x32:91,ShRS8x64:92,ShRS16x8:93,ShRS16x16:94,ShRS16x32:95,ShRS16x64:96,ShRS32x8:97,ShRS32x16:98,ShRS32x32:99,ShRS32x64:100,ShRS64x8:101,ShRS64x16:102,ShRS64x32:103,ShRS64x64:104,ShRU8x8:105,ShRU8x16:106,ShRU8x32:107,ShRU8x64:108,ShRU16x8:109,ShRU16x16:110,ShRU16x32:111,ShRU16x64:112,ShRU32x8:113,ShRU32x16:114,ShRU32x32:115,ShRU32x64:116,ShRU64x8:117,ShRU64x16:118,ShRU64x32:119,ShRU64x64:120,EqI8:121,EqI16:122,EqI32:123,EqI64:124,EqF32:125,EqF64:126,NeqI8:127,NeqI16:128,NeqI32:129,NeqI64:130,NeqF32:131,NeqF64:132,LessS8:133,LessU8:134,LessS16:135,LessU16:136,LessS32:137,LessU32:138,LessS64:139,LessU64:140,LessF32:141,LessF64:142,LeqS8:143,LeqU8:144,LeqS16:145,LeqU16:146,LeqS32:147,LeqU32:148,LeqS64:149,LeqU64:150,LeqF32:151,LeqF64:152,GreaterS8:153,GreaterU8:154,GreaterS16:155,GreaterU16:156,GreaterS32:157,GreaterU32:158,GreaterS64:159,GreaterU64:160,GreaterF32:161,GreaterF64:162,GeqS8:163,GeqU8:164,GeqS16:165,GeqU16:166,GeqS32:167,GeqU32:168,GeqS64:169,GeqU64:170,GeqF32:171,GeqF64:172,Not:173,MinF32:174,MinF64:175,MaxF32:176,MaxF64:177,NegI8:178,NegI16:179,NegI32:180,NegI64:181,NegF32:182,NegF64:183,CtzI8:184,CtzI16:185,CtzI32:186,CtzI64:187,CtzI8NonZero:188,CtzI16NonZero:189,CtzI32NonZero:190,CtzI64NonZero:191,BitLen8:192,BitLen16:193,BitLen32:194,BitLen64:195,PopCountI8:196,PopCountI16:197,PopCountI32:198,PopCountI64:199,SqrtF32:200,SqrtF64:201,FloorF32:202,FloorF64:203,CeilF32:204,CeilF64:205,TruncF32:206,TruncF64:207,RoundF32:208,RoundF64:209,RoundToEvenF32:210,RoundToEvenF64:211,AbsF32:212,AbsF64:213,CopysignF32:214,CopysignF64:215,SignExtI8to16:216,SignExtI8to32:217,SignExtI8to64:218,SignExtI16to32:219,SignExtI16to64:220,SignExtI32to64:221,ZeroExtI8to16:222,ZeroExtI8to32:223,ZeroExtI8to64:224,ZeroExtI16to32:225,ZeroExtI16to64:226,ZeroExtI32to64:227,TruncI8toBool:228,TruncI16toBool:229,TruncI32toBool:230,TruncI64toBool:231,TruncF32toBool:232,TruncF64toBool:233,TruncI16to8:234,TruncI32to8:235,TruncI32to16:236,TruncI64to8:237,TruncI64to16:238,TruncI64to32:239,ConvI32toF32:240,ConvI32toF64:241,ConvI64toF32:242,ConvI64toF64:243,ConvF32toI32:244,ConvF32toI64:245,ConvF64toI32:246,ConvF64toI64:247,ConvF32toF64:248,ConvF64toF32:249,ConvU32toF32:250,ConvU32toF64:251,ConvF32toU32:252,ConvF64toU32:253,ConvU64toF32:254,ConvU64toF64:255,ConvF32toU64:256,ConvF64toU64:257,AtomicLoad32:258,AtomicLoad64:259,AtomicLoadPtr:260,AtomicStore32:261,AtomicStore64:262,AtomicStorePtrNoWB:263,AtomicExchange32:264,AtomicExchange64:265,AtomicAdd32:266,AtomicAdd64:267,AtomicCompareAndSwap32:268,AtomicCompareAndSwap64:269,AtomicAnd8:270,AtomicOr8:271,CovmMOV32const:272,CovmADD32:273,CovmADD32const:274,CovmADD64:275,CovmMUL32:276,CovmZeroLarge:277,CovmLowNilCheck:278,OpcodeMax:void 0},Zt=[{name:"Invalid",argLen:0,generic:!0},{name:"Unknown",argLen:0,generic:!0},{name:"Phi",argLen:-1,generic:!0,zeroWidth:!0},{name:"Copy",argLen:1,generic:!0},{name:"Arg",argLen:0,aux:p.Int32,generic:!0,zeroWidth:!0},{name:"CallArg",argLen:1,generic:!0,zeroWidth:!0},{name:"NilCheck",argLen:2,faultOnNilArg0:!0,generic:!0,nilCheck:!0},{name:"Call",argLen:1,aux:p.Int64,call:!0,generic:!0},{name:"TailCall",argLen:1,aux:p.Int64,call:!0,generic:!0},{name:"ConstBool",argLen:0,aux:p.Bool,constant:!0,generic:!0},{name:"ConstI8",argLen:0,aux:p.Int8,constant:!0,generic:!0},{name:"ConstI16",argLen:0,aux:p.Int16,constant:!0,generic:!0},{name:"ConstI32",argLen:0,aux:p.Int32,constant:!0,generic:!0},{name:"ConstI64",argLen:0,aux:p.Int64,constant:!0,generic:!0},{name:"ConstF32",argLen:0,aux:p.Int32,constant:!0,generic:!0},{name:"ConstF64",argLen:0,aux:p.Int64,constant:!0,generic:!0},{name:"ConstString",argLen:0,aux:p.String,generic:!0},{name:"SP",argLen:0,generic:!0,zeroWidth:!0},{name:"SB",argLen:0,generic:!0,type:Ye,zeroWidth:!0},{name:"Load",argLen:2,generic:!0},{name:"Store",argLen:3,generic:!0,type:Ye},{name:"Move",argLen:3,generic:!0,type:Ye},{name:"Zero",argLen:2,generic:!0,type:Ye},{name:"StoreReg",argLen:1,generic:!0},{name:"LoadReg",argLen:1,generic:!0},{name:"AddI8",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"AddI16",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"AddI32",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"AddI64",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"AddF32",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"AddF64",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"SubI8",argLen:2,generic:!0,resultInArg0:!0},{name:"SubI16",argLen:2,generic:!0,resultInArg0:!0},{name:"SubI32",argLen:2,generic:!0,resultInArg0:!0},{name:"SubI64",argLen:2,generic:!0,resultInArg0:!0},{name:"SubF32",argLen:2,generic:!0,resultInArg0:!0},{name:"SubF64",argLen:2,generic:!0,resultInArg0:!0},{name:"MulI8",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"MulI16",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"MulI32",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"MulI64",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"MulF32",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"MulF64",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"DivS8",argLen:2,generic:!0,resultInArg0:!0},{name:"DivU8",argLen:2,generic:!0,resultInArg0:!0},{name:"DivS16",argLen:2,generic:!0,resultInArg0:!0},{name:"DivU16",argLen:2,generic:!0,resultInArg0:!0},{name:"DivS32",argLen:2,generic:!0,resultInArg0:!0},{name:"DivU32",argLen:2,generic:!0,resultInArg0:!0},{name:"DivS64",argLen:2,generic:!0,resultInArg0:!0},{name:"DivU64",argLen:2,generic:!0,resultInArg0:!0},{name:"DivF32",argLen:2,generic:!0,resultInArg0:!0},{name:"DivF64",argLen:2,generic:!0,resultInArg0:!0},{name:"RemS8",argLen:2,generic:!0,resultInArg0:!0},{name:"RemU8",argLen:2,generic:!0,resultInArg0:!0},{name:"RemS16",argLen:2,generic:!0,resultInArg0:!0},{name:"RemU16",argLen:2,generic:!0,resultInArg0:!0},{name:"RemS32",argLen:2,generic:!0,resultInArg0:!0},{name:"RemU32",argLen:2,generic:!0,resultInArg0:!0},{name:"RemI64",argLen:2,generic:!0,resultInArg0:!0},{name:"RemU64",argLen:2,generic:!0,resultInArg0:!0},{name:"AndI8",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"AndI16",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"AndI32",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"AndI64",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"OrI8",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"OrI16",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"OrI32",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"OrI64",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"XorI8",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"XorI16",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"XorI32",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"XorI64",argLen:2,commutative:!0,generic:!0,resultInArg0:!0},{name:"ShLI8x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI8x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI8x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI8x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI16x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI16x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI16x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI16x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI32x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI32x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI32x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI32x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI64x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI64x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI64x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShLI64x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS8x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS8x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS8x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS8x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS16x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS16x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS16x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS16x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS32x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS32x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS32x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS32x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS64x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS64x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS64x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShRS64x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU8x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU8x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU8x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU8x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU16x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU16x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU16x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU16x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU32x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU32x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU32x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU32x64",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU64x8",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU64x16",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU64x32",argLen:2,aux:p.Bool,generic:!0},{name:"ShRU64x64",argLen:2,aux:p.Bool,generic:!0},{name:"EqI8",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"EqI16",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"EqI32",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"EqI64",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"EqF32",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"EqF64",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"NeqI8",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"NeqI16",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"NeqI32",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"NeqI64",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"NeqF32",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"NeqF64",argLen:2,commutative:!0,generic:!0,type:Ce},{name:"LessS8",argLen:2,generic:!0,type:Ce},{name:"LessU8",argLen:2,generic:!0,type:Ce},{name:"LessS16",argLen:2,generic:!0,type:Ce},{name:"LessU16",argLen:2,generic:!0,type:Ce},{name:"LessS32",argLen:2,generic:!0,type:Ce},{name:"LessU32",argLen:2,generic:!0,type:Ce},{name:"LessS64",argLen:2,generic:!0,type:Ce},{name:"LessU64",argLen:2,generic:!0,type:Ce},{name:"LessF32",argLen:2,generic:!0,type:Ce},{name:"LessF64",argLen:2,generic:!0,type:Ce},{name:"LeqS8",argLen:2,generic:!0,type:Ce},{name:"LeqU8",argLen:2,generic:!0,type:Ce},{name:"LeqS16",argLen:2,generic:!0,type:Ce},{name:"LeqU16",argLen:2,generic:!0,type:Ce},{name:"LeqS32",argLen:2,generic:!0,type:Ce},{name:"LeqU32",argLen:2,generic:!0,type:Ce},{name:"LeqS64",argLen:2,generic:!0,type:Ce},{name:"LeqU64",argLen:2,generic:!0,type:Ce},{name:"LeqF32",argLen:2,generic:!0,type:Ce},{name:"LeqF64",argLen:2,generic:!0,type:Ce},{name:"GreaterS8",argLen:2,generic:!0,type:Ce},{name:"GreaterU8",argLen:2,generic:!0,type:Ce},{name:"GreaterS16",argLen:2,generic:!0,type:Ce},{name:"GreaterU16",argLen:2,generic:!0,type:Ce},{name:"GreaterS32",argLen:2,generic:!0,type:Ce},{name:"GreaterU32",argLen:2,generic:!0,type:Ce},{name:"GreaterS64",argLen:2,generic:!0,type:Ce},{name:"GreaterU64",argLen:2,generic:!0,type:Ce},{name:"GreaterF32",argLen:2,generic:!0,type:Ce},{name:"GreaterF64",argLen:2,generic:!0,type:Ce},{name:"GeqS8",argLen:2,generic:!0,type:Ce},{name:"GeqU8",argLen:2,generic:!0,type:Ce},{name:"GeqS16",argLen:2,generic:!0,type:Ce},{name:"GeqU16",argLen:2,generic:!0,type:Ce},{name:"GeqS32",argLen:2,generic:!0,type:Ce},{name:"GeqU32",argLen:2,generic:!0,type:Ce},{name:"GeqS64",argLen:2,generic:!0,type:Ce},{name:"GeqU64",argLen:2,generic:!0,type:Ce},{name:"GeqF32",argLen:2,generic:!0,type:Ce},{name:"GeqF64",argLen:2,generic:!0,type:Ce},{name:"Not",argLen:1,generic:!0,type:Ce},{name:"MinF32",argLen:2,generic:!0},{name:"MinF64",argLen:2,generic:!0},{name:"MaxF32",argLen:2,generic:!0},{name:"MaxF64",argLen:2,generic:!0},{name:"NegI8",argLen:1,generic:!0},{name:"NegI16",argLen:1,generic:!0},{name:"NegI32",argLen:1,generic:!0},{name:"NegI64",argLen:1,generic:!0},{name:"NegF32",argLen:1,generic:!0},{name:"NegF64",argLen:1,generic:!0},{name:"CtzI8",argLen:1,generic:!0},{name:"CtzI16",argLen:1,generic:!0},{name:"CtzI32",argLen:1,generic:!0},{name:"CtzI64",argLen:1,generic:!0},{name:"CtzI8NonZero",argLen:1,generic:!0},{name:"CtzI16NonZero",argLen:1,generic:!0},{name:"CtzI32NonZero",argLen:1,generic:!0},{name:"CtzI64NonZero",argLen:1,generic:!0},{name:"BitLen8",argLen:1,generic:!0},{name:"BitLen16",argLen:1,generic:!0},{name:"BitLen32",argLen:1,generic:!0},{name:"BitLen64",argLen:1,generic:!0},{name:"PopCountI8",argLen:1,generic:!0},{name:"PopCountI16",argLen:1,generic:!0},{name:"PopCountI32",argLen:1,generic:!0},{name:"PopCountI64",argLen:1,generic:!0},{name:"SqrtF32",argLen:1,generic:!0},{name:"SqrtF64",argLen:1,generic:!0},{name:"FloorF32",argLen:1,generic:!0},{name:"FloorF64",argLen:1,generic:!0},{name:"CeilF32",argLen:1,generic:!0},{name:"CeilF64",argLen:1,generic:!0},{name:"TruncF32",argLen:1,generic:!0},{name:"TruncF64",argLen:1,generic:!0},{name:"RoundF32",argLen:1,generic:!0},{name:"RoundF64",argLen:1,generic:!0},{name:"RoundToEvenF32",argLen:1,generic:!0},{name:"RoundToEvenF64",argLen:1,generic:!0},{name:"AbsF32",argLen:1,generic:!0},{name:"AbsF64",argLen:1,generic:!0},{name:"CopysignF32",argLen:2,generic:!0},{name:"CopysignF64",argLen:2,generic:!0},{name:"SignExtI8to16",argLen:1,generic:!0,type:De},{name:"SignExtI8to32",argLen:1,generic:!0,type:Pe},{name:"SignExtI8to64",argLen:1,generic:!0,type:qe},{name:"SignExtI16to32",argLen:1,generic:!0,type:Pe},{name:"SignExtI16to64",argLen:1,generic:!0,type:qe},{name:"SignExtI32to64",argLen:1,generic:!0,type:qe},{name:"ZeroExtI8to16",argLen:1,generic:!0,type:Me},{name:"ZeroExtI8to32",argLen:1,generic:!0,type:Ge},{name:"ZeroExtI8to64",argLen:1,generic:!0,type:$e},{name:"ZeroExtI16to32",argLen:1,generic:!0,type:Ge},{name:"ZeroExtI16to64",argLen:1,generic:!0,type:$e},{name:"ZeroExtI32to64",argLen:1,generic:!0,type:$e},{name:"TruncI8toBool",argLen:1,generic:!0,type:Ce},{name:"TruncI16toBool",argLen:1,generic:!0,type:Ce},{name:"TruncI32toBool",argLen:1,generic:!0,type:Ce},{name:"TruncI64toBool",argLen:1,generic:!0,type:Ce},{name:"TruncF32toBool",argLen:1,generic:!0,type:Ce},{name:"TruncF64toBool",argLen:1,generic:!0,type:Ce},{name:"TruncI16to8",argLen:1,generic:!0},{name:"TruncI32to8",argLen:1,generic:!0},{name:"TruncI32to16",argLen:1,generic:!0},{name:"TruncI64to8",argLen:1,generic:!0},{name:"TruncI64to16",argLen:1,generic:!0},{name:"TruncI64to32",argLen:1,generic:!0},{name:"ConvI32toF32",argLen:1,generic:!0,type:He},{name:"ConvI32toF64",argLen:1,generic:!0,type:Ze},{name:"ConvI64toF32",argLen:1,generic:!0,type:He},{name:"ConvI64toF64",argLen:1,generic:!0,type:Ze},{name:"ConvF32toI32",argLen:1,generic:!0,type:Pe},{name:"ConvF32toI64",argLen:1,generic:!0,type:qe},{name:"ConvF64toI32",argLen:1,generic:!0,type:Pe},{name:"ConvF64toI64",argLen:1,generic:!0,type:qe},{name:"ConvF32toF64",argLen:1,generic:!0,type:Ze},{name:"ConvF64toF32",argLen:1,generic:!0,type:He},{name:"ConvU32toF32",argLen:1,generic:!0,type:He},{name:"ConvU32toF64",argLen:1,generic:!0,type:Ze},{name:"ConvF32toU32",argLen:1,generic:!0,type:Ge},{name:"ConvF64toU32",argLen:1,generic:!0,type:Ge},{name:"ConvU64toF32",argLen:1,generic:!0,type:He},{name:"ConvU64toF64",argLen:1,generic:!0,type:Ze},{name:"ConvF32toU64",argLen:1,generic:!0,type:$e},{name:"ConvF64toU64",argLen:1,generic:!0,type:$e},{name:"AtomicLoad32",argLen:2,generic:!0},{name:"AtomicLoad64",argLen:2,generic:!0},{name:"AtomicLoadPtr",argLen:2,generic:!0},{name:"AtomicStore32",argLen:3,generic:!0,hasSideEffects:!0},{name:"AtomicStore64",argLen:3,generic:!0,hasSideEffects:!0},{name:"AtomicStorePtrNoWB",argLen:3,generic:!0,hasSideEffects:!0,type:Ye},{name:"AtomicExchange32",argLen:3,generic:!0,hasSideEffects:!0},{name:"AtomicExchange64",argLen:3,generic:!0,hasSideEffects:!0},{name:"AtomicAdd32",argLen:3,generic:!0,hasSideEffects:!0},{name:"AtomicAdd64",argLen:3,generic:!0,hasSideEffects:!0},{name:"AtomicCompareAndSwap32",argLen:4,generic:!0,hasSideEffects:!0},{name:"AtomicCompareAndSwap64",argLen:4,generic:!0,hasSideEffects:!0},{name:"AtomicAnd8",argLen:3,generic:!0,hasSideEffects:!0,type:Ye},{name:"AtomicOr8",argLen:3,generic:!0,hasSideEffects:!0,type:Ye},{name:"MOV32const",argLen:0,aux:p.Int32,reg:{inputs:[],outputs:[{idx:0,regs:Yt}],clobbers:UInt64.ZERO},rematerializeable:!0,type:Ge},{name:"ADD32",argLen:2,commutative:!0,reg:{inputs:[{idx:0,regs:Wt},{idx:1,regs:Wt}],outputs:[{idx:0,regs:Yt}],clobbers:UInt64.ZERO},type:Ge},{name:"ADD32const",argLen:1,aux:p.Int32,commutative:!0,reg:{inputs:[{idx:0,regs:Wt}],outputs:[{idx:0,regs:Yt}],clobbers:UInt64.ZERO},type:Ge},{name:"ADD64",argLen:2,commutative:!0,reg:{inputs:[{idx:0,regs:Wt},{idx:1,regs:Wt}],outputs:[{idx:0,regs:Yt}],clobbers:UInt64.ZERO},type:$e},{name:"MUL32",argLen:2,commutative:!0,reg:{inputs:[{idx:0,regs:Wt},{idx:1,regs:Wt}],outputs:[{idx:0,regs:Yt}],clobbers:UInt64.ZERO},type:Ge},{name:"ZeroLarge",argLen:2,aux:p.Int64,reg:{inputs:[{idx:0,regs:Yt}],outputs:[],clobbers:UInt64.ZERO}},{name:"LowNilCheck",argLen:2,faultOnNilArg0:!0,nilCheck:!0,reg:{inputs:[{idx:0,regs:Yt}],outputs:[],clobbers:UInt64.ZERO}}];function jt(e){return Zt[e].name}const Xt=_t("main"),Qt=_t("anonfun");class Value{constructor(e,t,n,r,s,i){this.pos=kt,this.args=[],this.comment="",this.prevv=null,this.nextv=null,this.reg=null,this.uses=0,this.id=e,this.op=n,this.type=r,this.b=t,this.auxInt=s,this.aux=i,r.mem}clone(){const e=this,t=new Value(e.b.f.newValueID(),e.b,e.op,e.type,e.auxInt,e.aux);t.pos=e.pos,t.b=e.b,t.args=e.args.slice(),t.comment=e.comment,t.reg=e.reg;for(let t of e.args)t.uses++;return t}toString(){return"v"+this.id}auxIsZero(){return"number"==typeof(e=this.auxInt)?0==e:e.isZero();var e}reset(e){const t=this;t.op=e,t.resetArgs(),t.auxInt=0,t.aux=null}setArgs1(e){this.resetArgs(),this.addArg(e)}setArg(e,t){this.args[e],this.args[e].uses--,this.args[e]=t,t.uses++}resetArgs(){for(let e of this.args)e.uses--;this.args.length=0}addArg(e){e.uses++,this.args.push(e)}removeArg(e){this.args[e].uses--,this.args.splice(e,1)}rematerializeable(){if(!Zt[this.op].rematerializeable)return!1;for(let e of this.args)if(e.op!==Ht.SP&&e.op!==Ht.SB)return!1;return!0}}!function(e){e[e.Invalid=0]="Invalid",e[e.Plain=1]="Plain",e[e.If=2]="If",e[e.Ret=3]="Ret",e[e.First=4]="First"}(h||(h={})),function(e){e[e.Unlikely=-1]="Unlikely",e[e.Unknown=0]="Unknown",e[e.Likely=1]="Likely"}(f||(f={}));class Block$1{constructor(e,t,n){this.pos=kt,this.kind=h.Invalid,this.succs=[],this.preds=[],this.control=null,this.values=[],this.sealed=!1,this.comment="",this.likely=f.Unknown,this.kind=e,this.id=t,this.f=n}pushValueFront(e){this.values.unshift(e)}insertValue(e,t){this.values.indexOf(e),this.values.splice(this.values.indexOf(e),0,t)}removeValue(e){for(let t=0;t<this.values.length;)this.values[t]===e?(this.values.splice(t,1),e.prevv,e.nextv,e.prevv&&(e.prevv.nextv=e.nextv),e.nextv&&(e.nextv.prevv=e.prevv),e.uses--):t++;return 0}setControl(e){let t=this.control;t&&t.uses--,this.control=e,e&&e.uses++}removeNthPred(e){this.preds.splice(e,1),this.f.invalidateCFG()}removePred(e){let t=this.preds.indexOf(e);return this.removeNthPred(t),t}removeNthSucc(e){this.succs.splice(e,1),this.f.invalidateCFG()}removeSucc(e){let t=this.succs.indexOf(e);return this.removeNthSucc(t),t}newPhi(e){let t=this.f.newValue(this,Ht.Phi,e,0,null);return this.values.push(t),t}newValue0(e,t=null,n=0,r=null){let s=this.f.newValue(this,e,t,n,r);return this.values.push(s),s}newValue1(e,t,n,r=0,s=null){let i=this.f.newValue(this,e,t,r,s);return i.args=[n],n.uses++,this.values.push(i),i}newValue2(e,t,n,r,s=0,i=null){let o=this.f.newValue(this,e,t,s,i);return o.args=[n,r],n.uses++,r.uses++,this.values.push(o),o}toString(){return"b"+this.id}}class Fun{constructor(e,t,n){this.pos=kt,this.bid=0,this.vid=0,this.consts=null,this.namedValues=new Map,this.regAlloc=null,this._cachedPostorder=null,this.entry=new Block$1(h.Plain,this.bid++,this),this.blocks=[this.entry],this.type=e,this.name=t||Qt,this.nargs=n}newBlock(e){this.bid;let t=new Block$1(e,this.bid++,this);return this.blocks.push(t),t}freeBlock(e){e.f,e.f=null}newValue(e,t,n,r,s){return this.vid,!n||!Zt[t].type||0==Zt[t].type.mem||Zt[t].type,jt(t),Zt[t].type,new Value(this.vid++,e,t,n||Zt[t].type||_e,r,s)}newValueID(){return this.vid++}freeValue(e){e.b,e.uses,e.uses,e.args.length,e.args.length}constVal(e,t){let n=this,r=Ht.Invalid;switch(e){case Ce:r=Ht.ConstBool;break;case Fe:case Be:r=Ht.ConstI8;break;case Me:case De:r=Ht.ConstI16;break;case Ge:case Pe:r=Ht.ConstI32;break;case $e:case qe:r=Ht.ConstI64;break;case He:r=Ht.ConstF32;break;case Ze:r=Ht.ConstF64}n.consts||(n.consts=new Map);let s=n.consts.get(r);s||(s=new Map,n.consts.set(r,s));let i=s.get(t);return i||(i=n.blocks[0].newValue0(r,e,t),s.set(t,i)),i}constBool(e){return this.constVal(Ce,e?1:0)}removeBlock(e){let t=this.blocks.indexOf(e);this.blocks.splice(t,1),this.invalidateCFG()}numBlocks(){return this.bid}numValues(){return this.vid}postorder(){return this._cachedPostorder||(this._cachedPostorder=function(e){let t=new Array(e.numBlocks()),n=[],r=[{b:e.entry,index:0}];for(t[e.entry.id]=!0;r.length>0;){let e=r.length-1,s=r[e],i=s.b,o=s.index;if(o<i.succs.length){r[e].index++;let n=i.succs[o];t[n.id]||(t[n.id]=!0,r.push({b:n,index:0}))}else r=r.slice(0,e),n.push(i)}return n}(this)),this._cachedPostorder}invalidateCFG(){this._cachedPostorder=null}toString(){return this.name.toString()}}class Pkg{constructor(){this.funs=new Map,this.init=null}mainFun(){for(let e of this.funs.values())if(Xt.equals(e.name))return e;return null}}function Kt(e,t,n){switch(e){case r.ADD:switch(t.mem){case l.i8:return Ht.AddI8;case l.i16:return Ht.AddI16;case l.i32:return Ht.AddI32;case l.i64:return Ht.AddI64;case l.f32:return Ht.AddF32;case l.f64:return Ht.AddF64}break;case r.SUB:switch(t.mem){case l.i8:return Ht.SubI8;case l.i16:return Ht.SubI16;case l.i32:return Ht.SubI32;case l.i64:return Ht.SubI64;case l.f32:return Ht.SubF32;case l.f64:return Ht.SubF64}break;case r.MUL:switch(t.mem){case l.i8:return Ht.MulI8;case l.i16:return Ht.MulI16;case l.i32:return Ht.MulI32;case l.i64:return Ht.MulI64;case l.f32:return Ht.MulF32;case l.f64:return Ht.MulF64}break;case r.QUO:switch(t){case Be:return Ht.DivS8;case Fe:return Ht.DivU8;case De:return Ht.DivS16;case Me:return Ht.DivU16;case Pe:return Ht.DivS32;case Ge:return Ht.DivU32;case qe:return Ht.DivS64;case $e:return Ht.DivU64;case He:return Ht.DivF32;case Ze:return Ht.DivF64}break;case r.REM:switch(t){case Be:return Ht.RemS8;case Fe:return Ht.RemU8;case De:return Ht.RemS16;case Me:return Ht.RemU16;case Pe:return Ht.RemS32;case Ge:return Ht.RemU32;case qe:return Ht.RemI64;case $e:return Ht.RemU64}break;case r.AND:switch(t.mem){case l.i8:return Ht.AndI8;case l.i16:return Ht.AndI16;case l.i32:return Ht.AndI32;case l.i64:return Ht.AndI64}break;case r.OR:switch(t.mem){case l.i8:return Ht.OrI8;case l.i16:return Ht.OrI16;case l.i32:return Ht.OrI32;case l.i64:return Ht.OrI64}break;case r.XOR:switch(t.mem){case l.i8:return Ht.XorI8;case l.i16:return Ht.XorI16;case l.i32:return Ht.XorI32;case l.i64:return Ht.XorI64}break;case r.AND_NOT:break;case r.EQL:switch(t.mem){case l.i8:return Ht.EqI8;case l.i16:return Ht.EqI16;case l.i32:return Ht.EqI32;case l.i64:return Ht.EqI64;case l.f32:return Ht.EqF32;case l.f64:return Ht.EqF64}break;case r.NEQ:switch(t.mem){case l.i8:return Ht.NeqI8;case l.i16:return Ht.NeqI16;case l.i32:return Ht.NeqI32;case l.i64:return Ht.NeqI64;case l.f32:return Ht.NeqF32;case l.f64:return Ht.NeqF64}break;case r.LSS:switch(t){case Be:return Ht.LessS8;case Fe:return Ht.LessU8;case De:return Ht.LessS16;case Me:return Ht.LessU16;case Pe:return Ht.LessS32;case Ge:return Ht.LessU32;case qe:return Ht.LessS64;case $e:return Ht.LessU64;case He:return Ht.LessF32;case Ze:return Ht.LessF64}break;case r.LEQ:switch(t){case Be:return Ht.LeqS8;case Fe:return Ht.LeqU8;case De:return Ht.LeqS16;case Me:return Ht.LeqU16;case Pe:return Ht.LeqS32;case Ge:return Ht.LeqU32;case qe:return Ht.LeqS64;case $e:return Ht.LeqU64;case He:return Ht.LeqF32;case Ze:return Ht.LeqF64}break;case r.GTR:switch(t){case Be:return Ht.GreaterS8;case Fe:return Ht.GreaterU8;case De:return Ht.GreaterS16;case Me:return Ht.GreaterU16;case Pe:return Ht.GreaterS32;case Ge:return Ht.GreaterU32;case qe:return Ht.GreaterS64;case $e:return Ht.GreaterU64;case He:return Ht.GreaterF32;case Ze:return Ht.GreaterF64}break;case r.GEQ:switch(t){case Be:return Ht.GeqS8;case Fe:return Ht.GeqU8;case De:return Ht.GeqS16;case Me:return Ht.GeqU16;case Pe:return Ht.GeqS32;case Ge:return Ht.GeqU32;case qe:return Ht.GeqS64;case $e:return Ht.GeqU64;case He:return Ht.GeqF32;case Ze:return Ht.GeqF64}break;case r.SHL:switch(t.mem){case l.i8:switch(n){case Fe:return Ht.ShLI8x8;case Me:return Ht.ShLI8x16;case Ge:return Ht.ShLI8x32;case $e:return Ht.ShLI8x64}break;case l.i16:switch(n){case Fe:return Ht.ShLI16x8;case Me:return Ht.ShLI16x16;case Ge:return Ht.ShLI16x32;case $e:return Ht.ShLI16x64}break;case l.i32:switch(n){case Fe:return Ht.ShLI32x8;case Me:return Ht.ShLI32x16;case Ge:return Ht.ShLI32x32;case $e:return Ht.ShLI32x64}break;case l.i64:switch(n){case Fe:return Ht.ShLI64x8;case Me:return Ht.ShLI64x16;case Ge:return Ht.ShLI64x32;case $e:return Ht.ShLI64x64}}break;case r.SHR:switch(n.isUnsignedInt,t){case Be:switch(n){case Fe:return Ht.ShRS8x8;case Me:return Ht.ShRS8x16;case Ge:return Ht.ShRS8x32;case $e:return Ht.ShRS8x64}break;case Fe:switch(n){case Fe:return Ht.ShRU8x8;case Me:return Ht.ShRU8x16;case Ge:return Ht.ShRU8x32;case $e:return Ht.ShRU8x64}break;case De:switch(n){case Fe:return Ht.ShRS16x8;case Me:return Ht.ShRS16x16;case Ge:return Ht.ShRS16x32;case $e:return Ht.ShRS16x64}break;case Me:switch(n){case Fe:return Ht.ShRU16x8;case Me:return Ht.ShRU16x16;case Ge:return Ht.ShRU16x32;case $e:return Ht.ShRU16x64}break;case Pe:switch(n){case Fe:return Ht.ShRS32x8;case Me:return Ht.ShRS32x16;case Ge:return Ht.ShRS32x32;case $e:return Ht.ShRS32x64}break;case Ge:switch(n){case Fe:return Ht.ShRU32x8;case Me:return Ht.ShRU32x16;case Ge:return Ht.ShRU32x32;case $e:return Ht.ShRU32x64}break;case qe:switch(n){case Fe:return Ht.ShRS64x8;case Me:return Ht.ShRS64x16;case Ge:return Ht.ShRS64x32;case $e:return Ht.ShRS64x64}break;case $e:switch(n){case Fe:return Ht.ShRU64x8;case Me:return Ht.ShRU64x16;case Ge:return Ht.ShRU64x32;case $e:return Ht.ShRU64x64}}}return r[e],Ht.Invalid}class IRFmt{constructor(e,t,n){this.types=e,this.style=t,this.println=n,this.rarr=t.grey(" —> "),this.larr=t.grey(" <— ")}}function Jt(e,n,r){e.println(r+function(e,n){let r=`v${n.id} = `;n.op,t(n);let s=Zt[n.op];r+=jt(n.op),e.types&&(r+=" "+e.style.purple(`<${n.type}>`));for(let e=0,t=n.args.length;e<t;e++)r+=" "+n.args[e];s.aux!=p.None&&(r+=function(e,t,n){let r=!1,s=!1;switch(n.aux){case p.Bool:case p.Int8:case p.Int16:case p.Int32:case p.Int64:case p.Float32:case p.Float64:r=!0;break;case p.String:case p.Sym:case p.Typ:case p.CCop:s=!0;break;case p.SymOff:case p.SymValAndOff:case p.SymInt32:case p.TypSize:r=!0,s=!0}let i="";return r&&(i+=` [${t.auxInt}]`),s&&(i+=` {${t.aux}}`),i}(0,n,s)),n.reg&&(r+=` : ${W.orange(n.reg.name)}`);let i=0==n.uses?"unused":1==n.uses?"1 use":`${n.uses} uses`;return r+e.style.grey(n.comment?`  // ${n.comment}; ${i}`:`  // ${i}`)}(e,n))}function en(e,t,n){let r=t.toString(),s="";t.preds.length&&(s=e.larr+t.preds.map(t=>e.style.lightyellow(t.toString())).join(", "),e.println(""));let i=t.comment?e.style.grey("  // "+t.comment):"";e.println(n+e.style.lightyellow(r+":")+s+""+i);let o=n+"  ";for(let n of t.values)Jt(e,n,o);const a=t=>{let n=e.style.lightyellow(t.toString());switch(t.likely){case f.Likely:n+=e.style.grey(" (likely)");break;case f.Unlikely:n+=e.style.grey(" (unlikely)")}return n};switch(t.kind){case h.Plain:{let r=t.succs[0];r&&e.println(n+e.style.cyan("cont")+e.rarr+a(r));break}case h.First:case h.If:{let r=t.succs[0],s=t.succs[1];r&&s&&(t.control,e.println(n+e.style.cyan(t.kind==h.If?"if":"first")+` ${t.control}${e.rarr}`+a(r)+", "+a(s)));break}case h.Ret:t.succs.length,e.println(n+e.style.cyan("ret")+(t.control?" "+t.control:""));break;default:h[t.kind]}}function tn(e,t){e.println(e.style.white(t.toString())+" ("+t.type.args.join(" ")+")->"+t.type.result);for(let n of t.blocks)en(e,n,"  ")}function nn(e,t,n){let r=new IRFmt(!(n&&n.noTypes),n&&n.colors?W:n&&!1===n.colors?V:Z,t||console.log.bind(console));if(e instanceof Pkg)!function(e,t){let n=!0;for(let r of t.funs.values())tn(e,r),n?n=!1:e.println("")}(r,e);else if(e instanceof Fun)tn(r,e);else if(e instanceof Block$1)en(r,e,"");else if(e instanceof Value)Jt(r,e,"");else{e&&"object"==typeof e&&e.constructor.name}}class LocalSlot{constructor(e,t,n){this.n=e,this.type=t,this.offs=n}key(){return this._key||(this._key=`${this.n} ${this.type} ${this.offs}`),this._key}toString(){return 0==this.offs?`${this.n}[${this.type}]`:`${this.n}+${this.offs}[${this.type}]`}}const rn=function(...e){},sn=It;!function(e){e[e.Default=0]="Default",e[e.Comments=2]="Comments"}(g||(g={}));class TmpName extends ByteStr{}class IRBuilder{constructor(){this.sfile=null,this.diagh=null,this.flags=g.Default,this.tmpNames=[],this.tmpNameBytes=null,this.tmpNameHash=0}init(e,t=null,n=g.Default){const r=this;r.config=e,r.pkg=new Pkg,r.sfile=null,r.diagh=t,r.vars=new Map,r.defvars=[],r.incompletePhis=null,r.flags=n;const[s,i]=Qe(e.intSize),[o,a]=Qe(e.addrSize);this.concreteType=(e=>{switch(e){case Ve:return s;case ze:return i;case We:return o;case Ye:return a;default:return e}})}addTopLevel(e,t){const n=this;if(n.sfile=e,t instanceof MultiDecl)for(let r of t.decls)n.addTopLevel(e,r);else if(t instanceof VarDecl)n.global(t);else if(t instanceof FunExpr)if(t.isInit)t.sig.params.length,t.sig.result,sn.nil,t.body,n.initCode(t.body);else if(t.body)return n.fun(t);return null}startBlock(e){this.b,this.b=e}startSealedBlock(e){this.sealBlock(e),this.startBlock(e)}sealBlock(e){const t=this;if(e.sealed,t.incompletePhis){let n=t.incompletePhis.get(e);if(n){for(let[e,r]of n)t.addPhiOperands(e,r);t.incompletePhis.delete(e)}}e.sealed=!0}endBlock(){const e=this;let t=e.b;return e.defvars[t.id]=e.vars,e.vars=new Map,S&&(e.b=null),t.kind==h.Ret&&t.values.length&&t.values[t.values.length-1].op==Ht.Call&&(t.values[t.values.length-1].op=Ht.TailCall),t}startFun(e){this.f,this.f=e}endFun(){const e=this;e.f;for(let t of e.f.namedValues.keys()){let n=e.f.namedValues.get(t),r=`  {${t}}\t=> `;n&&n.values.length?r+=n.values.join(", "):r+="-"}S&&(e.f=null)}concreteType(e){return _e}nilValue(){return this.b,this.b.newValue0(Ht.Unknown,_e)}global(e){}initCode(e){}fun(e){const t=this;e.body,e.type;let n=e.type,r=new Fun(n,e.name?e.name.value:null,e.sig.params.length);for(let s=0;s<e.sig.params.length;s++){let i=e.sig.params[s];if(i.name&&!i.name.value.isUnderscore()){let e=t.concreteType(n.args[s]),o=i.name.value,a=r.entry.newValue0(Ht.Arg,e,s);t.flags&g.Comments&&(a.comment=o.toString()),t.vars.set(o,a)}}t.startFun(r),t.startSealedBlock(r.entry);let s=t.block(e.body);return t.b&&(t.b.kind=h.Ret,e.body instanceof Block||t.b.setControl(s),t.endBlock()),t.b,r.blocks[r.blocks.length-1].kind,h.Ret,t.endFun(),t.pkg.funs.set(r.name,r),r}block(e){const t=this;if(e instanceof Block){let n=e.list.length,r=n-1;for(let s=0;s!=n;++s){if(!t.b){t.diag("warn","unreachable code",e.list[s].pos);break}t.stmt(e.list[s],s==r)}return null}return t.expr(e)}stmt(e,t=!1){const n=this;if(e instanceof IfExpr)n.if_(e);else if(e instanceof ReturnStmt)n.ret(n.expr(e.result));else if(e instanceof WhileStmt)n.while_(e);else if(e instanceof Expr)!t&&e instanceof Ident?n.diag("warn","unused expression",e.pos):n.expr(e);else if(e instanceof VarDecl)if(e.values)for(let t=0;t<e.idents.length;t++){let r=e.idents[t],s=n.expr(e.values[t]);n.vars.has(r.value),r.value,n.vars.set(r.value,s)}else{e.type;let t=e.type.type,r=n.f.constVal(t,0);for(let t of e.idents)n.vars.has(t.value),t.value,n.vars.set(t.value,r)}else rn(`TODO: handle ${e.constructor.name}`)}ret(e){let t=this.endBlock();t.kind=h.Ret,t.setControl(e)}while_(e){const t=this;let n=t.endBlock();n.kind,h.Plain;let r=t.f.newBlock(h.If);n.succs=[r],r.preds=[n],t.startBlock(r);let s=t.expr(e.cond);if(t.config.optimize&&Zt[s.op].constant&&s.auxIsZero())return r.kind=h.Plain,t.sealBlock(r),void nn(n);(r=t.endBlock()).setControl(s);let i=t.f.newBlock(h.Plain);i.preds=[r],t.startSealedBlock(i),t.block(e.body),(i=t.endBlock()).succs=[r],r.preds=[n,i],t.sealBlock(r);let o=t.f.newBlock(h.Plain);o.preds=[r],r.succs=[i,o],t.startSealedBlock(o),t.flags&g.Comments&&(r.comment="while",i.comment="then",o.comment="endwhile")}if_(e){const t=this;let n=t.expr(e.cond);if(t.config.optimize&&Zt[n.op].constant)return void(n.auxIsZero()?e.els_&&t.block(e.els_):t.block(e.then));let r=t.endBlock();r.kind=h.If,r.setControl(n);let s=t.f.newBlock(h.Plain),i=t.f.newBlock(h.Plain);if(r.succs=[s,i],s.preds=[r],t.startSealedBlock(s),t.block(e.then),s=t.endBlock(),e.els_){let n=t.f.newBlock(h.Plain);i.preds=[r],t.startSealedBlock(i),t.block(e.els_),(i=t.endBlock()).succs=[n],s.succs=[n],n.preds=[s,i],t.startSealedBlock(n),t.flags&g.Comments&&(s.comment="then",i.comment="else",n.comment="endif")}else s.succs=[i],i.preds=[r,s],i.succs=[],t.startSealedBlock(i),t.flags&g.Comments&&(s.comment="then",i.comment="endif")}assign(e,t){e.constructor.name;let n=e.value;return this.writeVariable(n,t),t}assignment(e){const t=this;if(e.op==r.INC||e.op==r.DEC){e.lhs.length,e.rhs.length;let n=e.lhs[0],s=t.expr(n),i=t.f.constVal(s.type,1),o=Kt(e.op==r.INC?r.ADD:r.SUB,s.type,i.type),a=t.b.newValue2(o,s.type,s,i);return t.assign(n,a)}if(e.op!=r.ASSIGN){e.op<r.assignop_beg||(e.op,r.assignop_end),r[e.op],e.lhs.length,e.rhs.length;let n=e.lhs[0],s=t.expr(n),i=t.expr(e.rhs[0]),o=Kt(e.op,s.type,i.type),a=t.b.newValue2(o,s.type,s,i);return t.assign(n,a)}let n=e.lhs.length,s=null;if(n>1){let r=new Map;for(let t=0;t<n;t++){let n=e.lhs[t];n instanceof Ident&&r.set(n.value,t)}for(let i=0;i<n;i++){let n=e.rhs[i];if(n instanceof Ident){let o=r.get(n.value);o==i?t.diag("warn",`${n} assigned to itself`,n.pos):void 0!==o&&(s||(s=new Array(e.rhs.length)),s[i]=t.expr(n))}}}let i=null;for(let r=0;r<n;r++){let n,o=e.lhs[r];i=s&&(n=s[r])?n:t.expr(e.rhs[r]),i=t.assign(o,i),t.flags&g.Comments&&o.isIdent()&&(i.comment=o.toString())}return i}expr(e){const t=this;if(e.type,e instanceof NumLit){const n=t.concreteType(e.type);return t.f.constVal(n,e.value)}if(e instanceof Ident){const n=t.concreteType(e.type);return t.readVariable(e.value,n,null)}if(e instanceof Assignment)return t.assignment(e);if(e instanceof Operation){if(e.op==r.OROR||e.op==r.ANDAND)return t.opAndAnd(e);const s=t.concreteType(e.type);let i=t.expr(e.x);if(e.y){let n=t.expr(e.y),r=Kt(e.op,i.type,n.type);if(t.config.optimize){let e=function(e,t,n,r){if(!Zt[n.op].constant||!Zt[r.op].constant)return null;let s=n.auxInt,i=r.auxInt;if(n.type!==r.type){let e;if([i,e]=St(i,n.type),!e)return null}let o=function(e,t,n,r){const o=s,a=i,l=s,c=i;switch(e){case Ht.AddI8:case Ht.AddI16:case Ht.AddI32:return t.isSignedInt?o+a|0:o+a>>>0;case Ht.AddI64:return l.add(c);case Ht.AddF32:case Ht.AddF64:return o+a;case Ht.SubI8:case Ht.SubI16:case Ht.SubI32:return t.isSignedInt?o-a|0:o-a>>>0;case Ht.SubI64:return l.sub(c);case Ht.SubF32:case Ht.SubF64:return o-a;case Ht.MulI8:case Ht.MulI16:case Ht.MulI32:return t.isSignedInt?Math.imul(o,a):Math.imul(o,a)>>>0;case Ht.MulI64:return l.mul(c);case Ht.MulF32:case Ht.MulF64:return o*a;case Ht.DivS8:case Ht.DivS16:case Ht.DivS32:return o/a|0;case Ht.DivU8:case Ht.DivU16:case Ht.DivU32:return o/a>>>0;case Ht.DivS64:case Ht.DivU64:return l.div(c);case Ht.DivF32:case Ht.DivF64:return o/a;case Ht.RemS8:case Ht.RemS16:case Ht.RemS32:return o%a|0;case Ht.RemU8:case Ht.RemU16:case Ht.RemU32:return o%a>>>0;case Ht.RemI64:case Ht.RemU64:return l.mod(c);case Ht.AndI8:case Ht.AndI16:case Ht.AndI32:return o&a;case Ht.AndI64:return l.and(c);case Ht.OrI8:case Ht.OrI16:case Ht.OrI32:return o|a;case Ht.OrI64:return l.or(c);case Ht.XorI8:case Ht.XorI16:case Ht.XorI32:return o^a;case Ht.XorI64:return l.xor(c);case Ht.ShLI8x8:case Ht.ShLI8x16:case Ht.ShLI8x32:case Ht.ShLI16x8:case Ht.ShLI16x16:case Ht.ShLI16x32:case Ht.ShLI32x8:case Ht.ShLI32x16:case Ht.ShLI32x32:return o<<a;case Ht.ShLI8x64:case Ht.ShLI16x64:case Ht.ShLI32x64:return o<<c.toUInt32();case Ht.ShLI64x8:case Ht.ShLI64x16:case Ht.ShLI64x32:case Ht.ShLI64x64:return l.shl(c.toUInt32());case Ht.ShRS8x8:case Ht.ShRS8x16:case Ht.ShRS8x32:case Ht.ShRS16x8:case Ht.ShRS16x16:case Ht.ShRS16x32:case Ht.ShRS32x8:case Ht.ShRS32x16:case Ht.ShRS32x32:return o>>a;case Ht.ShRS8x64:case Ht.ShRS16x64:case Ht.ShRS32x64:return o>>c.toUInt32();case Ht.ShRS64x8:case Ht.ShRS64x16:case Ht.ShRS64x32:case Ht.ShRS64x64:return l.shr(c.toUInt32());case Ht.ShRU8x8:case Ht.ShRU8x16:case Ht.ShRU8x32:case Ht.ShRU16x8:case Ht.ShRU16x16:case Ht.ShRU16x32:case Ht.ShRU32x8:case Ht.ShRU32x16:case Ht.ShRU32x32:return o>>>a;case Ht.ShRU8x64:case Ht.ShRU16x64:case Ht.ShRU32x64:return o>>>c.toUInt32();case Ht.ShRU64x8:case Ht.ShRU64x16:case Ht.ShRU64x32:case Ht.ShRU64x64:return l.shr(c.toUInt32());case Ht.EqI8:case Ht.EqI16:case Ht.EqI32:case Ht.EqF32:case Ht.EqF64:return o===a?1:0;case Ht.EqI64:return l.eq(c)?1:0;case Ht.NeqI8:case Ht.NeqI16:case Ht.NeqI32:case Ht.NeqF32:case Ht.NeqF64:return o!==a?1:0;case Ht.NeqI64:return l.neq(c)?1:0;case Ht.LessS8:case Ht.LessU8:case Ht.LessS16:case Ht.LessU16:case Ht.LessS32:case Ht.LessU32:case Ht.LessF32:case Ht.LessF64:return o<a?1:0;case Ht.LessS64:case Ht.LessU64:return l.lt(c)?1:0;case Ht.LeqS8:case Ht.LeqU8:case Ht.LeqS16:case Ht.LeqU16:case Ht.LeqS32:case Ht.LeqU32:case Ht.LeqF32:case Ht.LeqF64:return o<=a?1:0;case Ht.LeqS64:case Ht.LeqU64:return l.lte(c)?1:0;case Ht.GreaterS8:case Ht.GreaterU8:case Ht.GreaterS16:case Ht.GreaterU16:case Ht.GreaterS32:case Ht.GreaterU32:case Ht.GreaterF32:case Ht.GreaterF64:return o>a?1:0;case Ht.GreaterS64:case Ht.GreaterU64:return l.gt(c)?1:0;case Ht.GeqS8:case Ht.GeqU8:case Ht.GeqS16:case Ht.GeqU16:case Ht.GeqS32:case Ht.GeqU32:case Ht.GeqF32:case Ht.GeqF64:return o>=a?1:0;case Ht.GeqS64:case Ht.GeqU64:return l.gte(c)?1:0;case Ht.MinF32:case Ht.MinF64:return Math.min(o,a);case Ht.MaxF32:case Ht.MaxF64:return Math.max(o,a)}return jt(e),null}(t,n.type);return null!==o?e.f.constVal(n.type,o):null}(t.b,r,i,n);if(e)return e}return t.b.newValue2(r,s,i,n)}let o=function(e,t){switch(e){case r.NOT:return Ht.Not;case r.ADD:switch(t.mem){case l.i8:return Ht.NegI8;case l.i16:return Ht.NegI16;case l.i32:return Ht.NegI32;case l.i64:return Ht.NegI64;case l.i32:return Ht.NegF32;case l.i64:return Ht.NegF64}}return r[e],Ht.Invalid}(e.op,i.type);if(t.config.optimize){let e=(t.b,Zt[(n=i).op].constant&&(n.type,n.auxInt),null);if(e)return e}return t.b.newValue1(o,s,i)}var n;return e instanceof CallExpr?t.funcall(e):e instanceof TypeConvExpr?t.conv(e):(rn(`TODO: handle ${e.constructor.name}`),t.nilValue())}conv(e){let t=e.type,n=this.expr(e.expr),r=function(e,t){switch(e){case Be:switch(t){case Ce:return Ht.TruncI8toBool;case De:return Ht.SignExtI8to16;case Pe:return Ht.SignExtI8to32;case qe:return Ht.SignExtI8to64}break;case Fe:switch(t){case Ce:return Ht.TruncI8toBool;case Me:return Ht.ZeroExtI8to16;case Ge:return Ht.ZeroExtI8to32;case $e:return Ht.ZeroExtI8to64}break;case De:switch(t){case Ce:return Ht.TruncI16toBool;case Be:return Ht.TruncI16to8;case Pe:return Ht.SignExtI16to32;case qe:return Ht.SignExtI16to64}break;case Me:switch(t){case Ce:return Ht.TruncI16toBool;case Fe:return Ht.TruncI16to8;case Ge:return Ht.ZeroExtI16to32;case $e:return Ht.ZeroExtI16to64}break;case Pe:switch(t){case Ce:return Ht.TruncI32toBool;case Be:return Ht.TruncI32to8;case De:return Ht.TruncI32to16;case qe:return Ht.SignExtI32to64;case He:return Ht.ConvI32toF32;case Ze:return Ht.ConvI32toF64}break;case Ge:switch(t){case Ce:return Ht.TruncI32toBool;case Fe:return Ht.TruncI32to8;case Me:return Ht.TruncI32to16;case $e:return Ht.ZeroExtI32to64;case He:return Ht.ConvU32toF32;case Ze:return Ht.ConvU32toF64}break;case qe:switch(t){case Ce:return Ht.TruncI64toBool;case Be:return Ht.TruncI64to8;case De:return Ht.TruncI64to16;case Pe:return Ht.TruncI64to32;case He:return Ht.ConvI64toF32;case Ze:return Ht.ConvI64toF64}break;case $e:switch(t){case Ce:return Ht.TruncI64toBool;case Fe:return Ht.TruncI64to8;case Me:return Ht.TruncI64to16;case Ge:return Ht.TruncI64to32;case He:return Ht.ConvU64toF32;case Ze:return Ht.ConvU64toF64}break;case He:switch(t){case Ce:return Ht.TruncF32toBool;case Pe:return Ht.ConvF32toI32;case Ge:return Ht.ConvF32toU32;case qe:return Ht.ConvF32toI64;case $e:return Ht.ConvF32toU64;case Ze:return Ht.ConvF32toF64}break;case Ze:switch(t){case Ce:return Ht.TruncF64toBool;case Pe:return Ht.ConvF64toI32;case Ge:return Ht.ConvF64toU32;case qe:return Ht.ConvF64toI64;case $e:return Ht.ConvF64toU64;case He:return Ht.ConvF64toF32}}return Ht.Invalid}(n.type,t);return this.b.newValue1(r,t,n)}copy(e){return this.b.newValue1(Ht.Copy,e.type,e)}allocTmpName(){let e=this.tmpNames.pop();return e||(this.tmpNameBytes?e=new TmpName(this.tmpNameHash,this.tmpNameBytes):(e=_t("tmp"),this.tmpNameBytes=e.bytes,this.tmpNameHash=e.hash)),e}freeTmpName(e){this.tmpNames.push(e)}opAndAnd(e){const t=this;e.y;let n=t.allocTmpName(),s=t.expr(e.x);t.writeVariable(n,s);let i=s.type,o=t.f.newBlock(h.Plain),a=t.f.newBlock(h.Plain),l=t.endBlock();l.kind=h.If,l.setControl(s),e.op==r.OROR?l.succs=[a,o]:(e.op,r.ANDAND,l.succs=[o,a]),o.preds=[l],t.startSealedBlock(o);let c=t.expr(e.y);t.writeVariable(n,c),(o=t.endBlock()).succs=[a],i.equals(c.type),c.type,a.preds=[l,o],t.startSealedBlock(a);let u=t.readVariable(n,Ce,null);return t.removeVariable(l,n),t.freeTmpName(n),u}funcall(e){const t=this;e.hasDots;let n=[];for(let r of e.args)n.push(t.expr(r));if(t.flags&g.Comments&&e.fun instanceof Ident&&e.fun.ent){let r=e.fun.ent.decl,s=e.fun.toString()+"/";for(let e=0;e<n.length;e++){let i=n[e],o=t.b.newValue1(Ht.CallArg,i.type,i);if(t.flags&g.Comments){let t=r.sig.params[e];t.name&&(o.comment=s+t.name.toString())}}}else for(let e of n)t.b.newValue1(Ht.CallArg,e.type,e);e.fun;let r=e.fun;r.ent;let s=r.type,i=s.result;return s.result,s.result.constructor.name,t.b.newValue0(Ht.Call,i,0,r.value)}readVariable(e,t,n){const r=this;if(n&&n!==r.b){let t=r.defvars[n.id];if(t){let n=t.get(e);if(n)return n}}else{let t=r.vars.get(e);if(t)return t;n=r.b}return r.readVariableRecursive(e,t,n)}removeVariable(e,t){if(e===this.b)return this.vars.delete(t);let n=this.defvars[e.id];return!!n&&n.delete(t)}readGlobal(e){return this.nilValue()}writeVariable(e,t,n){const r=this;if(rn(`${n||r.b} ${e} = ${t.op} ${t}`),n&&n!==r.b){let s=r.defvars[n.id];s?s.set(e,t):r.defvars[n.id]=new Map([[e,t]])}else r.vars.set(e,t);if(!(e instanceof TmpName)){let n=new LocalSlot(e,t.type,0),s=r.f.namedValues.get(n.key());s?s.values.push(t):r.f.namedValues.set(n.key(),{local:n,values:[t]})}}addIncompletePhi(e,t,n){const r=this;let s=r.incompletePhis?r.incompletePhis.get(n):null;s||(s=new Map,r.incompletePhis||(r.incompletePhis=new Map),r.incompletePhis.set(n,s)),s.set(t,e)}readVariableRecursive(e,t,n){const r=this;let s;return n.sealed?1==n.preds.length?(rn(`${n} ${e} common case: single predecessor ${n.preds[0]}`),s=r.readVariable(e,t,n.preds[0])):0==n.preds.length?s=r.readGlobal(e):(s=n.newPhi(t),r.writeVariable(e,s,n),s=r.addPhiOperands(e,s)):(s=n.newPhi(t),r.addIncompletePhi(s,e,n)),r.writeVariable(e,s,n),s}addPhiOperands(e,t){const n=this;t.op,Ht.Phi,t.b.preds.length;for(let r of t.b.preds){let s=n.readVariable(e,t.type,r);s!==t&&(rn(`  ${r} ${s}<${s.op}>`),t.addArg(s))}return t}diag(e,t,n){const r=this;r.diagh&&(r.sfile,r.diagh(r.sfile.position(n),t,e))}}const on=1,an=1e3*on,ln=1e3*an,cn=1e3*ln,un="undefined"!=typeof performance?()=>performance.now()*ln:"undefined"!=typeof process&&process.hrtime?()=>{let e=process.hrtime();return 1e9*e[0]+e[1]}:()=>Date.now()*ln,pn=new WebAssembly.Memory({initial:2,maximum:2}),hn="undefined"!=typeof WebAssembly?new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,11,2,96,0,1,127,96,2,127,127,1,127,2,16,1,3,101,110,118,6,109,101,109,111,114,121,2,1,2,2,3,4,3,0,0,1,7,34,3,6,98,117,102,112,116,114,0,0,7,98,117,102,115,105,122,101,0,1,11,102,109,116,100,117,114,97,116,105,111,110,0,2,10,231,12,3,5,0,65,128,8,11,4,0,65,32,11,217,12,5,2,127,3,126,2,127,1,126,4,127,32,0,173,32,1,173,66,32,134,132,33,4,32,4,66,0,83,33,10,66,0,32,4,125,33,6,32,10,69,4,64,32,4,33,6,11,65,159,8,65,243,0,58,0,0,2,64,32,6,66,128,148,235,220,3,84,4,64,2,64,32,6,66,0,81,4,64,2,64,65,158,8,65,48,58,0,0,65,30,15,11,11,32,6,66,232,7,84,4,64,2,64,65,158,8,65,238,0,58,0,0,65,30,33,2,11,5,2,64,32,6,66,192,132,61,84,4,127,2,127,65,158,8,65,181,127,58,0,0,65,3,33,11,65,30,11,5,2,127,65,158,8,65,237,0,58,0,0,65,6,33,11,65,30,11,11,33,2,32,6,33,4,3,64,32,4,32,4,66,10,128,34,6,66,10,126,125,33,5,32,5,66,0,82,33,8,32,7,32,8,114,33,7,32,7,65,255,1,113,69,33,12,32,2,65,127,106,33,8,32,12,69,4,64,2,64,32,8,65,128,8,106,33,13,32,5,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,13,32,2,58,0,0,32,8,33,2,11,11,32,3,65,1,106,33,3,32,3,32,11,71,4,64,2,64,32,6,33,4,12,2,11,11,11,32,2,65,127,106,33,3,32,12,69,4,64,2,64,32,3,65,128,8,106,33,2,32,2,65,46,58,0,0,32,3,33,2,11,11,32,4,66,10,84,4,64,2,64,32,2,65,127,106,33,2,32,2,65,128,8,106,33,3,32,3,65,48,58,0,0,12,6,11,11,11,11,3,64,32,2,65,127,106,33,2,32,6,32,6,66,10,128,34,4,66,10,126,125,33,5,32,5,167,33,3,32,3,65,48,114,33,3,32,3,65,255,1,113,33,7,32,2,65,128,8,106,33,3,32,3,32,7,58,0,0,32,6,66,10,90,4,64,2,64,32,4,33,6,12,2,11,11,11,11,5,2,64,32,6,32,6,66,10,128,34,4,66,10,126,125,33,5,32,5,66,0,81,4,127,65,31,5,2,127,32,5,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,65,158,8,32,2,58,0,0,65,30,11,11,33,7,32,4,66,10,130,33,4,32,5,32,4,132,33,5,32,5,66,0,81,33,2,32,7,65,127,106,33,3,32,2,4,64,32,7,33,2,5,2,64,32,3,65,128,8,106,33,8,32,4,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,8,32,2,58,0,0,32,3,33,2,32,7,65,126,106,33,3,11,11,32,6,66,228,0,128,33,4,32,4,66,10,130,33,4,32,5,32,4,132,33,5,32,5,66,0,82,4,64,2,64,32,3,65,128,8,106,33,7,32,4,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,7,32,2,58,0,0,32,3,34,2,65,127,106,33,3,11,11,32,6,66,232,7,128,33,4,32,4,66,10,130,33,4,32,5,32,4,132,33,5,32,5,66,0,82,4,64,2,64,32,3,65,128,8,106,33,7,32,4,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,7,32,2,58,0,0,32,3,34,2,65,127,106,33,3,11,11,32,6,66,144,206,0,128,33,4,32,4,66,10,130,33,4,32,5,32,4,132,33,5,32,5,66,0,82,4,64,2,64,32,3,65,128,8,106,33,7,32,4,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,7,32,2,58,0,0,32,3,34,2,65,127,106,33,3,11,11,32,6,66,160,141,6,128,33,4,32,4,66,10,130,33,4,32,5,32,4,132,33,5,32,5,66,0,82,4,64,2,64,32,3,65,128,8,106,33,7,32,4,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,7,32,2,58,0,0,32,3,34,2,65,127,106,33,3,11,11,32,6,66,192,132,61,128,33,4,32,4,66,10,130,33,4,32,5,32,4,132,33,5,32,5,66,0,82,4,64,2,64,32,3,65,128,8,106,33,7,32,4,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,7,32,2,58,0,0,32,3,34,2,65,127,106,33,3,11,11,32,6,66,128,173,226,4,128,33,4,32,4,66,10,130,33,4,32,5,32,4,132,33,9,32,9,66,0,82,4,64,2,64,32,3,65,128,8,106,33,7,32,4,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,7,32,2,58,0,0,32,3,34,2,65,127,106,33,3,11,11,32,6,66,128,194,215,47,128,33,4,32,4,66,10,130,33,5,32,9,32,5,132,33,4,32,4,66,0,82,4,64,2,64,32,3,65,128,8,106,33,7,32,5,167,33,2,32,2,65,48,114,33,2,32,2,65,255,1,113,33,2,32,7,32,2,58,0,0,32,3,65,127,106,33,2,32,2,65,128,8,106,33,3,32,3,65,46,58,0,0,11,11,32,6,66,128,148,235,220,3,128,33,4,32,4,66,60,130,33,4,32,4,66,0,81,4,64,2,64,32,2,65,127,106,33,2,32,2,65,128,8,106,33,3,32,3,65,48,58,0,0,11,5,3,64,32,2,65,127,106,33,2,32,4,32,4,66,10,128,34,5,66,10,126,125,33,9,32,9,167,33,3,32,3,65,48,114,33,3,32,3,65,255,1,113,33,7,32,2,65,128,8,106,33,3,32,3,32,7,58,0,0,32,4,66,10,90,4,64,2,64,32,5,33,4,12,2,11,11,11,11,32,6,66,255,175,157,194,223,1,86,4,64,2,64,32,6,66,128,176,157,194,223,1,128,33,4,32,2,65,127,106,33,3,32,3,65,128,8,106,33,7,32,7,65,237,0,58,0,0,32,4,66,60,130,33,4,32,4,66,0,81,4,64,2,64,32,2,65,126,106,33,2,32,2,65,128,8,106,33,3,32,3,65,48,58,0,0,11,5,2,64,32,3,33,2,3,64,32,2,65,127,106,33,2,32,4,32,4,66,10,128,34,5,66,10,126,125,33,9,32,9,167,33,3,32,3,65,48,114,33,3,32,3,65,255,1,113,33,7,32,2,65,128,8,106,33,3,32,3,32,7,58,0,0,32,4,66,10,90,4,64,2,64,32,5,33,4,12,2,11,11,11,11,11,32,6,66,255,191,226,133,227,232,0,86,4,64,2,64,32,6,66,128,192,226,133,227,232,0,128,33,6,32,2,65,127,106,33,2,32,2,65,128,8,106,33,3,32,3,65,232,0,58,0,0,3,64,32,2,65,127,106,33,2,32,6,32,6,66,10,128,34,4,66,10,126,125,33,5,32,5,167,33,3,32,3,65,48,114,33,3,32,3,65,255,1,113,33,7,32,2,65,128,8,106,33,3,32,3,32,7,58,0,0,32,6,66,10,90,4,64,2,64,32,4,33,6,12,2,11,11,11,11,11,11,11,11,11,11,32,10,69,4,64,32,2,15,11,32,2,65,127,106,33,3,32,3,65,128,8,106,33,2,32,2,65,45,58,0,0,32,3,11])),{env:{memory:pn}}).exports:null,fn=hn?(()=>{let e=hn.bufptr(),t=hn.bufsize(),n=new Uint8Array(pn.buffer);return function(r){let[s,i]=function(e){if(e<=-ne)return[ue._low,ue._high];if(e+1>=ne)return[ce._low,ce._high];if(e<0){let t=(e=-e)%ee|0,n=e/ee|0;if(n==ue._high&&t==ue._low)return[ue._low,ue._high];let r=new SInt64(~t,~n).add(he);return[r._low,r._high]}return[e%ee|0,e/ee|0]}(r),o=hn.fmtduration(s,i);return String.fromCharCode.apply(null,n.subarray(e+o,e+t))}})():e=>`${(e/1e9).toFixed(1)}ms`;function gn(e){return fn(e<on?1:e<an?Math.round(e/(on/100))*(on/100):e<ln?Math.round(e/(an/100))*(an/100):e<cn?Math.round(e/(ln/100))*(ln/100):e)}function dn(e){for(let t of e.blocks)for(let e of t.values)mn(e);for(let t of e.blocks){let e=t.control;e&&e.op===Ht.Copy&&t.setControl(e.args[0])}for(let t of e.namedValues.values()){let e=t.values;for(let t=0;t<e.length;t++){let n=e[t];n.op===Ht.Copy&&(e[t]=n.args[0])}}}function Sn(e){e.op,Ht.Copy,e.args.length;let t=e.args[0],n=t,r=!1;for(;t.op===Ht.Copy;){if((t=t.args[0])===n){t.reset(Ht.Unknown);break}r&&(n=n.args[0]),r=!r}for(;e!=t;){let n=e.args[0];e.setArg(0,t),e=n}return t}function mn(e){for(let t=0;t<e.args.length;t++){let n=e.args[t];n.op===Ht.Copy&&e.setArg(t,Sn(n))}}function yn(e){for(;;){let t=!1;for(let n of e.blocks)for(let e of n.values)mn(e),t=In(e)||t;if(!t)break}}function In(e){if(e.op!==Ht.Phi)return!1;let t=e.args;var n=null;for(let r of t)if(r!==e&&r!==n){if(n)return!1;n=r}return!!n&&(e.op=Ht.Copy,e.setArgs1(n),be(`eliminated phi ${e}`),!0)}function Ln(e){return!1}function vn(e){return!1}const xn=function(...e){};function En(e){e.regAlloc;let t=function(e){let t=new Array(e.numBlocks());t[e.entry.id]=!0;let n=[];for(n.push(e.entry);n.length>0;){let e=n.pop(),r=e.succs;if(r){e.kind==h.First&&(r=r.slice(0,1));for(let e of r)e.id,t.length,t.length,t[e.id]||(t[e.id]=!0,n.push(e))}}return t}(e);xn("reachable blocks:",t.map((e,t)=>e?t:void 0).filter(e=>void 0!==e).join("  "));for(let n of e.blocks){if(t[n.id])continue;let e=n.succs?n.succs.length:0;for(let r=0;r<e;)t[n.succs[r].id]?bn(n,r):r++}for(let n of e.blocks)t[n.id]&&n.kind==h.First&&(bn(n,1),n.kind=h.Plain,n.likely=f.Unknown);dn(e);let n=function(e,t){let n=new Array(e.numBlocks());if(e.regAlloc)return n.fill(!0),n;let r=[];for(let s of e.blocks){if(!t[s.id])continue;let e=s.control;e&&!n[e.id]&&(n[e.id]=!0,r.push(e));for(let e of s.values){let t=Zt[e.op];!t.call&&!t.hasSideEffects||n[e.id]||(n[e.id]=!0,r.push(e)),t.nilCheck&&!n[e.id]&&(n[e.id]=!0,r.push(e))}}for(;r.length>0;){let e=r.pop();for(let s=0;s<e.args.length;s++){let i=e.args[s];(e.op!==Ht.Phi||t[e.b.preds[s].id])&&(n[i.id]||(n[i.id]=!0,r.push(i)))}}return n}(e,t);xn("live values:",Object.keys(n).map(e=>"v"+e).join(", "));let r=new Set;for(let[t,s]of e.namedValues){let i=0;r.clear();for(let e of s.values)n[e.id]&&!r.has(e)&&(s.values[i]=e,i++,r.add(e));if(0==i)e.namedValues.delete(t);else{for(let e=s.values.length-1;e>=i;e--)s.values[e]=void 0;s.values.length=i}}xn("live names':",Array.from(e.namedValues.keys()).join(", "));for(let r of e.blocks){t[r.id]||r.setControl(null);for(let e of r.values)n[e.id]||e.resetArgs()}for(let t of e.blocks){let r=0;for(let s of t.values)n[s.id]?(t.values[r]=s,r++):e.freeValue(s);t.values.length=r}let s=0;for(let n of e.blocks)t[n.id]?(e.blocks[s]=n,s++):(n.values.length>0&&I(`live values in unreachable block ${n}: ${n.values.join(", ")}`),e.freeBlock(n));e.blocks.length=s}function bn(e,t){let n=e.succs[t];e.removeNthSucc(t);let r=n.removePred(e),s=n.preds.length;for(let e of n.values)e.op===Ht.Phi&&(e.args[r].uses--,e.args[r]=e.args[s],e.args.length=s,In(e))}const Rn=UInt64.ZERO,wn=255,On=function(e,t,n=Rn){return{inputs:[].map((e,t)=>({idx:t,regs:e})),outputs:[].map((e,t)=>({idx:t,regs:e})),clobbers:n}}(0,0,Rn);function kn(e){let t="{";for(let n=0;!e.isZero();n++)e.shr(1&n).isZero()||(e=e.and(UInt64.ONE.shl(n).not()),t+=` r${n}`);return"{"==t?"{}":t+" }"}class DesiredState{constructor(e){this.entries=[],this.avoid=Rn,e&&this.copy(e)}toString(){let e="{";return e+=this.entries.map(e=>`v${e.id}[`+e.regs.filter(e=>e!=wn).map(e=>`r${e}`).join(" ")+"]").join(", "),e+="}",this.avoid.isZero()||(e+=`avoid=${kn(this.avoid)}`),e}clear(){this.entries.length=0,this.avoid=Rn}get(e){for(let t of this.entries)if(t.id==e)return t.regs;return[wn,wn,wn,wn]}add(e,t){const n=this;n.avoid=n.avoid.or(UInt64.ONE.shl(t));for(let r of n.entries)if(r.id==e){if(r.regs[0]==t)return;for(let e=1;e<r.regs.length;e++)if(r.regs[e]==t)return r.regs.copyWithin(1,0,e),void(r.regs[0]=t);return r.regs.copyWithin(1,0),void(r.regs[0]=t)}n.entries.push({id:e,regs:[t,wn,wn,wn]})}addList(e,t){for(let n=t.length-1;n>=0;n--){let r=t[n];r!=wn&&this.add(e,r)}}clobber(e){let t=this;for(let n=0;n<t.entries.length;){let r=t.entries[n],s=0;for(let t of r.regs)t!=wn&&e.shr(t).and(UInt64.ONE).isZero()&&(r.regs[s]=t,s++);if(0!=s){for(;s<r.regs.length;s++)r.regs[s]=wn;n++}else t.entries[n]=t.entries[t.entries.length-1],t.entries.splice(t.entries.length-1,1)}t.avoid=t.avoid.and(e.not())}copy(e){this.entries.splice(0,this.entries.length,...e.entries),this.avoid=e.avoid}remove(e){for(let t of this.entries)if(t.id==e){let e=t.regs,n=this.entries.length-1;return t=this.entries[n],this.entries.splice(n,1),e}return[wn,wn,wn,wn]}merge(e){this.avoid=this.avoid.or(e.avoid);for(let t of e.entries)this.addList(t.id,t.regs)}}class IntGraph{constructor(){this.nodes=[],this.length=0}copy(){let e=new IntGraph;e.length=this.length,e.nodes=[];for(let t=0;t<this.nodes.length;t++){let n=this.nodes[t];void 0!==n&&(e.nodes[t]=new Set(n))}return e}has(e){return!!this.nodes[e]}add(e){this.nodes[e]||(this.nodes[e]=new Set,this.length++)}remove(e){let t=this.nodes[e];if(t){for(let n of t)this.nodes[n].delete(e);this.nodes[e]=void 0,this.length--}}connect(e,t){let n=this.nodes[e];n?n.add(t):(this.nodes[e]=new Set([t]),this.length++),(n=this.nodes[t])?n.add(e):(this.nodes[t]=new Set([e]),this.length++)}connected(e,t){let n=this.nodes[e];return n&&n.has(t)}disconnect(e,t){let n=this.nodes[e];n&&n.delete(t),(n=this.nodes[t])&&n.delete(e)}edges(e){return this.nodes[e]}degree(e){return this.nodes[e].size}any(){for(let e=0;e<this.nodes.length;e++)if(void 0!==this.nodes[e])return e}keys(){let e=[];for(let t=0;t<this.nodes.length;t++)void 0!==this.nodes[t]&&e.push(t);return e}fmt(){let e=new Set;for(let t in this.nodes){let n=t,r=this.edges(n);if(r)if(r.size>0)for(let t of r)n<t?e.add(`${n} -- ${t}`):e.add(`${t} -- ${n}`);else e.add(`${n}`)}return Array.from(e).join("\n")}}const An=function(...e){},Tn=new Map;let Nn=null;const Un=1,_n=10,Cn=100,Fn=64,Bn=255;function Mn(e){return e.popcnt()}function Dn(e){e.isZero()&&I("can't pick a register from an empty set");for(let t=0;;t++){if(!e.and(UInt64.ONE).isZero())return t;e=e.shr(1)}}class ValState{constructor(e){this.regs=Rn,this.needReg=!1,this.rematerializeable=!1,this.mindist=0,this.maxdist=0,this.v=e}}function Gn(e){e.size;let t=e[Symbol.iterator]().next().value;return e.delete(t),t}function Pn(e,t){return{name:e,fn:t,required:!1}}function $n(e,t){return{name:e,fn:t,required:!0}}const qn=[Pn("early phielim",yn),Pn("early copyelim",dn),Pn("early deadcode",En),Pn("short circuit",function(e){let t,n=null,r=null;for(let t of e.blocks)for(let s of t.values)if(s.op===Ht.Phi&&s.type===Ce)for(let i=0;i<s.args.length;i++){let o=t.preds[i];if(o.kind!=h.If)continue;let a=s.args[i];o.control===a&&(0==o.succs.indexOf(t)?(n||(n=e.constBool(!0)),s.setArg(i,n)):(r||(r=e.constBool(!1)),s.setArg(i,r)))}const s=()=>{let t=new Array(e.numValues());for(let n of e.blocks){for(let e of n.values)for(let n of e.args)n.b!==e.b&&(t[n.id]=!0);n.control&&n.control.b!==n&&(t[n.control.id]=!0)}return t};for(let n of e.blocks){if(n.kind!=h.If)continue;if(1!=n.values.length)continue;let e=n.values[0];if(e.op===Ht.Phi&&n.control===e&&(t||(t=s()),!t[e.id]))for(let t=0;t<e.args.length;t++){let r=e.args[t];if(r.op!==Ht.ConstBool)continue;let s=n.preds[t],i=s.succs.indexOf(n);r.auxInt;let o=n.succs[1-r.auxInt],a=o.preds.indexOf(n);n.removeNthPred(t);let l=n.preds.length;e.args[t].uses--,e.args[t]=e.args[l],e.args.length=l,s.succs[i]=o,o.preds.push(s);for(let e of o.values)e.op===Ht.Phi&&e.addArg(e.args[a]);if(1==n.preds.length){e.op=Ht.Copy;break}t--}}}),$n("generic deadcode",En),$n("lower",function(e,t){(t.lowerBlock||t.lowerValue)&&function(e,t,n){for(;;){let r=!1;for(let s of e.blocks){if(s.control&&s.control.op===Ht.Copy)for(;s.control.op===Ht.Copy;)s.control,s.control.args[0],s.setControl(s.control.args[0]);t(s)&&(r=!0);for(let e=0;e<s.values.length;e++){let t=s.values[e];r=In(t)||r;for(let e=0;e<t.args.length;e++){let n=t.args[e];if(n.op!==Ht.Copy)continue;let s=Sn(n);for(t.setArg(e,s),r=!0;0==n.uses;){let e=n.args[0];n.reset(Ht.Invalid),n=e}}r=n(t)||r}}if(!r)break}for(let t of e.blocks){let n=0;for(let r=0;r<t.values.length;r++){let s=t.values[r];s.op!==Ht.Invalid?(r!=n&&(t.values[n]=s),n++):e.freeValue(s)}t.values.length=n}}(e,t.lowerBlock||Ln,t.lowerValue||vn)}),$n("lowered deadcode",En),Pn("late phielim",yn),Pn("late copyelim",dn),Pn("late deadcode",En),$n("layout",function(e){e.blocks=function(e){const t=e.numBlocks();let n=new Array(t),r=new Array(t),s=new Array(t),i=new Array(t),o=new Set,a=new Set,l=new Set;for(let t of e.blocks){if(s[t.id]=t,t.kind==h.Ret){l.add(t.id);continue}let e=t.preds.length;i[t.id]=e,0==e?a.add(t.id):o.add(t.id)}let c=e.entry.id,u=0;e:for(;;){let p,g=s[c];if(n[u++]=g,r[c]=!0,u==e.blocks.length)break;for(let e of g.succs)i[e.id]--,0==i[e.id]&&(o.delete(e.id),a.add(e.id));switch(g.likely){case f.Likely:p=g.succs[0];break;case f.Unlikely:p=g.succs[1]}if(p&&!r[p.id]){c=p.id;continue}c=0;let d=t,S=n[u-1];for(let e of S.succs)r[e.id]||e.kind==h.Ret||i[e.id]<d&&(d=i[e.id],c=e.id);if(0==c){for(;a.size>0;){let e=Gn(a);if(!r[e]){c=e;continue e}}for(;o.size>0;){let e=Gn(o);if(!r[e]){c=e;continue e}}for(;;){let e=Gn(l);if(!r[e]){c=e;continue e}}}}return n[0],e.entry,n.length=u,n}(e)}),$n("regalloc",function(e,t){Nn&&Nn.config===t||(Nn=Tn.get(t)||null)||(Nn=new class RegAllocator{constructor(e){this.addrtype=Ge,this.visitOrder=[],this.values=[],this.gpSpillReg=-1,this.live=[],this.desired=[];const t=this;this.config=e,this.addrtype=Qe(e.addrSize)[1],this.addrsize=e.addrSize,this.registers=e.registers,this.numregs=e.registers.length,(0==t.numregs||t.numregs>Fn)&&I(`invalid number of registers: ${t.numregs}`),this.SPReg=Bn,this.SBReg=Bn,this.GReg=Bn;for(let n=0;n<t.numregs;n++)switch(t.registers[n].name){case"SP":t.SPReg=n;break;case"SB":t.SBReg=n;break;case"g":e.hasGReg&&(t.GReg=n)}t.SPReg==Bn&&I("no SP register found"),t.SBReg==Bn&&I("no SB register found"),e.hasGReg&&t.GReg==Bn&&I("no g register found"),this.allocatable=e.gpRegMask.or(e.fpRegMask.or(e.specialRegMask)),this.allocatable=this.allocatable.and(UInt64.ONE.shl(t.SPReg).not()),this.allocatable=this.allocatable.and(UInt64.ONE.shl(t.SBReg).not()),e.hasGReg&&(this.allocatable=this.allocatable.and(UInt64.ONE.shl(t.GReg).not()))}regallocFun(e){const t=this;t.f=e,t.gpSpillReg=-1,e.regAlloc,e.regAlloc=new Array(e.numValues());const n=e.newValue(e.entry,Ht.SP,t.addrtype,0,null);n.reg=t.registers[this.SPReg],e.entry.pushValueFront(n),t.visitOrder=e.blocks,t.values=new Array(e.numValues());for(let e of t.visitOrder)for(let r of e.values){let e=r.type,s=new ValState(r);t.values[r.id]=s,e.mem>0&&!e.isTuple()&&r!==n&&(s.needReg=!0,s.rematerializeable=r.rematerializeable())}if(t.computeLive(),An("\nlive values at end of each block\n"+t.fmtLive()),S)for(let e of t.values)e&&An(`  v${e.v.id} - `+[["needReg",e.needReg],["mindist",e.mindist],["maxdist",e.maxdist]].map(e=>e.join(": ")).join(", "));let r=t.buildInterferenceGraph();if(S){let e=r.fmt();encodeURIComponent(e.trim().split(/[\r\n]+/).map(e=>e.trim()).join("\n")).replace(/\%20/g,"+")}let s=t.pickValues(r);if(s.length){An("spills:",0==s.length?"(none)":s.reverse().map(e=>`v${e}`).join(" "));let e=new Map;for(let n of t.visitOrder){if(n.control){let t=e.get(n.control);t?t.add(n):e.set(n.control,new Set([n]))}for(let t of n.values)for(let n of t.args){let r=e.get(n);r?r.add(t):e.set(n,new Set([t]))}}for(let n of s){let r=t.values[n].v,s=e.get(r);if(s)for(let e of s)if(e instanceof Value){let n=e.b.f.newValue(e.b,Ht.LoadReg,r.type,0,null);n.addArg(r),n.reg=t.registers[t.gpSpillReg];let s=e.b.values.indexOf(e);e.b.values.splice(s,0,n);let i=e.args.indexOf(r);e.setArg(i,n)}}}}reserveGpSpillReg(e){this.gpSpillReg=e,An(`reserved spill register ${this.registers[e].name}`)}pickValues(e){const t=this;let n=Mn(this.config.gpRegMask),r=Mn(this.config.fpRegMask);n=4,r=4;let s=[],i=e.keys();i.sort((t,n)=>e.degree(t)-e.degree(n));let o=!1;e:for(;;){for(let t=0;t<i.length;t++){let r=i[t],o=e.edges(r);if(o.size<n){An(`pick v${r} with degree ${o.size} < R`),i.splice(t,1),e.remove(r),s.push({id:r,edges:o});continue e}}if(0==e.length)break;let t=i.shift(),r=e.edges(t);An(`pick v${t} with degree ${r.size} >= R (may spill)`),e.remove(t),s.push({id:t,edges:r}),o=!0}if(An("valstack:",s.map(e=>`v${e.id}`).join(" ")),o){o=!1;let e=-1,t=new Map;e:for(let r=s.length;r>0;){let i=s[--r];e=(e+1)%n;let a=n;for(;a--;){for(let n of i.edges){let r=t.get(n);if(-1!=r&&r==e){o=!0;break e}}break}t.set(i.id,e)}}o&&this.reserveGpSpillReg(--n);let a=[],l=-1;for(let r=s.length;r>0;){let i=s[--r];l=(l+1)%n;let o=n,c=!0;e:for(;o--;){for(let e of i.edges){let r=t.values[e].v.reg;if(r&&r.num==l){l=(l+1)%n;continue e}}c=!1;break}if(c){l=Bn;let e=t.values[i.id].v;if(1==e.uses&&e.b.control===e){let n=e.b.values.indexOf(e);if(e.b.values,n==e.b.values.length-1)l=t.gpSpillReg;else{let r=t.live[e.b.id];if(r){let s=e.args.length;e:for(let t of e.args)for(let e of r)if(e.id==t.id&&0==--s)break e;0==s&&(e.b.values.splice(n,1),e.b.values.push(e),l=t.gpSpillReg)}}}if(l==Bn){t.gpSpillReg,a.push(i.id),e.b;let n=e.clone();n.reg=t.registers[t.gpSpillReg],e.reset(Ht.StoreReg),e.addArg(n),e.b.insertValue(e,n)}}An(`pop v${i.id}`,`${l==Bn?"spill":t.registers[l].name} edges:`,Array.from(i.edges).map(e=>`v${e}`).join(" ")),e.add(i.id);for(let t of i.edges)e.connect(i.id,t);if(l!=Bn){let e=t.values[i.id];e.needReg,i.id,e.v.reg=t.registers[l]}else t.values[i.id].v.reg,i.id}return a}buildInterferenceGraph(){const e=this,t=e.f;let n=new IntGraph;for(let r,s=t.blocks.length;r=t.blocks[--s];){let t=new Set,s=e.live[r.id];if(s)for(let e of s)t.add(e.id);for(let e=r.values.length-1;e>=0;--e){let s=r.values[e];if(0==n.length)t.size,n.add(s.id);else if(t.delete(s.id),s.op!=Ht.Copy)for(let e of t)n.connect(s.id,e);for(let e of s.args)t.add(e.id)}}return n}regspec(e){return Zt[e].reg||On}computeLive(){const e=this,t=e.f;e.live=new Array(t.numBlocks()),e.desired=new Array(t.numBlocks());let n=[],r=new Map,s=new Map,i=new DesiredState,o=t.postorder();for(;;){let t=!1;for(let a of o){r.clear();let o=e.live[a.id];if(o)for(let e of o)r.set(e.id,{val:e.dist+a.values.length,pos:e.pos});a.control&&e.values[a.control.id].needReg&&r.set(a.control.id,{val:a.values.length,pos:a.pos}),n=[];for(let t=a.values.length-1;t>=0;t--){let s=a.values[t],i=r.get(s.id);if(i&&(e.values[s.id].maxdist=i.val,r.delete(s.id)),s.op!==Ht.Phi){if(Zt[s.op].call)for(let e of r.values())e.val+=Cn;for(let n of s.args)e.values[n.id].needReg&&r.set(n.id,{val:t,pos:s.pos})}else n.push(s)}let l=e.desired[a.id];l?i.copy(l):i.clear();for(let t=a.values.length-1;t>=0;t--){let n=a.values[t],r=i.remove(n.id);if(n.op===Ht.Phi)continue;let s=e.regspec(n.op);i.clobber(s.clobbers);for(let e of s.inputs)1==Mn(e.regs)&&(i.clobber(e.regs),i.add(n.args[e.idx].id,Dn(e.regs)));Zt[n.op].resultInArg0&&(Zt[n.op].commutative&&i.addList(n.args[1].id,r),i.addList(n.args[0].id,r))}for(let o=0;o<a.preds.length;o++){let l=a.preds[o],c=_n;2==l.succs.length&&(l.succs[0]==a&&l.likely==f.Likely||l.succs[1]==a&&l.likely==f.Unlikely?c=Un:(l.succs[0]==a&&l.likely==f.Unlikely||l.succs[1]==a&&l.likely==f.Likely)&&(c=Cn));let u=e.desired[l.id];u?u.merge(i):e.desired[l.id]=new DesiredState(i),s.clear();let p=e.live[l.id];if(p)for(let e of p)s.set(e.id,{val:e.dist,pos:e.pos});let h=!1;for(let[e,t]of r){let n=t.val+c,r=s.get(e);(!r||n<r.val)&&(h=!0,s.set(e,{val:n,pos:t.pos}))}for(let t of n){let n=t.args[o].id;if(e.values[n].needReg){let e=s.get(n);(!e||c<e.val)&&(h=!0,s.set(n,{val:c,pos:t.pos}))}}if(!h)continue;let g=new Array(s.size),d=0;for(let[e,t]of s)g[d++]={id:e,dist:t.val,pos:t.pos};e.live[l.id]=g,t=!0}}if(!t)break}}fmtLive(){const e=this;let t="";for(let n of e.f.blocks){t+=`  ${n}:`;let r=e.live[n.id];if(r)for(let s of r){t+=`  v${s.id}`;let r=e.desired[n.id];if(r)for(let n of r.entries){if(n.id!=s.id)continue;t+="[";let r=!0;for(let s of n.regs){if(s==Bn)continue;r||(t+=",");let n=e.registers[s];t+=`${n.name}#${n.num}`,r=!1}t+="]"}}if(e.desired[n.id]){let r=e.desired[n.id].avoid;r.isZero()||(t+=" avoid="+kn(r))}t+="\n"}return t.trimRight()}}(t),Tn.set(t,Nn)),Nn.regallocFun(e)})];function zn(e,t,n,r){let s=0;for(let i of qn){if(i.name==n)break;if(t.optimize||i.required){console.log(`running pass ${i.name}`);let n=un();i.fn(e,t),s+=n=un()-n,console.log(`pass ${i.name} finished in ${gn(n)}`),r&&r(i)}}console.log(`passes over ${e.name} finished in a total ${gn(s)}`)}const Vn=4;class Instr{constructor(){this.link=null}}class Program{constructor(e,t){this.pc=0,this.f=e,this.c=t,this.pos=e.pos,this.cache=[],this.cachei=0,this.next=this.newInstr()}newInstr(){const e=this;let t=e.cache.pop();return t||(t=new Instr),t.asm=Vn,t.pc=e.pc,e.pc++,t}instr(e){const t=this;let n=t.next;return t.next=t.newInstr(),n.link=t.next,n.asm=e,n.pos=t.pos,n}gen(){const e=this,n=e.f;let r=kt;for(let e of n.entry.values)if(e.pos!=kt){r=e.pos;break}be(`firstPos: ${t(r)}`);for(let t=0;t<n.blocks.length;t++){let r=n.blocks[t];for(let t of r.values)e.next}be("prog gen")}}function Yn(e){let t=e.args[0],n=e.args[1];return e.reset(Ht.CovmADD32),e.addArg(t),e.addArg(n),!0}d={add(e,t){if("number"==typeof e){if("number"==typeof t)return e+t;e=SInt64.fromInt32(e)}return e.add(t)},sub(e,t){if("number"==typeof e){if("number"==typeof t)return e-t;e=SInt64.fromInt32(e)}return e.sub(t)},mul(e,t){if("number"==typeof e){if("number"==typeof t)return e*t;e=SInt64.fromInt32(e)}return e.mul(t)},div(e,t){if("number"==typeof e){if("number"==typeof t)return e/t;e=SInt64.fromInt32(e)}return e.div(t)},mod(e,t){if("number"==typeof e){if("number"==typeof t)return e%t;e=SInt64.fromInt32(e)}return e.mod(t)},band(e,t){if("number"==typeof e){if("number"==typeof t)return e&t;e=SInt64.fromInt32(e)}return e.and(t)},bor(e,t){if("number"==typeof e){if("number"==typeof t)return e|t;e=SInt64.fromInt32(e)}return e.or(t)},xor(e,t){if("number"==typeof e){if("number"==typeof t)return e^t;e=SInt64.fromInt32(e)}return e.xor(t)},lshift:(e,t)=>("number"!=typeof t&&(t=t.toUInt32()),"number"==typeof e?e<<t:e.shl(t)),rshift:(e,t)=>("number"!=typeof t&&(t=t.toUInt32()),"number"==typeof e?e>>t:e.shr(t)),rshiftz:(e,t)=>("number"!=typeof t&&(t=t.toUInt32()),"number"==typeof e?e>>>t:e.shr_u(t)),lt(e,t){let n=t instanceof SInt64||t instanceof UInt64;if("number"==typeof e){if("number"==typeof t)return e<t;n&&(e=SInt64.fromInt32(e))}return(e instanceof SInt64||e instanceof UInt64)&&n?e.lt(t):e<t},gt(e,t){let n=t instanceof SInt64||t instanceof UInt64;if("number"==typeof e){if("number"==typeof t)return e>t;n&&(e=SInt64.fromInt32(e))}return(e instanceof SInt64||e instanceof UInt64)&&n?e.gt(t):e>t},lte(e,t){let n=t instanceof SInt64||t instanceof UInt64;if("number"==typeof e){if("number"==typeof t)return e<=t;n&&(e=SInt64.fromInt32(e))}return(e instanceof SInt64||e instanceof UInt64)&&n?e.lte(t):e<=t},gte(e,t){let n=t instanceof SInt64||t instanceof UInt64;if("number"==typeof e){if("number"==typeof t)return e>=t;n&&(e=SInt64.fromInt32(e))}return(e instanceof SInt64||e instanceof UInt64)&&n?e.gte(t):e>=t},neq(e,t){let n=t instanceof SInt64||t instanceof UInt64;if("number"==typeof e){if("number"==typeof t)return e!=t;n&&(e=SInt64.fromInt32(e))}return(e instanceof SInt64||e instanceof UInt64)&&n?e.neq(t):e!==t},eq(e,t){let n=t instanceof SInt64||t instanceof UInt64;if("number"==typeof e){if("number"==typeof t)return e==t;n&&(e=SInt64.fromInt32(e))}return(e instanceof SInt64||e instanceof UInt64)&&n?e.eq(t):e===t},incr:e=>"number"==typeof e?++e:e.add(UInt64.ONE),decr:e=>"number"==typeof e?--e:e.sub(UInt64.ONE),neg:e=>"number"==typeof e?-e:e.neg(),bnot:e=>"number"==typeof e?~e:e.not(),not:e=>"number"==typeof e?!e:e.isZero()};const Wn=new Array(8);Wn[Ht.NilCheck]=function(e){return e.op=Ht.CovmLowNilCheck,!0},Wn[Ht.MulI32]=function(e){return e.op=Ht.CovmMUL32,!0},Wn[Ht.AddI32]=Yn,Wn[Ht.AddI16]=Yn,Wn[Ht.AddI8]=Yn,Wn[Ht.AddI64]=function(e){return e.op=Ht.CovmADD64,!0},Wn[Ht.CovmADD64]=function(e){for(;;){let t=e.args[0];if(t.op!=Ht.ConstI64)break;let n=t.auxInt,r=e.args[1];if(r.op!=Ht.ConstI64)break;let s=r.auxInt;return e.reset(Ht.ConstI64),e.auxInt=d.add(n,s),!0}return!1},Wn[Ht.CovmADD32]=function(e){for(;;){let t=e.args[0];if(t.op!=Ht.ConstI32)break;let n=t.auxInt,r=e.args[1];if(r.op!=Ht.ConstI32)break;let s=r.auxInt;return e.reset(Ht.ConstI32),e.auxInt=d.add(n,s),!0}return!1};const Hn=new UInt64(65535,0),Zn=new UInt64(-65536,0),jn=new Map([["generic",{arch:"generic",addrSize:4,regSize:4,intSize:4,registers:[],hasGReg:!1,gpRegMask:UInt64.ZERO,fpRegMask:UInt64.ZERO}],["covm",{arch:"covm",addrSize:4,regSize:4,intSize:4,registers:[{num:0,name:"R0"},{num:1,name:"R1"},{num:2,name:"R2"},{num:3,name:"R3"},{num:4,name:"R4"},{num:5,name:"R5"},{num:6,name:"R6"},{num:7,name:"R7"},{num:8,name:"R8"},{num:9,name:"R9"},{num:10,name:"R10"},{num:11,name:"R11"},{num:12,name:"R12"},{num:13,name:"R13"},{num:14,name:"R14"},{num:15,name:"R15"},{num:16,name:"F0"},{num:17,name:"F1"},{num:18,name:"F2"},{num:19,name:"F3"},{num:20,name:"F4"},{num:21,name:"F5"},{num:22,name:"F6"},{num:23,name:"F7"},{num:24,name:"F8"},{num:25,name:"F9"},{num:26,name:"F10"},{num:27,name:"F11"},{num:28,name:"F12"},{num:29,name:"F13"},{num:30,name:"F14"},{num:31,name:"F15"},{num:32,name:"SP"},{num:33,name:"g"},{num:34,name:"SB"}],hasGReg:!0,gpRegMask:Hn,fpRegMask:Zn,lowerValue:function(e){let t=Wn[e.op];return!!t&&t(e)}}]]);class Config{constructor(e,n){this.arch="?",this.optimize=!1,this.addrSize=4,this.regSize=4,this.intSize=4,this.registers=[],this.hasGReg=!1,this.gpRegMask=Rn,this.fpRegMask=Rn,this.specialRegMask=Rn,this.lowerBlock=void 0,this.lowerValue=void 0;let r=jn.get(e);r||I(`unknown architecture ${t(e)}`);for(let e of Object.keys(r))this[e]=r[e];if(n)for(let e of Object.keys(n))e in this||I(`invalid config property ${e}`),this[e]=n[e]}toString(){return`${this.arch}/${8*this.addrSize}/${this.optimize?"opt":"debug"}`}}const Xn="undefined"!=typeof WebAssembly?new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,9,2,96,0,1,127,96,1,127,0,3,4,3,0,1,0,6,16,3,126,1,66,1,11,126,1,66,2,11,127,1,65,0,11,7,37,3,8,103,101,116,95,104,105,103,104,0,0,4,115,101,101,100,0,1,15,120,111,114,115,104,105,102,116,49,50,56,112,108,117,115,0,2,10,110,3,4,0,35,2,11,15,0,32,0,173,36,0,32,0,173,66,1,124,36,1,11,87,1,4,126,35,0,33,0,35,1,33,1,32,1,36,0,32,0,66,23,134,33,2,32,2,32,0,133,33,0,32,0,66,17,136,33,2,32,1,66,26,136,33,3,32,0,32,1,133,33,0,32,0,32,3,133,33,0,32,0,32,2,133,33,0,32,0,36,1,32,0,32,1,124,33,1,32,1,66,32,135,167,36,2,32,1,167,11])),{}).exports:null;let Qn=1,Kn=2;function Jn(e){for(let t=0;t<e.length;++t)e[t]=4294967295&e[t];return e}function er(e){return e.trim().split(/\s+/).map(e=>Number(e)>>>0)}(null!==Xn?Xn.seed:e=>{Qn=0|e,Kn=e+1|0})(4294967295*Math.random()>>>0),SInt64.prototype._js_mul,SInt64.prototype._js_div,UInt64.prototype._js_div,SInt64.prototype._js_mod,SInt64.prototype._js_popcnt,Jn([2147483648,0,3078018549,1446306523,4293918719,4294967295,4293918720,0,4294901759,4294967295,4294901760,0,4294967294,4294967295,4294967295,0,4294967295,4278190079,4294967295,4278190080,4294967295,4294901759,4294967295,4294901760,4294967295,4294934527,4294967295,4294934528,4294967295,4294967294,4294967295,4294967295,0,0,0,1,0,2,0,32767,0,32768,0,65535,0,65536,0,16777215,0,16777216,0,1446306523,0,3078018549,0,4294967295,1,0,65535,4294967295,65536,0,1048575,4294967295,1048576,0,1446306523,3078018549,2147483647,4294967295]),Jn([930534901,1446306523,2146435071,4294967295,3076969973,1446306522,2146435072,0,3076969973,1446306523,4292870143,4294967295,2147418111,4294967295,3077953013,1446306522,4293853183,4294967294,4293853183,4294967295,2147418112,0,3077953013,1446306523,4293853183,4294967295,4293853184,0,4294836223,4294967295,2147483646,4294967295,3078018548,1446306522,4293918718,4294967294,4293918718,4294967295,4294901758,4294967294,4294901758,4294967295,2147483647,0,3078018548,1446306523,4293918718,4294967295,4293918719,0,4294901758,4294967295,4294901759,0,4294967293,4294967295,2147483647,4278190079,3078018549,1429529306,4293918719,4278190078,4293918719,4278190079,4294901759,4278190078,4294901759,4278190079,4294967294,4278190078,4294967294,4278190079,2147483647,4278190080,3078018549,1429529307,4293918719,4278190079,4293918719,4278190080,4294901759,4278190079,4294901759,4278190080,4294967294,4278190079,4294967294,4278190080,4294967295,4261412863,2147483647,4294901759,3078018549,1446240986,4293918719,4294901758,4293918719,4294901759,4294901759,4294901758,4294901759,4294901759,4294967294,4294901758,4294967294,4294901759,4294967295,4278124542,4294967295,4278124543,2147483647,4294901760,3078018549,1446240987,4293918719,4294901759,4293918719,4294901760,4294901759,4294901759,4294901759,4294901760,4294967294,4294901759,4294967294,4294901760,4294967295,4278124543,4294967295,4278124544,4294967295,4294836223,2147483647,4294934527,3078018549,1446273754,4293918719,4294934526,4293918719,4294934527,4294901759,4294934526,4294901759,4294934527,4294967294,4294934526,4294967294,4294934527,4294967295,4278157310,4294967295,4278157311,4294967295,4294868990,4294967295,4294868991,2147483647,4294934528,3078018549,1446273755,4293918719,4294934527,4293918719,4294934528,4294901759,4294934527,4294901759,4294934528,4294967294,4294934527,4294967294,4294934528,4294967295,4278157311,4294967295,4278157312,4294967295,4294868991,4294967295,4294868992,4294967295,4294901759,2147483647,4294967294,3078018549,1446306521,4293918719,4294967293,4293918719,4294967294,4294901759,4294967293,4294901759,4294967294,4294967294,4294967293,4294967294,4294967294,4294967295,4278190077,4294967295,4278190078,4294967295,4294901757,4294967295,4294901758,4294967295,4294934525,4294967295,4294934526,2147483647,4294967295,3078018549,1446306522,4293918719,4294967294,4293918719,4294967295,4294901759,4294967294,4294901759,4294967295,4294967294,4294967294,4294967294,4294967295,4294967295,4278190078,4294967295,4278190079,4294967295,4294901758,4294967295,4294901759,4294967295,4294934526,4294967295,4294934527,4294967295,4294967293,2147483648,0,3078018549,1446306523,4293918719,4294967295,4293918720,0,4294901759,4294967295,4294901760,0,4294967294,4294967295,4294967295,0,4294967295,4278190079,4294967295,4278190080,4294967295,4294901759,4294967295,4294901760,4294967295,4294934527,4294967295,4294934528,4294967295,4294967294,4294967295,4294967295,2147483648,1,3078018549,1446306524,4293918720,0,4293918720,1,4294901760,0,4294901760,1,4294967295,0,4294967295,1,4294967295,4278190080,4294967295,4278190081,4294967295,4294901760,4294967295,4294901761,4294967295,4294934528,4294967295,4294934529,4294967295,4294967295,0,0,0,1,2147483648,2,3078018549,1446306525,4293918720,1,4293918720,2,4294901760,1,4294901760,2,4294967295,1,4294967295,2,4294967295,4278190081,4294967295,4278190082,4294967295,4294901761,4294967295,4294901762,4294967295,4294934529,4294967295,4294934530,0,0,0,1,0,2,0,3,2147483648,32767,3078018549,1446339290,4293918720,32766,4293918720,32767,4294901760,32766,4294901760,32767,4294967295,32766,4294967295,32767,4294967295,4278222846,4294967295,4278222847,4294967295,4294934526,4294967295,4294934527,4294967295,4294967294,4294967295,4294967295,0,32765,0,32766,0,32767,0,32768,0,32769,2147483648,32768,3078018549,1446339291,4293918720,32767,4293918720,32768,4294901760,32767,4294901760,32768,4294967295,32767,4294967295,32768,4294967295,4278222847,4294967295,4278222848,4294967295,4294934527,4294967295,4294934528,4294967295,4294967295,0,0,0,32766,0,32767,0,32768,0,32769,0,32770,0,65535,2147483648,65535,3078018549,1446372058,4293918720,65534,4293918720,65535,4294901760,65534,4294901760,65535,4294967295,65534,4294967295,65535,4294967295,4278255614,4294967295,4278255615,4294967295,4294967294,4294967295,4294967295,0,32766,0,32767,0,65533,0,65534,0,65535,0,65536,0,65537,0,98302,0,98303,2147483648,65536,3078018549,1446372059,4293918720,65535,4293918720,65536,4294901760,65535,4294901760,65536,4294967295,65535,4294967295,65536,4294967295,4278255615,4294967295,4278255616,4294967295,4294967295,0,0,0,32767,0,32768,0,65534,0,65535,0,65536,0,65537,0,65538,0,98303,0,98304,0,131071,2147483648,16777215,3078018549,1463083738,4293918720,16777214,4293918720,16777215,4294901760,16777214,4294901760,16777215,4294967295,16777214,4294967295,16777215,4294967295,4294967294,4294967295,4294967295,0,16711678,0,16711679,0,16744446,0,16744447,0,16777213,0,16777214,0,16777215,0,16777216,0,16777217,0,16809982,0,16809983,0,16842750,0,16842751,2147483648,16777216,3078018549,1463083739,4293918720,16777215,4293918720,16777216,4294901760,16777215,4294901760,16777216,4294967295,16777215,4294967295,16777216,4294967295,4294967295,0,0,0,16711679,0,16711680,0,16744447,0,16744448,0,16777214,0,16777215,0,16777216,0,16777217,0,16777218,0,16809983,0,16809984,0,16842751,0,16842752,0,33554431,2147483648,1446306523,3078018549,2892613046,4293918720,1446306522,4293918720,1446306523,4294901760,1446306522,4294901760,1446306523,4294967295,1446306522,4294967295,1446306523,0,1429529306,0,1429529307,0,1446240986,0,1446240987,0,1446273754,0,1446273755,0,1446306521,0,1446306522,0,1446306523,0,1446306524,0,1446306525,0,1446339290,0,1446339291,0,1446372058,0,1446372059,0,1463083738,0,1463083739,2147483648,3078018549,3078018550,229357776,4293918720,3078018548,4293918720,3078018549,4294901760,3078018548,4294901760,3078018549,4294967295,3078018548,4294967295,3078018549,0,3061241332,0,3061241333,0,3077953012,0,3077953013,0,3077985780,0,3077985781,0,3078018547,0,3078018548,0,3078018549,0,3078018550,0,3078018551,0,3078051316,0,3078051317,0,3078084084,0,3078084085,0,3094795764,0,3094795765,1,229357776,2147483648,4294967295,3078018550,1446306522,4293918720,4294967294,4293918720,4294967295,4294901760,4294967294,4294901760,4294967295,4294967295,4294967294,4294967295,4294967295,0,4278190078,0,4278190079,0,4294901758,0,4294901759,0,4294934526,0,4294934527,0,4294967293,0,4294967294,0,4294967295,1,0,1,1,1,32766,1,32767,1,65534,1,65535,1,16777214,1,16777215,1,1446306522,1,3078018548,2147483649,0,3078018550,1446306523,4293918720,4294967295,4293918721,0,4294901760,4294967295,4294901761,0,4294967295,4294967295,0,0,0,4278190079,0,4278190080,0,4294901759,0,4294901760,0,4294934527,0,4294934528,0,4294967294,0,4294967295,1,0,1,1,1,2,1,32767,1,32768,1,65535,1,65536,1,16777215,1,16777216,1,1446306523,1,3078018549,1,4294967295,2147549183,4294967295,3078084085,1446306522,4293984255,4294967294,4293984255,4294967295,4294967295,4294967294,4294967295,4294967295,65534,4294967294,65534,4294967295,65535,4278190078,65535,4278190079,65535,4294901758,65535,4294901759,65535,4294934526,65535,4294934527,65535,4294967293,65535,4294967294,65535,4294967295,65536,0,65536,1,65536,32766,65536,32767,65536,65534,65536,65535,65536,16777214,65536,16777215,65536,1446306522,65536,3078018548,65536,4294967294,65536,4294967295,2147549184,0,3078084085,1446306523,4293984255,4294967295,4293984256,0,4294967295,4294967295,0,0,65534,4294967295,65535,0,65535,4278190079,65535,4278190080,65535,4294901759,65535,4294901760,65535,4294934527,65535,4294934528,65535,4294967294,65535,4294967295,65536,0,65536,1,65536,2,65536,32767,65536,32768,65536,65535,65536,65536,65536,16777215,65536,16777216,65536,1446306523,65536,3078018549,65536,4294967295,65537,0,131071,4294967295,2148532223,4294967295,3079067125,1446306522,4294967295,4294967294,4294967295,4294967295,983039,4294967294,983039,4294967295,1048574,4294967294,1048574,4294967295,1048575,4278190078,1048575,4278190079,1048575,4294901758,1048575,4294901759,1048575,4294934526,1048575,4294934527,1048575,4294967293,1048575,4294967294,1048575,4294967295,1048576,0,1048576,1,1048576,32766,1048576,32767,1048576,65534,1048576,65535,1048576,16777214,1048576,16777215,1048576,1446306522,1048576,3078018548,1048576,4294967294,1048576,4294967295,1114111,4294967294,1114111,4294967295,2148532224,0,3079067125,1446306523,4294967295,4294967295,0,0,983039,4294967295,983040,0,1048574,4294967295,1048575,0,1048575,4278190079,1048575,4278190080,1048575,4294901759,1048575,4294901760,1048575,4294934527,1048575,4294934528,1048575,4294967294,1048575,4294967295,1048576,0,1048576,1,1048576,2,1048576,32767,1048576,32768,1048576,65535,1048576,65536,1048576,16777215,1048576,16777216,1048576,1446306523,1048576,3078018549,1048576,4294967295,1048577,0,1114111,4294967295,1114112,0,2097151,4294967295,3593790171,3078018549,229357777,229357776,1445257947,3078018548,1445257947,3078018549,1446240987,3078018548,1446240987,3078018549,1446306522,3078018548,1446306522,3078018549,1446306523,3061241332,1446306523,3061241333,1446306523,3077953012,1446306523,3077953013,1446306523,3077985780,1446306523,3077985781,1446306523,3078018547,1446306523,3078018548,1446306523,3078018549,1446306523,3078018550,1446306523,3078018551,1446306523,3078051316,1446306523,3078051317,1446306523,3078084084,1446306523,3078084085,1446306523,3094795764,1446306523,3094795765,1446306524,229357776,1446306524,1861069802,1446306524,3078018548,1446306524,3078018549,1446372059,3078018548,1446372059,3078018549,1447355099,3078018548,1447355099,3078018549,4294967295,4294967295,930534901,1446306522,2146435071,4294967294,2146435071,4294967295,2147418111,4294967294,2147418111,4294967295,2147483646,4294967294,2147483646,4294967295,2147483647,4278190078,2147483647,4278190079,2147483647,4294901758,2147483647,4294901759,2147483647,4294934526,2147483647,4294934527,2147483647,4294967293,2147483647,4294967294,2147483647,4294967295,2147483648,0,2147483648,1,2147483648,32766,2147483648,32767,2147483648,65534,2147483648,65535,2147483648,16777214,2147483648,16777215,2147483648,1446306522,2147483648,3078018548,2147483648,4294967294,2147483648,4294967295,2147549183,4294967294,2147549183,4294967295,2148532223,4294967294,2148532223,4294967295,3593790171,3078018548]),Jn([0,0,3364432394,2848660773,2148532224,1,2148532224,0,2147549184,1,2147549184,0,2147483649,1,2147483649,0,2147483648,16777217,2147483648,16777216,2147483648,65537,2147483648,65536,2147483648,32769,2147483648,32768,2147483648,2,2147483648,1,2147483648,0,2147483647,4294967295,2147483647,4294967294,2147483647,4294934529,2147483647,4294934528,2147483647,4294901761,2147483647,4294901760,2147483647,4278190081,2147483647,4278190080,2147483647,2848660773,2147483647,1216948747,2147483647,1,2147483647,0,2147418112,1,2147418112,0,2146435072,1,2146435072,0,701177124,1216948747,0,1,930534901,1446306523,0,0,3079067125,1446306524,3079067125,1446306523,3078084085,1446306524,3078084085,1446306523,3078018550,1446306524,3078018550,1446306523,3078018549,1463083740,3078018549,1463083739,3078018549,1446372060,3078018549,1446372059,3078018549,1446339292,3078018549,1446339291,3078018549,1446306525,3078018549,1446306524,3078018549,1446306523,3078018549,1446306522,3078018549,1446306521,3078018549,1446273756,3078018549,1446273755,3078018549,1446240988,3078018549,1446240987,3078018549,1429529308,3078018549,1429529307,3078018549,0,3078018548,2663255270,3078018548,1446306524,3078018548,1446306523,3077953013,1446306524,3077953013,1446306523,3076969973,1446306524,3076969973,1446306523,1631712025,2663255270,930534901,1446306524,2146435071,4294967295,1215900170,2848660772,0,0,4294967295,4294967295,4293984256,0,4293984255,4294967295,4293918721,0,4293918720,4294967295,4293918720,16777216,4293918720,16777215,4293918720,65536,4293918720,65535,4293918720,32768,4293918720,32767,4293918720,1,4293918720,0,4293918719,4294967295,4293918719,4294967294,4293918719,4294967293,4293918719,4294934528,4293918719,4294934527,4293918719,4294901760,4293918719,4294901759,4293918719,4278190080,4293918719,4278190079,4293918719,2848660772,4293918719,1216948746,4293918719,0,4293918718,4294967295,4293853184,0,4293853183,4294967295,4292870144,0,4292870143,4294967295,2847612196,1216948746,2146435072,0,2146435072,0,1215900170,2848660773,0,1,0,0,4293984256,1,4293984256,0,4293918721,1,4293918721,0,4293918720,16777217,4293918720,16777216,4293918720,65537,4293918720,65536,4293918720,32769,4293918720,32768,4293918720,2,4293918720,1,4293918720,0,4293918719,4294967295,4293918719,4294967294,4293918719,4294934529,4293918719,4294934528,4293918719,4294901761,4293918719,4294901760,4293918719,4278190081,4293918719,4278190080,4293918719,2848660773,4293918719,1216948747,4293918719,1,4293918719,0,4293853184,1,4293853184,0,4292870144,1,4292870144,0,2847612196,1216948747,2146435072,1,2147418111,4294967295,1216883210,2848660772,983040,0,983039,4294967295,0,0,4294967295,4294967295,4294901761,0,4294901760,4294967295,4294901760,16777216,4294901760,16777215,4294901760,65536,4294901760,65535,4294901760,32768,4294901760,32767,4294901760,1,4294901760,0,4294901759,4294967295,4294901759,4294967294,4294901759,4294967293,4294901759,4294934528,4294901759,4294934527,4294901759,4294901760,4294901759,4294901759,4294901759,4278190080,4294901759,4278190079,4294901759,2848660772,4294901759,1216948746,4294901759,0,4294901758,4294967295,4294836224,0,4294836223,4294967295,4293853184,0,4293853183,4294967295,2848595236,1216948746,2147418112,0,2147418112,0,1216883210,2848660773,983040,1,983040,0,0,1,0,0,4294901761,1,4294901761,0,4294901760,16777217,4294901760,16777216,4294901760,65537,4294901760,65536,4294901760,32769,4294901760,32768,4294901760,2,4294901760,1,4294901760,0,4294901759,4294967295,4294901759,4294967294,4294901759,4294934529,4294901759,4294934528,4294901759,4294901761,4294901759,4294901760,4294901759,4278190081,4294901759,4278190080,4294901759,2848660773,4294901759,1216948747,4294901759,1,4294901759,0,4294836224,1,4294836224,0,4293853184,1,4293853184,0,2848595236,1216948747,2147418112,1,2147483646,4294967295,1216948745,2848660772,1048575,0,1048574,4294967295,65535,0,65534,4294967295,0,0,4294967295,4294967295,4294967295,16777216,4294967295,16777215,4294967295,65536,4294967295,65535,4294967295,32768,4294967295,32767,4294967295,1,4294967295,0,4294967294,4294967295,4294967294,4294967294,4294967294,4294967293,4294967294,4294934528,4294967294,4294934527,4294967294,4294901760,4294967294,4294901759,4294967294,4278190080,4294967294,4278190079,4294967294,2848660772,4294967294,1216948746,4294967294,0,4294967293,4294967295,4294901759,0,4294901758,4294967295,4293918719,0,4293918718,4294967295,2848660771,1216948746,2147483647,0,2147483647,0,1216948745,2848660773,1048575,1,1048575,0,65535,1,65535,0,0,1,0,0,4294967295,16777217,4294967295,16777216,4294967295,65537,4294967295,65536,4294967295,32769,4294967295,32768,4294967295,2,4294967295,1,4294967295,0,4294967294,4294967295,4294967294,4294967294,4294967294,4294934529,4294967294,4294934528,4294967294,4294901761,4294967294,4294901760,4294967294,4278190081,4294967294,4278190080,4294967294,2848660773,4294967294,1216948747,4294967294,1,4294967294,0,4294901759,1,4294901759,0,4293918719,1,4293918719,0,2848660771,1216948747,2147483647,1,2147483647,4278190079,1216948746,2831883556,1048575,4278190080,1048575,4278190079,65535,4278190080,65535,4278190079,0,4278190080,0,4278190079,0,0,4294967295,4294967295,4294967295,4278255616,4294967295,4278255615,4294967295,4278222848,4294967295,4278222847,4294967295,4278190081,4294967295,4278190080,4294967295,4278190079,4294967295,4278190078,4294967295,4278190077,4294967295,4278157312,4294967295,4278157311,4294967295,4278124544,4294967295,4278124543,4294967295,4261412864,4294967295,4261412863,4294967295,2831883556,4294967295,1200171530,4294967294,4278190080,4294967294,4278190079,4294901759,4278190080,4294901759,4278190079,4293918719,4278190080,4293918719,4278190079,2848660772,1200171530,2147483647,4278190080,2147483647,4278190080,1216948746,2831883557,1048575,4278190081,1048575,4278190080,65535,4278190081,65535,4278190080,0,4278190081,0,4278190080,0,1,0,0,4294967295,4278255617,4294967295,4278255616,4294967295,4278222849,4294967295,4278222848,4294967295,4278190082,4294967295,4278190081,4294967295,4278190080,4294967295,4278190079,4294967295,4278190078,4294967295,4278157313,4294967295,4278157312,4294967295,4278124545,4294967295,4278124544,4294967295,4261412865,4294967295,4261412864,4294967295,2831883557,4294967295,1200171531,4294967294,4278190081,4294967294,4278190080,4294901759,4278190081,4294901759,4278190080,4293918719,4278190081,4293918719,4278190080,2848660772,1200171531,2147483647,4278190081,2147483647,4294901759,1216948746,2848595236,1048575,4294901760,1048575,4294901759,65535,4294901760,65535,4294901759,0,4294901760,0,4294901759,0,16711680,0,16711679,0,0,4294967295,4294967295,4294967295,4294934528,4294967295,4294934527,4294967295,4294901761,4294967295,4294901760,4294967295,4294901759,4294967295,4294901758,4294967295,4294901757,4294967295,4294868992,4294967295,4294868991,4294967295,4294836224,4294967295,4294836223,4294967295,4278124544,4294967295,4278124543,4294967295,2848595236,4294967295,1216883210,4294967294,4294901760,4294967294,4294901759,4294901759,4294901760,4294901759,4294901759,4293918719,4294901760,4293918719,4294901759,2848660772,1216883210,2147483647,4294901760,2147483647,4294901760,1216948746,2848595237,1048575,4294901761,1048575,4294901760,65535,4294901761,65535,4294901760,0,4294901761,0,4294901760,0,16711681,0,16711680,0,1,0,0,4294967295,4294934529,4294967295,4294934528,4294967295,4294901762,4294967295,4294901761,4294967295,4294901760,4294967295,4294901759,4294967295,4294901758,4294967295,4294868993,4294967295,4294868992,4294967295,4294836225,4294967295,4294836224,4294967295,4278124545,4294967295,4278124544,4294967295,2848595237,4294967295,1216883211,4294967294,4294901761,4294967294,4294901760,4294901759,4294901761,4294901759,4294901760,4293918719,4294901761,4293918719,4294901760,2848660772,1216883211,2147483647,4294901761,2147483647,4294934527,1216948746,2848628004,1048575,4294934528,1048575,4294934527,65535,4294934528,65535,4294934527,0,4294934528,0,4294934527,0,16744448,0,16744447,0,32768,0,32767,0,0,4294967295,4294967295,4294967295,4294934529,4294967295,4294934528,4294967295,4294934527,4294967295,4294934526,4294967295,4294934525,4294967295,4294901760,4294967295,4294901759,4294967295,4294868992,4294967295,4294868991,4294967295,4278157312,4294967295,4278157311,4294967295,2848628004,4294967295,1216915978,4294967294,4294934528,4294967294,4294934527,4294901759,4294934528,4294901759,4294934527,4293918719,4294934528,4293918719,4294934527,2848660772,1216915978,2147483647,4294934528,2147483647,4294934528,1216948746,2848628005,1048575,4294934529,1048575,4294934528,65535,4294934529,65535,4294934528,0,4294934529,0,4294934528,0,16744449,0,16744448,0,32769,0,32768,0,1,0,0,4294967295,4294934530,4294967295,4294934529,4294967295,4294934528,4294967295,4294934527,4294967295,4294934526,4294967295,4294901761,4294967295,4294901760,4294967295,4294868993,4294967295,4294868992,4294967295,4278157313,4294967295,4278157312,4294967295,2848628005,4294967295,1216915979,4294967294,4294934529,4294967294,4294934528,4294901759,4294934529,4294901759,4294934528,4293918719,4294934529,4293918719,4294934528,2848660772,1216915979,2147483647,4294934529,2147483647,4294967294,1216948746,2848660771,1048575,4294967295,1048575,4294967294,65535,4294967295,65535,4294967294,0,4294967295,0,4294967294,0,16777215,0,16777214,0,65535,0,65534,0,32767,0,32766,0,0,4294967295,4294967295,4294967295,4294967294,4294967295,4294967293,4294967295,4294967292,4294967295,4294934527,4294967295,4294934526,4294967295,4294901759,4294967295,4294901758,4294967295,4278190079,4294967295,4278190078,4294967295,2848660771,4294967295,1216948745,4294967294,4294967295,4294967294,4294967294,4294901759,4294967295,4294901759,4294967294,4293918719,4294967295,4293918719,4294967294,2848660772,1216948745,2147483647,4294967295,2147483647,4294967295,1216948746,2848660772,1048576,0,1048575,4294967295,65536,0,65535,4294967295,1,0,0,4294967295,0,16777216,0,16777215,0,65536,0,65535,0,32768,0,32767,0,1,0,0,4294967295,4294967295,4294967295,4294967294,4294967295,4294967293,4294967295,4294934528,4294967295,4294934527,4294967295,4294901760,4294967295,4294901759,4294967295,4278190080,4294967295,4278190079,4294967295,2848660772,4294967295,1216948746,4294967295,0,4294967294,4294967295,4294901760,0,4294901759,4294967295,4293918720,0,4293918719,4294967295,2848660772,1216948746,2147483648,0,2147483648,0,1216948746,2848660773,1048576,1,1048576,0,65536,1,65536,0,1,1,1,0,0,16777217,0,16777216,0,65537,0,65536,0,32769,0,32768,0,2,0,1,0,0,4294967295,4294967295,4294967295,4294967294,4294967295,4294934529,4294967295,4294934528,4294967295,4294901761,4294967295,4294901760,4294967295,4278190081,4294967295,4278190080,4294967295,2848660773,4294967295,1216948747,4294967295,1,4294967295,0,4294901760,1,4294901760,0,4293918720,1,4293918720,0,2848660772,1216948747,2147483648,1,2147483648,1,1216948746,2848660774,1048576,2,1048576,1,65536,2,65536,1,1,2,1,1,0,16777218,0,16777217,0,65538,0,65537,0,32770,0,32769,0,3,0,2,0,1,0,0,4294967295,4294967295,4294967295,4294934530,4294967295,4294934529,4294967295,4294901762,4294967295,4294901761,4294967295,4278190082,4294967295,4278190081,4294967295,2848660774,4294967295,1216948748,4294967295,2,4294967295,1,4294901760,2,4294901760,1,4293918720,2,4293918720,1,2848660772,1216948748,2147483648,2,2147483648,2,1216948746,2848660775,1048576,3,1048576,2,65536,3,65536,2,1,3,1,2,0,16777219,0,16777218,0,65539,0,65538,0,32771,0,32770,0,4,0,3,0,2,0,1,0,0,4294967295,4294934531,4294967295,4294934530,4294967295,4294901763,4294967295,4294901762,4294967295,4278190083,4294967295,4278190082,4294967295,2848660775,4294967295,1216948749,4294967295,3,4294967295,2,4294901760,3,4294901760,2,4293918720,3,4293918720,2,2848660772,1216948749,2147483648,3,2147483648,32767,1216948746,2848693540,1048576,32768,1048576,32767,65536,32768,65536,32767,1,32768,1,32767,0,16809984,0,16809983,0,98304,0,98303,0,65536,0,65535,0,32769,0,32768,0,32767,0,32766,0,32765,0,0,4294967295,4294967295,4294967295,4294934528,4294967295,4294934527,4294967295,4278222848,4294967295,4278222847,4294967295,2848693540,4294967295,1216981514,4294967295,32768,4294967295,32767,4294901760,32768,4294901760,32767,4293918720,32768,4293918720,32767,2848660772,1216981514,2147483648,32768,2147483648,32768,1216948746,2848693541,1048576,32769,1048576,32768,65536,32769,65536,32768,1,32769,1,32768,0,16809985,0,16809984,0,98305,0,98304,0,65537,0,65536,0,32770,0,32769,0,32768,0,32767,0,32766,0,1,0,0,4294967295,4294934529,4294967295,4294934528,4294967295,4278222849,4294967295,4278222848,4294967295,2848693541,4294967295,1216981515,4294967295,32769,4294967295,32768,4294901760,32769,4294901760,32768,4293918720,32769,4293918720,32768,2848660772,1216981515,2147483648,32769,2147483648,65535,1216948746,2848726308,1048576,65536,1048576,65535,65536,65536,65536,65535,1,65536,1,65535,0,16842752,0,16842751,0,131072,0,131071,0,98304,0,98303,0,65537,0,65536,0,65535,0,65534,0,65533,0,32768,0,32767,0,0,4294967295,4294967295,4294967295,4278255616,4294967295,4278255615,4294967295,2848726308,4294967295,1217014282,4294967295,65536,4294967295,65535,4294901760,65536,4294901760,65535,4293918720,65536,4293918720,65535,2848660772,1217014282,2147483648,65536,2147483648,65536,1216948746,2848726309,1048576,65537,1048576,65536,65536,65537,65536,65536,1,65537,1,65536,0,16842753,0,16842752,0,131073,0,131072,0,98305,0,98304,0,65538,0,65537,0,65536,0,65535,0,65534,0,32769,0,32768,0,1,0,0,4294967295,4278255617,4294967295,4278255616,4294967295,2848726309,4294967295,1217014283,4294967295,65537,4294967295,65536,4294901760,65537,4294901760,65536,4293918720,65537,4293918720,65536,2848660772,1217014283,2147483648,65537,2147483648,16777215,1216948746,2865437988,1048576,16777216,1048576,16777215,65536,16777216,65536,16777215,1,16777216,1,16777215,0,33554432,0,33554431,0,16842752,0,16842751,0,16809984,0,16809983,0,16777217,0,16777216,0,16777215,0,16777214,0,16777213,0,16744448,0,16744447,0,16711680,0,16711679,0,0,4294967295,4294967295,4294967295,2865437988,4294967295,1233725962,4294967295,16777216,4294967295,16777215,4294901760,16777216,4294901760,16777215,4293918720,16777216,4293918720,16777215,2848660772,1233725962,2147483648,16777216,2147483648,16777216,1216948746,2865437989,1048576,16777217,1048576,16777216,65536,16777217,65536,16777216,1,16777217,1,16777216,0,33554433,0,33554432,0,16842753,0,16842752,0,16809985,0,16809984,0,16777218,0,16777217,0,16777216,0,16777215,0,16777214,0,16744449,0,16744448,0,16711681,0,16711680,0,1,0,0,4294967295,2865437989,4294967295,1233725963,4294967295,16777217,4294967295,16777216,4294901760,16777217,4294901760,16777216,4293918720,16777217,4293918720,16777216,2848660772,1233725963,2147483648,16777217,2147483648,1446306523,1216948747,0,1048576,1446306524,1048576,1446306523,65536,1446306524,65536,1446306523,1,1446306524,1,1446306523,0,1463083740,0,1463083739,0,1446372060,0,1446372059,0,1446339292,0,1446339291,0,1446306525,0,1446306524,0,1446306523,0,1446306522,0,1446306521,0,1446273756,0,1446273755,0,1446240988,0,1446240987,0,1429529308,0,1429529307,0,0,4294967295,2663255270,4294967295,1446306524,4294967295,1446306523,4294901760,1446306524,4294901760,1446306523,4293918720,1446306524,4293918720,1446306523,2848660772,2663255270,2147483648,1446306524,2147483648,3078018549,1216948747,1631712026,1048576,3078018550,1048576,3078018549,65536,3078018550,65536,3078018549,1,3078018550,1,3078018549,0,3094795766,0,3094795765,0,3078084086,0,3078084085,0,3078051318,0,3078051317,0,3078018551,0,3078018550,0,3078018549,0,3078018548,0,3078018547,0,3077985782,0,3077985781,0,3077953014,0,3077953013,0,3061241334,0,3061241333,0,1631712026,0,0,4294967295,3078018550,4294967295,3078018549,4294901760,3078018550,4294901760,3078018549,4293918720,3078018550,4293918720,3078018549,2848660773,0,2147483648,3078018550,2147483648,4294967295,1216948747,2848660772,1048577,0,1048576,4294967295,65537,0,65536,4294967295,2,0,1,4294967295,1,16777216,1,16777215,1,65536,1,65535,1,32768,1,32767,1,1,1,0,0,4294967295,0,4294967294,0,4294967293,0,4294934528,0,4294934527,0,4294901760,0,4294901759,0,4278190080,0,4278190079,0,2848660772,0,1216948746,0,0,4294967295,4294967295,4294901761,0,4294901760,4294967295,4293918721,0,4293918720,4294967295,2848660773,1216948746,2147483649,0,2147483649,0,1216948747,2848660773,1048577,1,1048577,0,65537,1,65537,0,2,1,2,0,1,16777217,1,16777216,1,65537,1,65536,1,32769,1,32768,1,2,1,1,1,0,0,4294967295,0,4294967294,0,4294934529,0,4294934528,0,4294901761,0,4294901760,0,4278190081,0,4278190080,0,2848660773,0,1216948747,0,1,0,0,4294901761,1,4294901761,0,4293918721,1,4293918721,0,2848660773,1216948747,2147483649,1,2147549183,4294967295,1217014282,2848660772,1114112,0,1114111,4294967295,131072,0,131071,4294967295,65537,0,65536,4294967295,65536,16777216,65536,16777215,65536,65536,65536,65535,65536,32768,65536,32767,65536,1,65536,0,65535,4294967295,65535,4294967294,65535,4294967293,65535,4294934528,65535,4294934527,65535,4294901760,65535,4294901759,65535,4278190080,65535,4278190079,65535,2848660772,65535,1216948746,65535,0,65534,4294967295,0,0,4294967295,4294967295,4293984256,0,4293984255,4294967295,2848726308,1216948746,2147549184,0,2147549184,0,1217014282,2848660773,1114112,1,1114112,0,131072,1,131072,0,65537,1,65537,0,65536,16777217,65536,16777216,65536,65537,65536,65536,65536,32769,65536,32768,65536,2,65536,1,65536,0,65535,4294967295,65535,4294967294,65535,4294934529,65535,4294934528,65535,4294901761,65535,4294901760,65535,4278190081,65535,4278190080,65535,2848660773,65535,1216948747,65535,1,65535,0,0,1,0,0,4293984256,1,4293984256,0,2848726308,1216948747,2147549184,1,2148532223,4294967295,1217997322,2848660772,2097152,0,2097151,4294967295,1114112,0,1114111,4294967295,1048577,0,1048576,4294967295,1048576,16777216,1048576,16777215,1048576,65536,1048576,65535,1048576,32768,1048576,32767,1048576,1,1048576,0,1048575,4294967295,1048575,4294967294,1048575,4294967293,1048575,4294934528,1048575,4294934527,1048575,4294901760,1048575,4294901759,1048575,4278190080,1048575,4278190079,1048575,2848660772,1048575,1216948746,1048575,0,1048574,4294967295,983040,0,983039,4294967295,0,0,4294967295,4294967295,2849709348,1216948746,2148532224,0,2148532224,0,1217997322,2848660773,2097152,1,2097152,0,1114112,1,1114112,0,1048577,1,1048577,0,1048576,16777217,1048576,16777216,1048576,65537,1048576,65536,1048576,32769,1048576,32768,1048576,2,1048576,1,1048576,0,1048575,4294967295,1048575,4294967294,1048575,4294934529,1048575,4294934528,1048575,4294901761,1048575,4294901760,1048575,4278190081,1048575,4278190080,1048575,2848660773,1048575,1216948747,1048575,1,1048575,0,983040,1,983040,0,0,1,0,0,2849709348,1216948747,2148532224,1,3593790171,3078018549,2663255270,1631712026,1447355099,3078018550,1447355099,3078018549,1446372059,3078018550,1446372059,3078018549,1446306524,3078018550,1446306524,3078018549,1446306523,3094795766,1446306523,3094795765,1446306523,3078084086,1446306523,3078084085,1446306523,3078051318,1446306523,3078051317,1446306523,3078018551,1446306523,3078018550,1446306523,3078018549,1446306523,3078018548,1446306523,3078018547,1446306523,3077985782,1446306523,3077985781,1446306523,3077953014,1446306523,3077953013,1446306523,3061241334,1446306523,3061241333,1446306523,1631712026,1446306523,0,1446306522,3078018550,1446306522,3078018549,1446240987,3078018550,1446240987,3078018549,1445257947,3078018550,1445257947,3078018549,0,0,3593790171,3078018550,4294967295,4294967295,3364432394,2848660772,2148532224,0,2148532223,4294967295,2147549184,0,2147549183,4294967295,2147483649,0,2147483648,4294967295,2147483648,16777216,2147483648,16777215,2147483648,65536,2147483648,65535,2147483648,32768,2147483648,32767,2147483648,1,2147483648,0,2147483647,4294967295,2147483647,4294967294,2147483647,4294967293,2147483647,4294934528,2147483647,4294934527,2147483647,4294901760,2147483647,4294901759,2147483647,4278190080,2147483647,4278190079,2147483647,2848660772,2147483647,1216948746,2147483647,0,2147483646,4294967295,2147418112,0,2147418111,4294967295,2146435072,0,2146435071,4294967295,701177124,1216948746,0,0]),Jn([2147483648,0,2147483648,0,450439690,2848660773,0,0,3528458240,0,1048576,0,2147483648,0,1705912842,2848660773,1114112,1,1048576,0,0,0,488964096,0,65536,0,0,0,65536,0,2147483648,0,4065609519,2848660773,1048577,1,1048576,0,65537,1,65536,0,0,0,2848660773,0,1,0,0,0,1,0,0,0,1,0,2147483648,0,1395848487,3469417765,1048576,16777217,1048576,0,65536,16777217,65536,0,16777217,16777217,16777217,0,0,0,178899741,620756992,0,16777216,0,0,0,16777216,0,0,16777216,16777216,16777216,0,65536,16777216,2147483648,0,1922290645,3337624869,1048576,65537,1048576,0,65536,65537,65536,0,65537,65537,65537,0,256,16842753,256,16777216,0,0,705341899,488964096,0,65536,0,0,0,65536,0,0,65536,65536,65536,0,256,65536,256,0,1,65536,2147483648,0,3717103344,945659173,1048576,32769,1048576,0,2147549184,32769,2147549184,0,32769,32769,32769,0,128,16809985,128,16777216,0,2147581953,0,2147549184,0,0,2500154597,2391965696,0,32768,0,0,2147483648,32768,2147483648,0,32768,32768,32768,0,128,32768,128,0,0,2147516416,0,2147483648,0,1073774592,0,0,2433897493,1402354250,2097152,2,2097152,0,131072,2,131072,0,2,2,2,0,0,33554434,0,33554432,0,131074,0,131072,0,65538,0,65536,2147483648,0,1216948746,2848660773,1048576,1,1048576,0,65536,1,65536,0,1,1,1,0,0,16777217,0,16777216,0,65537,0,65536,0,32769,0,32768,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2147483648,0,3078018549,1446306523,4293918719,4294967295,4293918720,0,4294901759,4294967295,4294901760,0,4294967294,4294967295,4294967295,0,4294967295,4278190079,4294967295,4278190080,4294967295,4294901759,4294967295,4294901760,4294967295,4294934527,4294967295,4294934528,4294967295,4294967294,4294967295,4294967295,0,0,0,0,1861069802,2892613046,4292870143,4294967294,4292870144,0,4294836223,4294967294,4294836224,0,4294967293,4294967294,4294967294,0,4294967295,4261412862,4294967295,4261412864,4294967295,4294836222,4294967295,4294836224,4294967295,4294901758,4294967295,4294901760,4294967295,4294967292,4294967295,4294967294,0,0,0,2,2147483648,0,3011761445,456695077,1048575,4294934529,1048576,0,2147549183,4294934529,2147549184,0,4294934528,4294934529,4294934529,0,4294967168,16744449,4294967168,16777216,4294967295,2147516417,4294967295,2147549184,4294967295,3221225473,4294967295,3221258240,4294967295,4294901762,4294967295,4294934529,0,0,0,32767,0,65534,0,0,1794812698,1903001600,4294967295,4294934528,0,0,2147483647,4294934528,2147483648,0,4294934527,4294934528,4294934528,0,4294967167,4294934528,4294967168,0,4294967295,2147450880,4294967295,2147483648,4294967295,3221192704,4294967295,3221225472,4294967295,4294901760,4294967295,4294934528,0,0,0,32768,0,65536,0,1073709056,2147483648,0,511606847,2359696677,1048575,4294901761,1048576,0,65535,4294901761,65536,0,4294901760,4294901761,4294901761,0,4294967040,16711681,4294967040,16777216,4294967295,1,4294967295,65536,4294967295,2147450881,4294967295,2147516416,4294967295,4294836226,4294967295,4294901761,0,0,0,65535,0,131070,0,2147385345,0,2147450880,0,0,3589625396,3806003200,4294967295,4294901760,0,0,4294967295,4294901760,0,0,4294901759,4294901760,4294901760,0,4294967039,4294901760,4294967040,0,4294967294,4294901760,4294967295,0,4294967295,2147418112,4294967295,2147483648,4294967295,4294836224,4294967295,4294901760,0,0,0,65536,0,131072,0,2147418112,0,2147483648,0,4294901760,2147483648,0,1038049005,2227903781,1048575,4278190081,1048576,0,65535,4278190081,65536,0,4278190080,4278190081,4278190081,0,4294901760,1,4294901760,16777216,4294967039,4278255617,4294967040,65536,4294967167,4278222849,4294967168,32768,4294967295,4261412866,4294967295,4278190081,0,0,0,16777215,0,33554430,127,4278157313,127,4294934528,255,4278124545,255,4294901760,0,0,4116067554,3674210304,4294967295,4278190080,0,0,4294967295,4278190080,0,0,4278190079,4278190080,4278190080,0,4294901759,4278190080,4294901760,0,4294967039,4278190080,4294967040,0,4294967167,4278190080,4294967168,0,4294967295,4261412864,4294967295,4278190080,0,0,0,16777216,0,33554432,127,4278190080,128,0,255,4278190080,256,0,65535,4278190080,2147483648,0,3159811567,369059673,3528458239,2848660773,3528458240,0,488964095,2848660773,488964096,0,2848660772,2848660773,2848660773,0,4289317660,3469417765,4289317661,620756992,4294945226,3337624869,4294945227,488964096,4294956261,945659173,4294956261,2391965696,4294967295,1402354250,4294967295,2848660773,0,0,0,1446306523,0,2892613046,11034,456695077,11034,1903001600,22068,2359696677,22068,3806003200,5649634,2227903781,5649634,3674210304,2147483648,0,1953853200,2672775831,2695888895,1216948747,2695888896,0,705363967,1216948747,705363968,0,1216948746,1216948747,1216948747,0,4282943785,1401498123,4282943786,184549376,4294920328,1922312715,4294920329,705363968,4294943811,3717114379,4294943812,2500165632,4294967294,2433897494,4294967295,1216948747,0,0,0,3078018549,1,1861069802,23482,3011750411,23483,1794801664,46966,511584779,46966,3589603328,12023509,1032399371,12023509,4110417920,1036505751,2672775831,2147483648,0,2663255269,2848660773,1048575,1,1048576,0,65535,1,65536,0,0,1,1,0,4278190079,16777217,4278190080,16777216,4294901759,65537,4294901760,65536,4294934527,32769,4294934528,32768,4294967294,2,4294967295,1,0,0,0,4294967295,1,4294967294,32766,4294934529,32767,4294934528,65534,4294901761,65535,4294901760,16777214,4278190081,16777215,4278190080,1446306522,2848660773,3078018548,1216948747,0,0,1446306523,0,4294967295,0,0,0,4294967295,0,0,0,4294967295,0,0,0,4278190079,0,4278190080,0,4294901759,0,4294901760,0,4294934527,0,4294934528,0,4294967294,0,4294967295,0,0,0,1,0,2,0,32767,0,32768,0,65535,0,65536,0,16777215,0,16777216,0,1446306523,0,3078018549,0,4294967295,0,2147483648,0,727984650,2848660773,983040,1,1048576,0,0,1,65536,0,4294901761,1,1,0,4294901760,16777217,0,16777216,4294901760,65537,0,65536,2147418112,32769,2147483648,32768,4294836224,2,4294901760,1,0,0,65535,4294967295,131071,4294967294,2147418111,4294934529,2147483647,4294934528,4294901759,4294901761,4294967295,4294901760,4294901759,4278190081,4294967295,4278190080,3806003199,2848660773,3589603327,1216948747,4294901759,1,4294967295,0,0,0,3806003200,0,4294901760,0,0,0,4294901760,0,0,0,4294901760,0,0,0,4294901760,0,0,0,4294901760,0,0,0,2147418112,0,2147483648,0,4294836224,0,4294901760,0,0,0,65536,0,131072,0,2147418112,0,2147483648,0,4294901760,0,0,0,4294901760,0,0,0,3806003200,0,3589603328,0,4294901760,0,0,0,4294901760,0,2147483648,0,1983457802,2848660773,0,1,1048576,0,4293984256,1,65536,0,4293918721,1,1,0,4293918720,16777217,0,16777216,4293918720,65537,0,65536,4293918720,32769,0,32768,4292870144,2,4293918720,1,0,0,1048575,4294967295,2097151,4294967294,4293918719,4294934529,4294967295,4294934528,4293918719,4294901761,4294967295,4294901760,4293918719,4278190081,4294967295,4278190080,766509055,2848660773,1599078399,1216948747,4293918719,1,4294967295,0,4293853184,1,4294901760,0,0,0,766509056,0,4293918720,0,0,0,4293918720,0,0,0,4293918720,0,0,0,4293918720,0,0,0,4293918720,0,0,0,4293918720,0,0,0,4292870144,0,4293918720,0,0,0,1048576,0,2097152,0,4293918720,0,0,0,4293918720,0,0,0,4293918720,0,0,0,766509056,0,1599078400,0,4293918720,0,0,0,4293918720,0,0,0,4293918720,0,2147483648,0,2322912873,2672775831,1249582372,1216948747,2695888896,0,3554024740,1216948747,705363968,0,4065609519,1216948747,1216948747,0,3457394254,1401498123,608733482,184549376,3337577901,1922312715,488917129,705363968,945635688,3717114379,2391942212,2500165632,1402354248,2433897494,2848660772,1216948747,0,0,1446306523,3078018549,2892613047,1861069802,456718559,3011750411,1903025083,1794801664,2359743643,511584779,3806050166,3589603328,2239927290,1032399371,3686233813,4110417920,1405565424,2672775831,583692197,917347449,1631712025,1216948747,3078018549,0,2143296804,1216948747,3589603328,0,152771876,1216948747,1599078400,0,2147483648,0,3364432394,2848660773,2148532224,1,1048576,0,2147549184,1,65536,0,2147483649,1,1,0,2147483648,16777217,0,16777216,2147483648,65537,0,65536,2147483648,32769,0,32768,0,2,2147483648,1,0,0,2147483647,4294967295,4294967295,4294967294,2147483647,4294934529,4294967295,4294934528,2147483647,4294901761,4294967295,4294901760,2147483647,4278190081,4294967295,4278190080,2147483647,2848660773,2147483647,1216948747,2147483647,1,4294967295,0,2147418112,1,4294901760,0,2146435072,1,4293918720,0,701177124,1216948747]),Jn([0,1,0,1,0,2047,0,2048,0,32767,0,32768,0,2147483647,0,2147483648,127,4294934528,128,0,32767,2147516415,32768,0,65534,262136,65536,0,1073741824,0,2147483648,0,2147483648,0,3221225472,0,4294901757,4294705144,4294901760,0,4294934527,2147450880,4294934528,0,4294967167,4294934528,4294967168,0,4294967294,2212744218,4294967295,1298438234,4294967295,2147483648,4294967295,2147483648,4294967295,4294934528,4294967295,4294934528,4294967295,4294965248,4294967295,4294965248,4294967295,4294967295,4294967295,4294967295,0,0,0,1,0,1160,0,1160,0,18569,0,18569,0,1216948746,0,1216948746,72,2301215264,72,2301233833,18568,3783379017,18569,705341899,37137,838004656,37138,1410683798,608474373,1424330386,1216948746,2848660773,3078018549,1446306523,3686492922,2870636910,4294930156,2311307250,4294930157,2884283498,4294948726,2372658081,4294948726,3589625397,4294967223,1993714894,4294967223,1993733463,4294967295,681103302,4294967295,2596876468,4294967295,3078018550,4294967295,3078018550,4294967295,4294948727,4294967295,4294948727,4294967295,4294966136,4294967295,4294966136,0,0,0,0,0,0,0,0,0,1,0,1,0,15,0,16,0,1048575,0,1048576,0,268435440,0,268435456,15,4293918735,16,0,31,4290773119,32,0,524288,0,1048576,1,4293918719,4294967295,4294443008,0,4294967263,4290772864,4294967264,0,4294967279,4293918704,4294967280,0,4294967295,4026531824,4294967295,4026531840,4294967295,4291853434,4294967295,4293504148,4294967295,4293918720,4294967295,4293918720,4294967295,4294967280,4294967295,4294967280,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,1,0,15,0,16,0,1048575,0,1048576,0,268435440,0,268435456,15,4293918735,16,0,31,4290773119,32,0,524288,0,1048576,0,4293918720,0,4294443008,0,4294967263,4290772864,4294967264,0,4294967279,4293918704,4294967280,0,4294967295,4026531824,4294967295,4026531840,4294967295,4291853434,4294967295,4293504148,4294967295,4293918720,4294967295,4293918720,4294967295,4294967280,4294967295,4294967280,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,65535,0,65536,0,16777215,0,16777216,0,4294901761,1,0,1,4294705159,2,0,32768,0,65536,1,4294901759,4294967295,4294934528,0,4294967293,4294705144,4294967294,0,4294967294,4294901759,4294967295,0,4294967295,4278190079,4294967295,4278190080,4294967295,4294772680,4294967295,4294875850,4294967295,4294901760,4294967295,4294901760,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,65535,0,65536,0,16777215,0,16777216,0,4294901760,1,0,1,4294705159,2,0,32768,0,65536,0,4294901760,0,4294934528,0,4294967293,4294705144,4294967294,0,4294967294,4294901759,4294967295,0,4294967295,4278190079,4294967295,4278190080,4294967295,4294772680,4294967295,4294875850,4294967295,4294901760,4294967295,4294901760,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,255,0,256,0,65535,0,65536,0,131068,0,131072,0,2147483648,1,1,4294967294,4294967295,4294967295,2147483648,4294967295,4294836220,4294967295,4294836224,4294967295,4294901759,4294967295,4294901760,4294967295,4294967040,4294967295,4294967040,4294967295,4294967294,4294967295,4294967295,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,255,0,256,0,65535,0,65536,0,131068,0,131072,0,2147483648,1,0,4294967295,0,4294967295,2147483648,4294967295,4294836220,4294967295,4294836224,4294967295,4294901759,4294967295,4294901760,4294967295,4294967040,4294967295,4294967040,4294967295,4294967294,4294967295,4294967295,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,255,0,256,0,511,0,512,0,8388608,0,16777217,4294967295,4278190079,4294967295,4286578688,4294967295,4294966784,4294967295,4294966784,4294967295,4294967040,4294967295,4294967040,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,255,0,256,0,511,0,512,0,8388608,0,16777216,4294967295,4278190080,4294967295,4286578688,4294967295,4294966784,4294967295,4294966784,4294967295,4294967040,4294967295,4294967040,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,2,0,32768,0,65537,4294967295,4294901759,4294967295,4294934528,4294967295,4294967294,4294967295,4294967294,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,2,0,32768,0,65536,4294967295,4294901760,4294967295,4294934528,4294967295,4294967294,4294967295,4294967294,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,16384,0,32769,4294967295,4294934527,4294967295,4294950912,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,16384,0,32768,4294967295,4294934528,4294967295,4294950912,4294967295,4294967295,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,2,4294967295,4294967294,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,4294967295,4294967295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294967294,0,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294950913,4294967295,4294934529,0,32767,0,16383,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294950912,4294967295,4294934528,0,32768,0,16384,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294967295,4294967295,4294934529,4294967295,4294901761,0,65535,0,32767,0,2,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294967295,4294967295,4294967294,4294967295,4294934528,4294967295,4294901760,0,65536,0,32768,0,2,0,2,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967041,4294967295,4294967041,4294967295,4294966785,4294967295,4294966785,4294967295,4286578689,4294967295,4278190081,0,16777215,0,8388607,0,512,0,511,0,256,0,255,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294967041,4294967295,4294967040,4294967295,4294966785,4294967295,4294966784,4294967295,4286578688,4294967295,4278190080,0,16777216,0,8388608,0,512,0,512,0,256,0,256,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967210,4294967295,4294967210,4294967295,4294945228,4294967295,4294945228,4294967295,4294923160,4294967295,4294923159,4294967295,3571814035,4294967295,2848660773,0,1446306523,0,723153261,0,44139,0,44137,0,22069,0,22068,0,86,0,86,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967113,4294967295,4294967113,4294967295,4294920330,4294967295,4294920330,4294967295,4294873366,4294967295,4294873363,4294967295,2755958022,4294967295,1216948747,0,3078018549,0,1539009274,0,93936,0,93933,0,46967,0,46966,0,183,0,183,0,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967041,4294967295,4294967041,4294967295,4294901761,4294967295,4294901761,4294967295,4294836228,4294967295,4294836225,4294967295,2147483649,4294967295,1,0,4294967295,0,2147483647,0,131076,0,131071,0,65537,0,65535,0,256,0,255,0,2,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294967041,4294967295,4294967040,4294967295,4294901761,4294967295,4294901760,4294967295,4294836228,4294967295,4294836224,4294967295,2147483648,4294967295,0,1,0,0,2147483648,0,131076,0,131072,0,65537,0,65536,0,256,0,256,0,2,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294901761,4294967295,4294901761,4294967295,4278190081,4294967295,4278190081,4294967295,65536,4294967295,1,4294967294,262137,4294967294,1,4294934528,1,4294901760,1,65535,4294967295,32767,4294967295,2,262152,1,4294967295,1,65537,0,4294967295,0,16777217,0,16777215,0,194616,0,91446,0,65536,0,65535,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294901761,4294967295,4294901760,4294967295,4278190081,4294967295,4278190080,4294967295,65536,4294967295,0,4294967294,262137,4294967294,0,4294934528,0,4294901760,0,65536,0,32768,0,2,262152,2,0,1,65537,1,0,0,16777217,0,16777216,0,194616,0,91446,0,65536,0,65536,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967281,4294967295,4294967281,4294967295,4293918721,4294967295,4293918721,4294967295,4026531856,4294967295,4026531841,4294967280,1048561,4294967280,1,4294967264,4194177,4294967264,1,4294443008,1,4293918720,1,1048575,4294967295,524287,4294967295,32,4194432,31,4294967295,16,1048592,15,4294967295,0,268435472,0,268435455,0,3113862,0,1463148,0,1048576,0,1048575,0,16,0,15,0,1,0,0,0,0,0,0,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294967281,4294967295,4294967280,4294967295,4293918721,4294967295,4293918720,4294967295,4026531856,4294967295,4026531840,4294967280,1048561,4294967280,0,4294967264,4194177,4294967264,0,4294443008,0,4293918720,0,1048576,0,524288,0,32,4194432,32,0,16,1048592,16,0,0,268435472,0,268435456,0,3113862,0,1463148,0,1048576,0,1048576,0,16,0,16,0,1,0,1,0,0,0,0,0,0,4294967295,4294967295,4294967295,4294965917,4294967295,4294965917,4294967295,4294945228,4294967295,4294945228,4294967295,2848660773,4294967295,2848660773,4294967209,3407706750,4294967209,3407684681,4294945227,1935201585,4294945227,488917130,4294923159,2467916512,4294923158,977834259,3571814034,608474374,2848660772,1216948747,1446306523,3078018549,723153261,3686492922,44139,512601097,44137,3317133037,22069,957411463,22068,3806050166,86,887304684,86,887282615,1,2,0,2018129234,0,1446306524,0,1446306523,0,22068,0,22068,0,1379,0,1379,0,1,0,0,0,0,4294967295,4294967295,4294967295,4294965249,4294967295,4294965249,4294967295,4294934529,4294967295,4294934529,4294967295,2147483649,4294967295,2147483649,4294967168,32768,4294967168,1,4294934528,2147450881,4294934528,1,4294901761,4294705160,4294901760,1,3221225472,1,2147483648,1,2147483647,4294967295,1073741823,4294967295,65538,262152,65535,4294967295,32768,2147516416,32767,4294967295,128,32768,127,4294967295,1,2082223078,0,2996529062,0,2147483648,0,2147483647,0,32768,0,32767,0,2048,0,2047,0,1,0,1]),r.SEMICOLON,er("1 2 3 4 5 6 7 8   10 11 12 13 14    16 17 18 19 20 21 22\n     23 24 25 26 27 28\n     210 211 212 213 214     216 217 218 219 220\n    "),er(" 9 15 30 40 50 60 120 123 215 "),"\n    2 1\n    3 2 ; 3 1\n    4 2 ; 4 1\n    5 4 ; 5 2\n    6 4 ; 6 1\n    7 4 ; 7 2 ; 7 6\n    8 4 ; 8 7\n    10 4 ; 10 8 ; 10 7\n    11 4 ; 11 8\n    12 4 ; 12 7\n    13 4 ; 13 8 ; 13 12 ; 13 1 ; 13 2 ; 13 26 ; 13 218\n    14 13 ; 14 4\n    16 14 ; 16 13 ; 16 4\n    17 14\n    18 13\n    19 14 ; 19 18\n    20 19\n\n    22  21\n    23  22  ; 23  21\n    24  22  ; 24  21\n    25  24  ; 25  22\n    26  24  ; 26  21\n    27  24  ; 27  22  ; 27 26\n    28  24  ; 28  27\n    210 24  ; 210 28  ; 210 27 ; 210 5 ; 210 2 ; 210 3 ; 210 25\n    211 24  ; 211 28\n    212 24  ; 212 27\n    213 24  ; 213 28  ; 213 212\n    214 213 ; 214 24\n    216 214 ; 216 213 ; 216 24\n    217 214\n    218 213\n    219 214 ; 219 218\n    220 219\n  ".trim().split(/[\n;]+/).map(e=>e.trim()).filter(e=>e.length).map(er);let tr,nr=!1;try{const e=require("fs").readFileSync;tr=e,nr=!0}catch(e){let t=m.readFileSync;tr=t&&"function"==typeof t?t:(e,t)=>(console.log("TODO read",e,"options:",t),new Uint8Array(0))}const rr={colors:j};let sr;function ir(e,t,n){if(nr){let r=`${e}: ${t} (${n})`;console.error(Z.red(r))}sr.push({type:"error",errcode:n,message:t,pos:e})}function or(e,t,n){if(nr){const r=`${e}: ${n}: ${t}`;console.log("[diag] "+("info"==n?Z.cyan(r):Z.lightyellow(r)))}sr.push({type:n,message:t,pos:e})}function ar(e,t,n,r,s){const i=new Package(e,new Scope(n.scope)),a=new SrcFileSet;s.init(a,n,ir);for(let e of t){nr&&cr(`parse ${e}`);const t=tr(e,{flag:"r"}),l=a.addFile(e,t.length);r.initParser(l,t,n,i.scope,s,ir,or,o.ScanComments);const c=r.parseFile();if(i.files.push(c),nr){if(c.imports){console.log(`${c.imports.length} imports`);for(let e of c.imports)console.log(Ft(e,rr))}if(c.unresolved){console.log(`${c.unresolved.size} unresolved references`);for(let e of c.unresolved)console.log(" - "+Ft(e,rr))}console.log(`${c.decls.length} declarations`),console.log(Ft(c,rr))}}return r.errorCount>0||s.errorCount>0?Promise.resolve({pkg:i,success:!1}):(nr&&cr(`bind & assemble ${i}`),function(e,t,n,r,s){const i=new pkgBinder(e,t,function(e,t){return Promise.reject(new Error("not found"))},r,s);return i.bind().then(()=>0!=i.errorCount)}(i,a,0,s,ir).then(e=>({pkg:i,success:!e})))}async function lr(e){const t=new ByteStrSet,n=new TypeSet,r=new Universe(t,n),s=new TypeResolver,i=new Parser,o=(e=e||{}).sources&&e.sources.length?e.sources:["example/ssa1.co"];sr=[];let a=await ar("example",o,r,i,s);if(!a.success)return{success:!1,diagnostics:sr,ast:a.pkg};if(e.noIR)return{success:!0,diagnostics:sr,ast:a.pkg};console.log("available target archs:",Array.from(jn.keys()).join(", "));const l=new Config("covm",{optimize:!e.noOptimize});console.log(`selected target config: ${l}`);const c=new IRBuilder;c.init(l,or,g.Comments);try{for(let t of a.pkg.files){nr&&(cr(`${a.pkg} ${t.sfile.name} ${t.decls.length} declarations`),console.log(Ft(a.pkg,rr)),cr(`ssa-ir ${t.sfile.name}`));let n=t.sfile;for(let e of t.decls){let t=c.addTopLevel(n,e);nr&&t&&(console.log("\n-----------------------\n"),nn(t),console.log("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"))}let r=e.genericIR?"lower":"";for(let[,e]of c.pkg.funs)zn(e,l,r,t=>{nr&&(console.log(`after ${t.name}\n`),nn(e),console.log("━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"))}),new Program(e,l).gen()}return{success:!0,diagnostics:sr,ast:a.pkg,ir:c.pkg}}catch(e){if(nr)throw e;return{success:!1,error:e,diagnostics:sr,ast:a.pkg}}}function cr(e){if(j){const t=e=>"[40m"+Z.white(e)+"[0m";process.stdout.write(t("\n\n  "+e+"\n")+"\n\n")}else console.log("\n========================================================\n"+e+"\n--------------------------------------------------------")}"function"==typeof m.runAllTests&&m.runAllTests(),nr?S&&process.argv.includes("-test-only")?console.log("only running unit tests"):lr({sources:process.argv.slice(2).filter(e=>!e.startsWith("-")),noOptimize:process.argv.includes("-no-optimize")}).catch(e=>{console.error(e.stack||""+e),process.exit(1)}):m.colang={main:lr,fmtast:Ft,fmtir:function(e,t){let n="";return nn(e,e=>{n+=e+"\n"},t),n.replace(/\r?\n$/,"")},printir:nn}}("undefined"!=typeof exports?exports:this);
//# sourceMappingURL=co.js.map